<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><style>/* Isabelle fonts */

@font-face {
  font-family: 'Isabelle DejaVu Sans';
  src: url('../../fonts/IsabelleDejaVuSans.ttf') format('truetype');
}

@font-face {
  font-family: 'Isabelle DejaVu Sans';
  src: url('../../fonts/IsabelleDejaVuSans-Bold.ttf') format('truetype');
  font-weight: bold;
}

@font-face {
  font-family: 'Isabelle DejaVu Sans';
  src: url('../../fonts/IsabelleDejaVuSans-Oblique.ttf') format('truetype');
  font-style: italic;
}

@font-face {
  font-family: 'Isabelle DejaVu Sans';
  src: url('../../fonts/IsabelleDejaVuSans-BoldOblique.ttf') format('truetype');
  font-weight: bold;
  font-style: italic;
}

@font-face {
  font-family: 'Isabelle DejaVu Sans Mono';
  src: url('../../fonts/IsabelleDejaVuSansMono.ttf') format('truetype');
}

@font-face {
  font-family: 'Isabelle DejaVu Sans Mono';
  src: url('../../fonts/IsabelleDejaVuSansMono-Bold.ttf') format('truetype');
  font-weight: bold;
}

@font-face {
  font-family: 'Isabelle DejaVu Sans Mono';
  src: url('../../fonts/IsabelleDejaVuSansMono-Oblique.ttf') format('truetype');
  font-style: italic;
}

@font-face {
  font-family: 'Isabelle DejaVu Sans Mono';
  src: url('../../fonts/IsabelleDejaVuSansMono-BoldOblique.ttf') format('truetype');
  font-weight: bold;
  font-style: italic;
}

@font-face {
  font-family: 'Isabelle DejaVu Serif';
  src: url('../../fonts/IsabelleDejaVuSerif.ttf') format('truetype');
}

@font-face {
  font-family: 'Isabelle DejaVu Serif';
  src: url('../../fonts/IsabelleDejaVuSerif-Bold.ttf') format('truetype');
  font-weight: bold;
}

@font-face {
  font-family: 'Isabelle DejaVu Serif';
  src: url('../../fonts/IsabelleDejaVuSerif-Italic.ttf') format('truetype');
  font-style: italic;
}

@font-face {
  font-family: 'Isabelle DejaVu Serif';
  src: url('../../fonts/IsabelleDejaVuSerif-BoldItalic.ttf') format('truetype');
  font-weight: bold;
  font-style: italic;
}

@font-face {
  font-family: 'Vacuous';
  src: url('../../fonts/Vacuous.ttf') format('truetype');
}


/* standard document markup */

dt {
  float: left;
  clear: left;
  padding-right: 0.5em;
  font-weight: bold;
}

body {
  color: #000000;
  background-color: #FFFFFF;
}

.head     { background-color: #FFFFFF; }
.source   {
  direction: ltr; unicode-bidi: bidi-override;
  background-color: #FFFFFF;
  padding: 10px;
  font-family: "Isabelle DejaVu Sans Mono", monospace;
}

.theories { background-color: #FFFFFF; padding: 10px; }
.sessions { background-color: #FFFFFF; padding: 10px; }
.document { white-space: normal; font-family: "Isabelle DejaVu Serif", serif; }

.name     { font-style: italic; }
.filename { font-family: "Isabelle DejaVu Sans Mono", monospace; }


/* basic syntax markup */

.hidden         { font-family: Vacuous; font-size: 1%; color: rgba(255,255,255,0); }
.control        { font-weight: bold; font-style: italic; }

.binding        { color: #336655; }
.tfree          { color: #A020F0; }
.tvar           { color: #A020F0; }
.free           { color: #0000FF; }
.skolem         { color: #D2691E; }
.bound          { color: #008000; }
.var            { color: #00009B; }
.numeral        { }
.literal        { font-weight: bold; }
.delimiter      { }
.inner_numeral  { color: #FF0000; }
.inner_quoted   { color: #FF00CC; }
.inner_cartouche { color: #CC6600; }
.comment1       { color: #CC0000; }
.comment2       { color: #FF8400; }
.comment3       { color: #6600CC; }
.dynamic        { color: #7BA428; }
.class_parameter_color { color: #D2691E; }

.bold           { font-weight: bold; }

.main           { color: #000000; }
.command        { font-weight: bold; }
.keyword        { font-weight: bold; }
.keyword1       { color: #006699; }
.keyword2       { color: #009966; }
.keyword3       { color: #0099FF; }
.quasi_keyword  { color: #9966FF; }
.operator       { color: #323232; }
.string         { color: #FF00CC; }
.alt_string     { color: #CC00CC; }
.verbatim       { color: #6600CC; }
.cartouche      { color: #CC6600; }
.comment        { color: #CC0000; }
.improper       { color: #FF5050; }
.antiquote      { color: #6600CC; }
.raw_text       { color: #6600CC; }
.plain_text     { color: #CC6600; }
.bad            { background-color: #FF6A6A; }
.quoted         { background-color: rgba(139,139,139,0.05); }
.antiquoted     { background-color: rgba(255,200,50,0.1); }


/* message background */

.writeln_message      { background-color: #F0F0F0; }
.information_message  { background-color: #DCEAF3; }
.tracing_message      { background-color: #F0F8FF; }
.warning_message      { background-color: #EEE8AA; }
.legacy_message       { background-color: #EEE8AA; }
.error_message        { background-color: #FFC1C1; }


/* message underline */

.writeln { border-bottom: 1px dotted #C0C0C0; }
.information { border-bottom: 1px dotted #C1DFEE; }
.warning { border-bottom: 1px dotted #FF8C00; }
.legacy { border-bottom: 1px dotted #FF8C00; }
.error { border-bottom: 1px dotted #B22222; }


/* tooltips */

.writeln { position: relative; display: inline-block; }
.information { position: relative; display: inline-block; }
.warning { position: relative; display: inline-block; }
.legacy { position: relative; display: inline-block; }
.error { position: relative; display: inline-block; }

.writeln:hover .tooltip { visibility: visible; }
.information:hover .tooltip { visibility: visible; }
.warning:hover .tooltip { visibility: visible; }
.legacy:hover .tooltip { visibility: visible; }
.error:hover .tooltip { visibility: visible; }

.tooltip {
  top: -0.5ex;
  left: 5em;
  visibility: hidden;
  width: 50em;
  border: 1px solid #808080;
  padding: 1px 1px;
  background-color: #FFFFE9;
  position: absolute;
  z-index: 1;
}

.tooltip pre { margin: 1px; white-space: pre-wrap; }
</style><title>Theory "scheduler_verify_impl"</title></head>
<body><pre class="source"><span class="keyword1"><span class="command">theory</span></span> scheduler_verify_impl

<span class="keyword2"><span class="keyword">imports</span></span> bus_verify_impl
  <span class="quoted">"../des/des_scheduler"</span>
  <span class="quoted">"../impl/thy/scheduler"</span>

<span class="keyword2"><span class="keyword">begin</span></span>


<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹aux function›</span></span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹data structure ›</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheAcbList_C_update1<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" acbList_C <span class="main">(</span>scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> acbList_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheAcbList_C_update2<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" acbList_C <span class="main">(</span>nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> acbList_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheAcbList_C_update3<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" acbList_C <span class="main">(</span>actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> acbList_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheAcbList_C_update4<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" acbList_C <span class="main">(</span>registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> acbList_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>


<span class="keyword1"><span class="command">lemma</span></span> swarmList_C_update1<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" swarmList_C <span class="main">(</span>scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> swarmList_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> swarmList_C_update2<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" swarmList_C <span class="main">(</span>nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> swarmList_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> swarmList_C_update3<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" swarmList_C <span class="main">(</span>actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> swarmList_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> swarmList_C_update4<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" swarmList_C <span class="main">(</span>registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> swarmList_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>




<span class="keyword1"><span class="command">lemma</span></span> actorNo_C_update1<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" actorNo_C <span class="main">(</span>scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> actorNo_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> actorNo_C_update2<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" actorNo_C <span class="main">(</span>nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> actorNo_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> actorNo_C_update3<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" actorNo_C <span class="main">(</span>actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> <span class="free">nrp</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> actorNo_C_update4<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" actorNo_C <span class="main">(</span>registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> actorNo_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> nSwarm_C_update1<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" nSwarm_C <span class="main">(</span>scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> nSwarm_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> nSwarm_C_update2<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" nSwarm_C <span class="main">(</span>nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> <span class="free">nrp</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> nSwarm_C_update3<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" nSwarm_C <span class="main">(</span>actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> nSwarm_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> nSwarm_C_update4<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" nSwarm_C <span class="main">(</span>registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> nSwarm_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheNum_C_update1<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" scheNum_C <span class="main">(</span>scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> <span class="free">nrp</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheNum_C_update2<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" scheNum_C <span class="main">(</span>nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> scheNum_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheNum_C_update3<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" scheNum_C <span class="main">(</span>actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> scheNum_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheNum_C_update4<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" scheNum_C <span class="main">(</span>registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> scheNum_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> registeredBus_C_update1<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" registeredBus_C <span class="main">(</span>scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> registeredBus_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> registeredBus_C_update2<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" registeredBus_C <span class="main">(</span>nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> registeredBus_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> registeredBus_C_update3<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" registeredBus_C <span class="main">(</span>actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> registeredBus_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> registeredBus_C_update4<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" registeredBus_C <span class="main">(</span>registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> <span class="free">nrp</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheMsgQueue_C_update1<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" scheMsgQueue_C <span class="main">(</span>scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> scheMsgQueue_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheMsgQueue_C_update2<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" scheMsgQueue_C <span class="main">(</span>nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> scheMsgQueue_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheMsgQueue_C_update3<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" scheMsgQueue_C <span class="main">(</span>actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> scheMsgQueue_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheMsgQueue_C_update4<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" scheMsgQueue_C <span class="main">(</span>registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> scheMsgQueue_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> toPauseActors_C_update1<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" toPauseActors_C <span class="main">(</span>scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> toPauseActors_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> toPauseActors_C_update2<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" toPauseActors_C <span class="main">(</span>nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> toPauseActors_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> toPauseActors_C_update3<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" toPauseActors_C <span class="main">(</span>actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> toPauseActors_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> toPauseActors_C_update4<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" toPauseActors_C <span class="main">(</span>registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> toPauseActors_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> minPrioActors_C_update1<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" minPrioActors_C <span class="main">(</span>scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> minPrioActors_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> minPrioActors_C_update2<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" minPrioActors_C <span class="main">(</span>nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> minPrioActors_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> minPrioActors_C_update3<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" minPrioActors_C <span class="main">(</span>actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> minPrioActors_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> minPrioActors_C_update4<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" minPrioActors_C <span class="main">(</span>registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> minPrioActors_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>


<span class="keyword1"><span class="command">lemma</span></span> finishingActors_C_update1<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" finishingActors_C <span class="main">(</span>scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> finishingActors_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> finishingActors_C_update2<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" finishingActors_C <span class="main">(</span>nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> finishingActors_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> finishingActors_C_update3<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" finishingActors_C <span class="main">(</span>actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> finishingActors_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> finishingActors_C_update4<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" finishingActors_C <span class="main">(</span>registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">sche</span><span class="main">)</span> <span class="main">=</span> finishingActors_C <span class="free">sche</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">sche</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>


<span class="keyword1"><span class="command">lemma</span></span> ScheduleMsgQueue_C_length_update1 <span class="main">:</span> 
    <span class="quoted"><span class="quoted"><span class="language">"ScheduleMsgQueue_C.length_C <span class="main">(</span>ScheduleMsgQueue_C.length_C_update <span class="free">P</span> <span class="free">que</span><span class="main">)</span> <span class="main">=</span>
         <span class="free">P</span> <span class="main">(</span>ScheduleMsgQueue_C.length_C <span class="free">que</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">que</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ScheduleMsgQueue_C_length_update2 <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span>ScheduleMsgQueue_C.data_C <span class="main">(</span>ScheduleMsgQueue_C.length_C_update <span class="free">P</span> <span class="free">que</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
    ScheduleMsgQueue_C.data_C <span class="free">que</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">que</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ScheduleMsg_C_type_C_update1 <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">" type_C <span class="main">(</span>param3_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">msg</span><span class="main">)</span> <span class="main">=</span> type_C <span class="free">msg</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">msg</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ScheduleMsg_C_type_C_update2 <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">" type_C <span class="main">(</span>param2_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">msg</span><span class="main">)</span> <span class="main">=</span> type_C <span class="free">msg</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">msg</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ScheduleMsg_C_type_C_update3 <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">" type_C <span class="main">(</span>param1_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">msg</span><span class="main">)</span> <span class="main">=</span> type_C <span class="free">msg</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">msg</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ScheduleMsg_C_type_C_update4 <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">" type_C <span class="main">(</span>type_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">msg</span><span class="main">)</span> <span class="main">=</span> <span class="free">nrp</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">msg</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹corres aux›</span></span></span>


<span class="keyword1"><span class="command">lemma</span></span> corres_condition_case_scheMsg <span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="main">⟦</span>  <span class="main">⋀</span><span class="bound">s</span><span class="main">.</span> <span class="free">P'</span> <span class="bound">s</span> <span class="main">⟹</span>
     <span class="keyword1">case</span> <span class="free">msg</span> <span class="keyword1">of</span>
     ScheduleMsgType.SCHEDULE_CMD_RAW <span class="main">⇒</span> <span class="free">C1</span> <span class="bound">s</span> <span class="main">|</span> 
     ScheduleMsgType.SCHEDULE_CMD_SWITCH_PRIO <span class="main">⇒</span> <span class="main">¬</span> <span class="free">C1</span> <span class="bound">s</span> <span class="main">∧</span>  <span class="free">C2</span> <span class="bound">s</span> <span class="main">|</span>
     ScheduleMsgType.SCHEDULE_CMD_ACTIVATE_ACTOR <span class="main">⇒</span><span class="main">¬</span> <span class="free">C1</span> <span class="bound">s</span> <span class="main">∧</span> <span class="main">¬</span> <span class="free">C2</span> <span class="bound">s</span> <span class="main">∧</span> <span class="free">C3</span> <span class="bound">s</span><span class="main">|</span> 
     ScheduleMsgType.SCHEDULE_CMD_YIELD_ACTOR <span class="main">⇒</span> <span class="main">¬</span> <span class="free">C1</span> <span class="bound">s</span> <span class="main">∧</span> <span class="main">¬</span> <span class="free">C2</span> <span class="bound">s</span> <span class="main">∧</span> <span class="main">¬</span> <span class="free">C3</span> <span class="bound">s</span><span class="main">;</span>
     corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">r</span> <span class="free">P</span> <span class="free">P'</span> <span class="free">A1</span> <span class="free">A</span><span class="main">;</span> 
     corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">r</span> <span class="free">P</span> <span class="free">P'</span> <span class="free">B1</span> <span class="free">B</span><span class="main">;</span>
     corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">r</span> <span class="free">P</span> <span class="free">P'</span> <span class="free">D1</span> <span class="free">D</span><span class="main">;</span> 
     corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">r</span> <span class="free">P</span> <span class="free">P'</span> <span class="free">E1</span> <span class="free">E</span> <span class="main">⟧</span> <span class="main">⟹</span>
  corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">r</span> <span class="free">P</span>  <span class="free">P'</span> 
    <span class="main">(</span><span class="keyword1">case</span> <span class="free">msg</span> <span class="keyword1">of</span> 
      ScheduleMsgType.SCHEDULE_CMD_RAW  <span class="main">⇒</span> <span class="free">A1</span> <span class="main">|</span> 
      ScheduleMsgType.SCHEDULE_CMD_SWITCH_PRIO <span class="main">⇒</span> <span class="free">B1</span> <span class="main">|</span>
      ScheduleMsgType.SCHEDULE_CMD_ACTIVATE_ACTOR <span class="main">⇒</span> <span class="free">D1</span> <span class="main">|</span> 
      ScheduleMsgType.SCHEDULE_CMD_YIELD_ACTOR <span class="main">⇒</span> <span class="free">E1</span> <span class="main">)</span>
    <span class="main">(</span>condition <span class="free">C1</span>  <span class="free">A</span> <span class="main">(</span>condition <span class="free">C2</span> <span class="free">B</span> <span class="main">(</span>condition <span class="free">C3</span> <span class="free">D</span> <span class="free">E</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">msg</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def condition_def
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>

<span class="keyword1"><span class="command">section</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹scheduler refinement ›</span></span></span>


<span class="keyword1"><span class="command">definition</span></span> sche_valid <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid</span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> True"</span></span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹scheInitialize verify ›</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheUpdate_subst <span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span>heap_ACBVector_C <span class="main">(</span>heap_ActorScheduler_C_update
            <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
             <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
              <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
               <span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">aRegisteredBus</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="free">s</span><span class="main">)</span> 
            <span class="main">(</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s</span> <span class="free">sche</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> heap_ACBVector_C <span class="free">s</span> <span class="main">(</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s</span> <span class="free">sche</span><span class="main">)</span><span class="main">)</span>  "</span></span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheUpdate_subst1 <span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"heap_ACB_C <span class="main">(</span>heap_ActorScheduler_C_update
            <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
             <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
              <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
               <span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">aRegisteredBus</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="free">s</span><span class="main">)</span> 
               <span class="main">=</span> heap_ACB_C <span class="free">s</span>  "</span></span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheUpdate_subst2 <span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"heap_SwarmInfo_C <span class="main">(</span>heap_ActorScheduler_C_update
            <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
             <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
              <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
               <span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">aRegisteredBus</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="free">s</span><span class="main">)</span> 
               <span class="main">=</span> heap_SwarmInfo_C <span class="free">s</span>  "</span></span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheUpdate_subst3 <span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"heap_GeneralBusVector_C <span class="main">(</span>heap_ActorScheduler_C_update
            <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
             <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
              <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
               <span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">aRegisteredBus</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="free">s</span><span class="main">)</span> <span class="free">aRegisteredBus</span>
               <span class="main">=</span> heap_GeneralBusVector_C <span class="free">s</span> <span class="free">aRegisteredBus</span> "</span></span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheUpdate_subst4 <span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"heap_w8'ptr <span class="main">(</span>heap_ActorScheduler_C_update
            <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
             <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
              <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
               <span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">aRegisteredBus</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="free">s</span><span class="main">)</span> 
               <span class="main">=</span> heap_w8'ptr <span class="free">s</span>  "</span></span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheUpdate_subst5 <span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"heap_w64 <span class="main">(</span>heap_ActorScheduler_C_update
            <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
             <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
              <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
               <span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">aRegisteredBus</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="free">s</span><span class="main">)</span> 
               <span class="main">=</span> heap_w64 <span class="free">s</span>  "</span></span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheUpdate_subst6 <span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"heap_GeneralPlugin_C <span class="main">(</span>heap_ActorScheduler_C_update
            <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
             <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
              <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
               <span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">aRegisteredBus</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="free">s</span><span class="main">)</span> 
               <span class="main">=</span> heap_GeneralPlugin_C <span class="free">s</span>  "</span></span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheUpdate_subst7 <span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"heap_ActorPluginInfoVector_C <span class="main">(</span>heap_ActorScheduler_C_update
            <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
             <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
              <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
               <span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">aRegisteredBus</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="free">s</span><span class="main">)</span> 
               <span class="main">=</span> heap_ActorPluginInfoVector_C <span class="free">s</span>  "</span></span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> scheUpdate_subst8 <span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"heap_ScheduleMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C_update
            <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> scheNum_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
             <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> nSwarm_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
              <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> actorNo_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span> <span class="main">∘</span>
               <span class="main">(</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">b</span><span class="main">.</span> <span class="keyword1">if</span> <span class="bound">b</span> <span class="main">=</span> <span class="free">sche</span> <span class="keyword1">then</span> registeredBus_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">aRegisteredBus</span><span class="main">)</span> <span class="main">(</span><span class="bound">a</span> <span class="free">sche</span><span class="main">)</span> <span class="keyword1">else</span> <span class="bound">a</span> <span class="bound">b</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="free">s</span><span class="main">)</span> 
               <span class="main">=</span> heap_ScheduleMsgQueue_C <span class="free">s</span>  "</span></span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">axiomatization</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> ACBCVectorClear <span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">" acbListPtrEqual <span class="main">[]</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>Impl_ACBVectorClear <span class="free">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s</span> <span class="free">sche_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="free">sche_C</span><span class="main">)</span><span class="main">)</span>
                                  <span class="main">(</span>Impl_ACBVectorClear <span class="free">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s</span> <span class="free">sche_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> "</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_scheInitialize <span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> swarmListEqual <span class="main">[]</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">sche_C</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span>
        <span class="main">∧</span> scheMsgQueueEqual <span class="main">[]</span> <span class="main">(</span>scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">sche_C</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span>
        <span class="main">∧</span> actorPluginInfoListEqual <span class="main">[]</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">sche_C</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span>
        <span class="main">∧</span> actorPluginInfoListEqual <span class="main">[]</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">sche_C</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span>
        <span class="main">∧</span> actorPluginInfoListEqual <span class="main">[]</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">sche_C</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span>
        <span class="main">∧</span> busListEqual <span class="free">bl</span> <span class="free">aRegisteredBus</span> <span class="bound">s</span>  <span class="main">⦄</span> 
      Impl_scheduleInitialize <span class="free">sche_C</span> <span class="free">aRegisteredBus</span> 
   <span class="main">⦃</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> schePtrEqual <span class="free">sche_C</span> <span class="bound">s</span> <span class="main">(</span>scheInitialize <span class="free">bl</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Impl_scheduleInitialize_def scheInitialize_def schePtrEqual_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> scheAcbList_C_update1<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> scheAcbList_C_update2<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> scheAcbList_C_update3<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> scheAcbList_C_update4<span class="main">)</span></span>
    <span class="keyword1"><span class="command">using</span></span> ACBCVectorClear
    <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> scheUpdate_subst<span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> acbPtrEqual_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> scheUpdate_subst1<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> swarmInfoEqual_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> scheUpdate_subst2<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> finish_puase_apiList<span class="main">)</span> <span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> actorNo_C_update1 <span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> actorNo_C_update2 <span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> actorNo_C_update3 <span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> int64Equal_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> nSwarm_C_update1 <span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> nSwarm_C_update2 <span class="main">)</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> int64Equal_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> scheNum_C_update1 <span class="main">)</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> int32Equal_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> s
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> registeredBus_C_update1 <span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> registeredBus_C_update2 <span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> registeredBus_C_update3 <span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> registeredBus_C_update4 <span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"busListEqual <span class="free">bl</span> <span class="free">aRegisteredBus</span> <span class="main">(</span>Impl_ACBVectorClear <span class="skolem">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">s</span> <span class="free">sche_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> <span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> Impl_ACBVectorClear_def Let_def busListEqual_def busPtrEqual_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> stringPtrListEqual_def int64PtrListEqual_def pluginPtrListEqual_def pluginEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> scheUpdate_subst3<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> stringPtrListEqual_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> scheUpdate_subst4<span class="main">)</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> int64PtrListEqual_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> scheUpdate_subst5<span class="main">)</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> pluginPtrListEqual_def pluginEqual_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> scheUpdate_subst6<span class="main">)</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> scheMsgQueue_C_update1 <span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> scheMsgQueue_C_update2 <span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> scheMsgQueue_C_update3 <span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> scheMsgQueue_C_update4 <span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> scheUpdate_subst8<span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> ScheduleMsgPtrEqual_def Impl_ACBVectorClear_def Let_def 
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> toPauseActors_C_update1 <span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> toPauseActors_C_update2 <span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> toPauseActors_C_update3 <span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> toPauseActors_C_update4 <span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> scheUpdate_subst7<span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoEqual_sche_def Impl_ACBVectorClear_def Let_def 
              taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> minPrioActors_C_update1 <span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> minPrioActors_C_update2 <span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> minPrioActors_C_update3 <span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> minPrioActors_C_update4 <span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> scheUpdate_subst7<span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoEqual_sche_def Impl_ACBVectorClear_def Let_def 
              taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> finishingActors_C_update1 <span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> finishingActors_C_update2 <span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> finishingActors_C_update3 <span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> finishingActors_C_update4 <span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> scheUpdate_subst7<span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoEqual_sche_def Impl_ACBVectorClear_def Let_def pluginInfoEqual_def
              taskInfoPtrEqual_def pluginInfoListEqual_def actorPluginInfoEqual_sche_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹appendScheduleMsg verify ›</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_appendScheduleMsg <span class="main">:</span> 
 <span class="quoted"><span class="quoted"><span class="language">"corres_underlying <span class="main">(</span><span class="main">{</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">(</span>fst <span class="bound">t</span><span class="main">)</span><span class="main">}</span><span class="main">)</span> False False
      <span class="main">(</span><span class="main">λ</span><span class="bound">retDes</span> <span class="bound">retImpl</span><span class="main">.</span> True<span class="main">)</span>  <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> True<span class="main">)</span> 
      <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> ScheduleMsgEqual <span class="free">aMsg</span> <span class="free">aMsgC</span><span class="main">)</span> 
      <span class="main">(</span>Des_appendScheduleMsg <span class="free">aMsg</span><span class="main">)</span> <span class="main">(</span>Impl_appendScheduleMsg <span class="free">schePtr</span> <span class="free">aMsgC</span> <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_appendScheduleMsg_def Impl_appendScheduleMsg_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> ScheduleMsgEqual <span class="free">aMsg</span> <span class="free">aMsgC</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span> scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>
                                                <span class="main">∧</span>  sche_valid <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span> ScheduleMsgEqual <span class="free">aMsg</span> <span class="free">aMsgC</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>                                                              
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">rd</span> <span class="bound">ri</span><span class="main">.</span> True"</span></span></span>
            <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">v</span><span class="main">.</span> True"</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">v</span><span class="main">.</span> True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> skip_def push_que_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">corres</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> quePtr
    <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueue_AddToTail'_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">quePtr</span> <span class="main">=</span> scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>
                                                 <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> sint <span class="main">(</span>ScheduleMsgQueue_C.length_C <span class="main">(</span>heap_ScheduleMsgQueue_C <span class="bound">s</span> <span class="skolem">quePtr</span><span class="main">)</span><span class="main">)</span>
                                                <span class="main">∧</span>  sche_valid <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span> ScheduleMsgEqual <span class="free">aMsg</span> <span class="free">aMsgC</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> len
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span> ScheduleMsgQueue_C.data_C <span class="main">(</span>heap_ScheduleMsgQueue_C <span class="bound">s</span> <span class="skolem">quePtr</span><span class="main">)</span>
                                                <span class="main">∧</span> <span class="skolem">quePtr</span> <span class="main">=</span> scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>
                                                 <span class="main">∧</span> <span class="skolem">len</span> <span class="main">=</span> sint <span class="main">(</span>ScheduleMsgQueue_C.length_C <span class="main">(</span>heap_ScheduleMsgQueue_C <span class="bound">s</span> <span class="skolem">quePtr</span><span class="main">)</span><span class="main">)</span>
                                                <span class="main">∧</span>  sche_valid <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span> ScheduleMsgEqual <span class="free">aMsg</span> <span class="free">aMsgC</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def gets_def get_def modify_def return_def NonDetMonad.bind_def put_def 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def stringPtrListEqual_def swarmListEqual_def swarmInfoEqual_def
            int64PtrListEqual_def pluginPtrListEqual_def pluginEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def
         taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def
         taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def
         taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> ScheduleMsgQueue_C_length_update1<span class="main">)</span></span>
    <span class="keyword1"><span class="command">using</span></span> MsgQue_sint_add <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span>scheMsgQueue <span class="improper">a</span> <span class="main">@</span> <span class="main">[</span><span class="free">aMsg</span><span class="main">]</span><span class="main">)</span> <span class="main">!</span> <span class="improper">r</span> <span class="main">=</span> <span class="free">aMsg</span>"</span></span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">using</span></span> ScheduleMsgEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">fastforce</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span>scheMsgQueue <span class="improper">a</span> <span class="main">@</span> <span class="main">[</span><span class="free">aMsg</span><span class="main">]</span><span class="main">)</span> <span class="main">!</span> <span class="improper">r</span> <span class="main">=</span> <span class="free">aMsg</span>"</span></span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">using</span></span> ScheduleMsgEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">fastforce</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span>scheMsgQueue <span class="improper">a</span> <span class="main">@</span> <span class="main">[</span><span class="free">aMsg</span><span class="main">]</span><span class="main">)</span> <span class="main">!</span> <span class="improper">r</span> <span class="main">=</span> <span class="free">aMsg</span>"</span></span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">using</span></span> ScheduleMsgEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">fastforce</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span>scheMsgQueue <span class="improper">a</span> <span class="main">@</span> <span class="main">[</span><span class="free">aMsg</span><span class="main">]</span><span class="main">)</span> <span class="main">!</span> <span class="improper">r</span> <span class="main">=</span> <span class="free">aMsg</span>"</span></span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">using</span></span> ScheduleMsgEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">fastforce</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> ScheduleMsgQueue_C_length_update2<span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span>scheMsgQueue <span class="improper">a</span> <span class="main">@</span> <span class="main">[</span><span class="free">aMsg</span><span class="main">]</span><span class="main">)</span> <span class="main">!</span> <span class="improper">r</span> <span class="main">=</span> scheMsgQueue <span class="improper">a</span>  <span class="main">!</span> <span class="improper">r</span>  "</span></span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">presburger</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> ScheduleMsgQueue_C_length_update2<span class="main">)</span></span>  
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span>scheMsgQueue <span class="improper">a</span> <span class="main">@</span> <span class="main">[</span><span class="free">aMsg</span><span class="main">]</span><span class="main">)</span> <span class="main">!</span> <span class="improper">r</span> <span class="main">=</span> scheMsgQueue <span class="improper">a</span>  <span class="main">!</span> <span class="improper">r</span>  "</span></span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">presburger</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> ScheduleMsgQueue_C_length_update2<span class="main">)</span></span>  
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span>scheMsgQueue <span class="improper">a</span> <span class="main">@</span> <span class="main">[</span><span class="free">aMsg</span><span class="main">]</span><span class="main">)</span> <span class="main">!</span> <span class="improper">r</span> <span class="main">=</span> scheMsgQueue <span class="improper">a</span>  <span class="main">!</span> <span class="improper">r</span>  "</span></span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">presburger</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> ScheduleMsgQueue_C_length_update2<span class="main">)</span></span>  
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span>scheMsgQueue <span class="improper">a</span> <span class="main">@</span> <span class="main">[</span><span class="free">aMsg</span><span class="main">]</span><span class="main">)</span> <span class="main">!</span> <span class="improper">r</span> <span class="main">=</span> scheMsgQueue <span class="improper">a</span>  <span class="main">!</span> <span class="improper">r</span>  "</span></span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">presburger</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="improper">r</span> <span class="main">=</span> length <span class="main">(</span>scheMsgQueue <span class="improper">a</span><span class="main">)</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"int <span class="improper">r</span> <span class="main">=</span> sint <span class="main">(</span>ScheduleMsgQueue_C.length_C
                <span class="main">(</span>heap_ScheduleMsgQueue_C <span class="improper">b</span> <span class="main">(</span>scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="improper">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> ScheduleMsgQueue_C_length_update2 ptr_equal<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="improper">r</span> <span class="main">&lt;</span> length <span class="main">(</span>scheMsgQueue <span class="improper">a</span><span class="main">)</span>"</span></span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">meson</span> nth_append<span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="improper">r</span> <span class="main">&lt;</span> length <span class="main">(</span>scheMsgQueue <span class="improper">a</span><span class="main">)</span>"</span></span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">meson</span> nth_append<span class="main">)</span></span> 
    <span class="keyword1"><span class="command">using</span></span> ScheduleMsgQueue_C_length_update2 of_nat_less_imp_less scheMsg_ptr_not_equal <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">fastforce</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
    <span class="keyword1"><span class="command">using</span></span> ScheduleMsgQueue_C_length_update2 of_nat_less_imp_less scheMsg_ptr_not_equal <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">fastforce</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def stringPtrListEqual_def int64PtrListEqual_def pluginPtrListEqual_def
              pluginEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹appendACBs verify›</span></span></span>

<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span> des_impl_appendACBs <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">" corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span> <span class="bound">r'</span> <span class="main">)</span>
     <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span>sche_valid <span class="free">schePtr</span><span class="main">)</span>
     <span class="main">(</span>Des_appendACBs <span class="free">acbl</span> <span class="free">swi</span><span class="main">)</span> <span class="main">(</span>Impl_appendACBs <span class="free">schePtr</span> <span class="free">acbVecPtr</span> <span class="free">swiPtr</span><span class="main">)</span>"</span></span></span>



<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹appendSwarmACBs verify›</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> swarmInfo_C_update1<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" swarmID_C <span class="main">(</span>swarmID_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">swarm</span><span class="main">)</span> <span class="main">=</span> <span class="free">nrp</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">swarm</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span> 

<span class="keyword1"><span class="command">lemma</span></span> swarmInfo_C_update2<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">"SwarmInfo_C.state_C <span class="main">(</span>SwarmInfo_C.state_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">swarm</span><span class="main">)</span> <span class="main">=</span> <span class="free">nrp</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">swarm</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span> 

<span class="keyword1"><span class="command">lemma</span></span> swarmInfo_C_update3<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" swarmName_C <span class="main">(</span>swarmID_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">swarm</span><span class="main">)</span> <span class="main">=</span> swarmName_C <span class="free">swarm</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">swarm</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span> 

<span class="keyword1"><span class="command">lemma</span></span> swarmInfo_C_update4<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" swarmPrio_C <span class="main">(</span>swarmID_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">swarm</span><span class="main">)</span> <span class="main">=</span> swarmPrio_C <span class="free">swarm</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">swarm</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span> 

<span class="keyword1"><span class="command">lemma</span></span> swarmInfo_C_update5<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" SwarmInfo_C.state_C <span class="main">(</span>swarmID_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">swarm</span><span class="main">)</span> <span class="main">=</span> SwarmInfo_C.state_C <span class="free">swarm</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">swarm</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span> 
  sint_add_one <span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"sint <span class="free">P</span> <span class="main">≤</span> <span class="numeral">1023</span> <span class="main">⟹</span> sint <span class="main">(</span><span class="free">P</span> <span class="main">+</span><span class="main">1</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span>"</span></span></span> <span class="keyword2"><span class="keyword">and</span></span>
  sint_add_one_1 <span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span>sint <span class="free">P</span><span class="main">)</span> <span class="main">+</span> <span class="main">1</span> <span class="main">=</span> sint <span class="main">(</span><span class="free">P</span> <span class="main">+</span><span class="main">1</span><span class="main">)</span>"</span></span></span>

<span class="keyword1"><span class="command">definition</span></span> swiPtr_valid <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">" SwarmInfo_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> ActorScheduler_C ptr<span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">swiPtr_valid</span> <span class="free"><span class="bound">swiPtr</span></span> <span class="free"><span class="bound">b</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="main">≡</span> <span class="main">(</span><span class="main">∀</span><span class="bound">r</span><span class="main">.</span> <span class="free"><span class="bound">swiPtr</span></span> <span class="main">≠</span>  pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="free"><span class="bound">b</span></span> 
                <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">b</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">b</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
          <span class="main">(</span><span class="main">∀</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free"><span class="bound">schePtr</span></span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span>  <span class="main">≠</span> <span class="free"><span class="bound">swiPtr</span></span><span class="main">)</span> <span class="main">∧</span>
         <span class="main">(</span><span class="main">∀</span><span class="bound">p</span> <span class="bound">q</span><span class="main">.</span>  <span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free"><span class="bound">schePtr</span></span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span>  <span class="bound">q</span>  <span class="main">≠</span>  pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="free"><span class="bound">b</span></span> 
                <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">b</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">b</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>

<span class="keyword1"><span class="command">definition</span></span> sche_valid_appendSwarmACBs <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_appendSwarmACBs</span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> True"</span></span></span>


<span class="keyword1"><span class="command">lemma</span></span> des_impl_appendSwarmACBs <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"
  corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True<span class="main">)</span>
   <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">b</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">b</span> <span class="main">∧</span> swiPtr_valid <span class="free">swiPtr</span> <span class="bound">b</span> <span class="free">schePtr</span> <span class="main">∧</span> swarmInfoEqual <span class="free">swi</span> <span class="free">swiPtr</span> <span class="bound">b</span>  <span class="main">)</span>
   <span class="main">(</span>Des_appendSwarmACBs <span class="free">swi</span> <span class="free">acbl</span><span class="main">)</span> <span class="main">(</span>Impl_appendSwarmACBs <span class="free">schePtr</span> <span class="free">swiPtr</span> <span class="free">acbVecPtr</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_appendSwarmACBs_def  Impl_appendSwarmACBs_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swiPtr_valid <span class="free">swiPtr</span> <span class="bound">s</span> <span class="free">schePtr</span> <span class="main">∧</span> swarmInfoEqual <span class="free">swi</span> <span class="free">swiPtr</span> <span class="bound">s</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swiPtr_valid <span class="free">swiPtr</span> <span class="bound">s</span> <span class="free">schePtr</span> <span class="main">∧</span> swarmInfoEqual <span class="free">swi</span> <span class="free">swiPtr</span> <span class="bound">s</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swiPtr_valid <span class="free">swiPtr</span> <span class="bound">s</span> <span class="free">schePtr</span> <span class="main">∧</span> swarmInfoEqual <span class="free">swi</span> <span class="free">swiPtr</span> <span class="bound">s</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span>  <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span>  nSwarm <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre<span class="main">)</span></span>  
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> SWARM_MAX_SIZE_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def int64Equal_def 
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> skip_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> swarmNum
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span>  nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">+</span> <span class="main">1</span> 
                                                <span class="main">∧</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1023</span>
                                                <span class="main">∧</span> swiPtr_valid <span class="free">swiPtr</span> <span class="bound">s</span> <span class="free">schePtr</span> <span class="main">∧</span> swarmInfoEqual <span class="free">swi</span> <span class="free">swiPtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> rv
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">rd</span> <span class="bound">ri</span><span class="main">.</span> True"</span></span></span>
            <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">σ</span><span class="main">.</span> nSwarm <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">swarmNum</span> <span class="main">+</span> <span class="main">1</span>"</span></span></span>  
            <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span> <span class="skolem">rv</span> <span class="main">=</span> nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> 
                            <span class="main">∧</span>  sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span>
                            <span class="main">∧</span> swiPtr_valid <span class="free">swiPtr</span> <span class="bound">s</span> <span class="free">schePtr</span> <span class="main">∧</span> swarmInfoEqual <span class="free">swi</span> <span class="free">swiPtr</span> <span class="bound">s</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_modify_ret<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def int64Equal_def 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def int64Equal_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> scheAcbList_C_update2<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">presburger</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command">using</span></span> scheAcbList_C_update2 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">presburger</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def  <span class="keyword1"><span class="command">by</span></span>  <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> actorNo_C_update2<span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> nSwarm_C_update2<span class="main">)</span></span>
    <span class="keyword1"><span class="command">using</span></span> sint_add_one_1 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span>
    <span class="keyword1"><span class="command">using</span></span> scheNum_C_update2 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">presburger</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a s'
        <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> registeredBus_C_update2<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>   <span class="keyword1"><span class="command">unfolding</span></span> stringPtrListEqual_def  
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> registeredBus_C_update2<span class="main">)</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> int64PtrListEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> registeredBus_C_update2<span class="main">)</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> pluginPtrListEqual_def  pluginEqual_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> registeredBus_C_update2<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> scheMsgQueue_C_update2<span class="main">)</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">presburger</span><span class="main"><span class="keyword3">+</span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> toPauseActors_C_update2<span class="main">)</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoEqual_sche_def taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> minPrioActors_C_update2<span class="main">)</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoEqual_sche_def taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> finishingActors_C_update2<span class="main">)</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoEqual_sche_def taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>  
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  <span class="skolem">rv</span> <span class="main">=</span> nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> 
                                                  <span class="main">∧</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span>
                                                  <span class="main">∧</span> swiPtr_valid <span class="free">swiPtr</span> <span class="bound">s</span> <span class="free">schePtr</span> <span class="main">∧</span> swarmInfoEqual <span class="free">swi</span> <span class="free">swiPtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> nSwarm_C_update2<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sint_add_one<span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> nSwarm_C_update2<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sint_add_one<span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>swiPtr_valid_def<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> scheAcbList_C_update2<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmInfoEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">rd</span> <span class="bound">ri</span><span class="main">.</span> True"</span></span></span>
            <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">σ</span><span class="main">.</span>  <span class="bound">r</span> <span class="main">=</span> <span class="free">swi</span><span class="main">⦇</span>swarmID <span class="main">:=</span> nSwarm <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span><span class="main">⦈</span> "</span></span></span>  
            <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  <span class="skolem">rv</span> <span class="main">=</span> nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> 
                             sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span> <span class="main">∧</span> 
                            swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">swiPtr</span><span class="main">)</span> <span class="main">=</span>  nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>
                            <span class="main">∧</span> swiPtr_valid <span class="free">swiPtr</span> <span class="bound">s</span> <span class="free">schePtr</span>   "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span>  corres_underlying_def modify_def get_def gets_def put_def NonDetMonad.bind_def return_def schePtrEqual_def swiPtr_valid_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="comment1">(* schePtrEqual *)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>   <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def  acbPtrEqual_def  swarmInfoEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a s'
        <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>   <span class="keyword1"><span class="command">unfolding</span></span> stringPtrListEqual_def  
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> registeredBus_C_update2<span class="main">)</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> int64PtrListEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> registeredBus_C_update2<span class="main">)</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> pluginPtrListEqual_def  pluginEqual_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> registeredBus_C_update2<span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> toPauseActors_C_update2<span class="main">)</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoEqual_sche_def taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> minPrioActors_C_update2<span class="main">)</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoEqual_sche_def taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> finishingActors_C_update2<span class="main">)</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoEqual_sche_def taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b   <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_appendSwarmACBs_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>  
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> swarmInfo_C_update1<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span>swiPtr_valid_def<span class="main">)</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_appendSwarmACBs_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>  
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> anSwarm
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split_r_ret<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="main"><span class="bound">_</span></span><span class="main">.</span> True"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">dr</span> <span class="bound">σ</span><span class="main">.</span>  <span class="skolem">anSwarm</span> <span class="main">=</span> <span class="free">swi</span><span class="main">⦇</span>swarmID <span class="main">:=</span> nSwarm <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span><span class="main">⦈</span>"</span></span></span> 
                                             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  <span class="skolem">rv</span> <span class="main">=</span> nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> 
                                                  <span class="main">∧</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span>  <span class="main">∧</span> swiPtr_valid <span class="free">swiPtr</span> <span class="bound">s</span> <span class="free">schePtr</span> 
                                                  <span class="main">∧</span> SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">swiPtr</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_INIT  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_appendSwarmACBs_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swiPtr_valid_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> swarmInfo_C_update2<span class="main"><span class="keyword3">,</span></span> <span class="operator">simp</span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>   <span class="comment1">(* schePtrEqual *)</span>
    <span class="keyword1"><span class="command">unfolding</span></span>  corres_underlying_def modify_def get_def gets_def put_def NonDetMonad.bind_def return_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span>  schePtrEqual_def swiPtr_valid_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def  acbPtrEqual_def  swarmInfoEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a s'
        <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>   <span class="keyword1"><span class="command">unfolding</span></span> stringPtrListEqual_def  
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> registeredBus_C_update2<span class="main">)</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> int64PtrListEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> registeredBus_C_update2<span class="main">)</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> pluginPtrListEqual_def  pluginEqual_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> registeredBus_C_update2<span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> toPauseActors_C_update2<span class="main">)</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoEqual_sche_def taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> minPrioActors_C_update2<span class="main">)</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoEqual_sche_def taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> finishingActors_C_update2<span class="main">)</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoEqual_sche_def taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b   <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">rv</span> <span class="main">=</span> nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>   <span class="main">∧</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span>    <span class="main">∧</span> SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">swiPtr</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_INIT  <span class="main">∧</span> swiPtr_valid <span class="free">swiPtr</span> <span class="bound">s</span> <span class="free">schePtr</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">rv</span> <span class="main">=</span> nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>   <span class="main">∧</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span>    <span class="main">∧</span> SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">swiPtr</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_INIT  <span class="main">∧</span> swiPtr_valid <span class="free">swiPtr</span> <span class="bound">s</span> <span class="free">schePtr</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">rv</span> <span class="main">=</span> nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>   <span class="main">∧</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span>    <span class="main">∧</span> SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">swiPtr</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_INIT  <span class="main">∧</span> swiPtr_valid <span class="free">swiPtr</span> <span class="bound">s</span> <span class="free">schePtr</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">rv</span> <span class="main">=</span> nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>   <span class="main">∧</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span>    <span class="main">∧</span> SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">swiPtr</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_INIT  <span class="main">∧</span> swiPtr_valid <span class="free">swiPtr</span> <span class="bound">s</span> <span class="free">schePtr</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">rv</span> <span class="main">=</span> nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>   <span class="main">∧</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span>    <span class="main">∧</span> SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">swiPtr</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_INIT  <span class="main">∧</span> swiPtr_valid <span class="free">swiPtr</span> <span class="bound">s</span> <span class="free">schePtr</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="main"><span class="bound">_</span></span><span class="main">.</span> True"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">dr</span> <span class="bound">σ</span><span class="main">.</span> <span class="skolem">anSwarm</span> <span class="main">=</span> <span class="free">swi</span><span class="main">⦇</span>swarmID <span class="main">:=</span> nSwarm <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span><span class="main">⦈</span>"</span></span></span> 
                                             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  <span class="skolem">rv</span> <span class="main">=</span> nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> 
                                                  <span class="main">∧</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span> 
                                                  <span class="main">∧</span> SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">swiPtr</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_INIT  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_modify_ret<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span></span>
  <span class="comment1">(* schePtrEqual *)</span>
  <span class="keyword1"><span class="command">unfolding</span></span>  schePtrEqual_def swiPtr_valid_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a s'
      <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def  acbPtrEqual_def  swiPtr_valid_def swarmInfoEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">)</span></span><span class="main">)</span> <span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a s'
        <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>   <span class="keyword1"><span class="command">unfolding</span></span> stringPtrListEqual_def  
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> registeredBus_C_update2<span class="main">)</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> int64PtrListEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> registeredBus_C_update2<span class="main">)</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> pluginPtrListEqual_def  pluginEqual_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> registeredBus_C_update2<span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> toPauseActors_C_update2<span class="main">)</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoEqual_sche_def taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> minPrioActors_C_update2<span class="main">)</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoEqual_sche_def taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> finishingActors_C_update2<span class="main">)</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoEqual_sche_def taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b   <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
      <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_appendSwarmACBs_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  <span class="skolem">rv</span> <span class="main">=</span> nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> 
            <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span>  <span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="main">(</span>sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="main">1</span><span class="main">)</span>
             <span class="main">∧</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span>   
            <span class="main">∧</span> SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">swiPtr</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_INIT  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">des</span> <span class="bound">impl</span><span class="main">.</span> <span class="bound">des</span> <span class="main">=</span> <span class="bound">impl</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">dr</span> <span class="bound">σ</span><span class="main">.</span> True "</span></span></span> 
                                             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_appendSwarmACBs <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">using</span></span> des_impl_appendACBs <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def case_prod_unfold sche_valid_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> Des_appendACBs_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> Impl_appendACBs_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">insert</span> des_impl_appendScheduleMsg<span class="main">)</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"ScheduleMsgEqual <span class="main">(</span>nullScheduleMsg<span class="main">⦇</span>ScheduleMsg.type <span class="main">:=</span> ScheduleMsgType.SCHEDULE_CMD_RAW<span class="main">,</span> param1 <span class="main">:=</span> <span class="main">0</span><span class="main">,</span> param2 <span class="main">:=</span> <span class="main">0</span><span class="main">⦈</span><span class="main">)</span>
                         <span class="main">(</span>ScheduleMsg_C impl_SCHEDULE_CMD_RAW <span class="main">0</span> <span class="main">0</span> NULL<span class="main">)</span> "</span></span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> sche_valid_def snd_conv<span class="main">)</span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> ScheduleMsgEqual_def stateMsgEqual_def  impl_SCHEDULE_CMD_RAW_def int64Equal_def stringEqual_def nullScheduleMsg_def
     <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>  
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span> 



<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹getswarm verify›</span></span></span>

<span class="keyword1"><span class="command">definition</span></span> sche_val1d <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_val1d</span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> 
        <span class="main">(</span>is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span> <span class="main">∧</span>
        <span class="main">(</span><span class="main">∀</span><span class="bound">i</span><span class="main">.</span>  is_valid_SwarmInfo_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free"><span class="bound">schePtr</span></span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
        <span class="main">(</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span> <span class="main">)</span> <span class="main">∧</span>
        sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">≥</span>  <span class="main">0</span>"</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> case_convert<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⦃</span><span class="free">P</span><span class="main">⦄</span>
    <span class="keyword1">do</span> <span class="bound">x</span> <span class="main">&lt;-</span> <span class="free">A</span><span class="main">;</span>
       <span class="keyword1">case</span> <span class="bound">x</span> <span class="keyword1">of</span> Inl <span class="bound">e</span> <span class="main">⇒</span> return <span class="bound">e</span> <span class="main">|</span> Inr <span class="bound">b</span> <span class="main">⇒</span> return <span class="bound">b</span>
    <span class="keyword1">od</span> 
    <span class="main">⦃</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="free">Q</span> <span class="bound">r</span> <span class="bound">s</span><span class="main">⦄</span> <span class="main">=</span> 
   <span class="main">⦃</span><span class="free">P</span><span class="main">⦄</span> <span class="free">A</span> <span class="main">⦃</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span> Inl <span class="bound">e</span> <span class="main">⇒</span> <span class="free">Q</span> <span class="bound">e</span> <span class="bound">s</span>  <span class="main">|</span> Inr <span class="bound">b</span> <span class="main">⇒</span> <span class="free">Q</span> <span class="bound">b</span> <span class="bound">s</span><span class="main">⦄</span> "</span></span></span>
   <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.valid_def return_def  NonDetMonad.bind_def case_prod_unfold  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="improper">a</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">fastforce</span><span class="main"><span class="keyword3">+</span></span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> s a b aa ba 
    <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList 
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>



<span class="keyword1"><span class="command">lemma</span></span> corres_condition_P_rev<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⟦</span> <span class="main">∀</span><span class="main">(</span><span class="bound">s</span><span class="main">,</span><span class="bound">t</span><span class="main">)</span><span class="main">∈</span><span class="free">sr</span><span class="main">.</span> <span class="free">P</span> <span class="bound">s</span> <span class="main">∧</span> <span class="free">P'</span> <span class="bound">t</span> <span class="main">⟶</span>  <span class="main">(</span><span class="main">¬</span> <span class="free">G</span> <span class="bound">s</span><span class="main">)</span> <span class="main">=</span> <span class="free">G'</span> <span class="bound">t</span><span class="main">;</span>
     corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">r</span> <span class="free">P</span> <span class="free">P'</span> <span class="free">a</span> <span class="free">d</span><span class="main">;</span> 
     corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">r</span> <span class="free">P</span> <span class="free">P'</span> <span class="free">b</span> <span class="free">c</span> <span class="main">⟧</span> <span class="main">⟹</span>
    corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">r</span>
      <span class="free">P</span>  <span class="free">P'</span>
        <span class="main">(</span>condition <span class="free">G</span> <span class="free">a</span> <span class="free">b</span><span class="main">)</span> <span class="main">(</span>condition <span class="free">G'</span> <span class="free">c</span> <span class="free">d</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> condition_def corres_underlying_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>


<span class="keyword1"><span class="command">lemma</span></span> des_impl_getSwarm_aux1<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"stringEqual <span class="free">str</span> <span class="free">strPtr</span> <span class="main">⟹</span>
       no_fail <span class="main">(</span>sche_val1d <span class="free">schePtr</span><span class="main">)</span>
           <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">ret'</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span>
                <span class="main">(</span>throwError <span class="free">r'</span><span class="main">)</span>
                 <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                     returnOk <span class="main">(</span><span class="free">r'</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span>
                  <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span>  throwError_def returnOk_def sche_val1d_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>      

<span class="keyword1"><span class="command">lemma</span></span> des_impl_getSwarm<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"stringEqual <span class="free">str</span> <span class="free">strPtr</span> <span class="main">⟹</span>
  corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False
   <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">sw</span><span class="main">,</span><span class="bound">r</span><span class="main">)</span> <span class="bound">r'</span><span class="main">.</span> <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> True<span class="main">∧</span><span class="bound">r'</span><span class="main">=</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> False<span class="main">∧</span><span class="bound">r'</span><span class="main">=</span><span class="main">0</span><span class="main">)</span> <span class="main">)</span>
   <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span>sche_val1d <span class="free">schePtr</span><span class="main">)</span> <span class="main">(</span>Des_getSwarm <span class="free">str</span><span class="main">)</span> <span class="main">(</span>Impl_getSwarm <span class="free">schePtr</span> <span class="free">strPtr</span> <span class="free">swiPtr</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_getSwarm_def Impl_getSwarm_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_val1d <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span>  nullSwarmInfo<span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> anSwarm
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">rdes</span><span class="main">,</span><span class="bound">sdes</span><span class="main">)</span> <span class="bound">rimpl</span><span class="main">.</span> int <span class="bound">rdes</span> <span class="main">=</span> <span class="bound">rimpl</span>"</span></span></span> 
                                       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">dr</span> <span class="bound">σ</span><span class="main">.</span> <span class="skolem">anSwarm</span> <span class="main">=</span> nullSwarmInfo"</span></span></span> 
                                       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_val1d <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> catch_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">rdes</span><span class="main">,</span><span class="bound">sdes</span><span class="main">)</span> <span class="bound">rimpl</span><span class="main">.</span> int <span class="bound">rdes</span> <span class="main">=</span> <span class="bound">rimpl</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">rdes</span><span class="main">,</span><span class="bound">sdes</span><span class="main">)</span> <span class="bound">rimpl</span><span class="main">.</span> int <span class="bound">rdes</span> <span class="main">=</span> <span class="bound">rimpl</span><span class="main">)</span>"</span></span></span> 
                                       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">dr</span> <span class="bound">σ</span><span class="main">.</span> <span class="skolem">anSwarm</span> <span class="main">=</span> nullSwarmInfo"</span></span></span> 
                                       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_val1d <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoopE<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="language"><span class="improper">r</span></span></span><span class="main">)</span></span>
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def int64Equal_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def int64Equal_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_val1d <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_val1d <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_val1d <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                 <span class="bound">r</span> <span class="main">=</span>  swarmName_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> y ya swarmNC
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_val1d <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                  <span class="skolem">swarmNC</span> <span class="main">=</span> swarmName_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">a</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
                   <span class="bound">r</span> <span class="main">=</span>   compare' <span class="bound">s</span> <span class="skolem">swarmNC</span> <span class="free">strPtr</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_condition_P<span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def swarmListEqual_def swarmInfoEqual_def
          <span class="keyword1"><span class="command">using</span></span> compare_string <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def swarmListEqual_def swarmInfoEqual_def
          <span class="keyword1"><span class="command">using</span></span> compare_str3 <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span>  swarmList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">a</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">corres</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_val1d <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">corres</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_getSwarm_aux1<span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> sche_val1d_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> whileLoop_terminatesE_def throwError_def returnOk_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span>
         <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span>  sche_val1d <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span> 
           <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span> Inl <span class="bound">a</span> <span class="main">⇒</span> <span class="main">0</span> <span class="main">|</span>
                             Inr <span class="bound">v</span> <span class="main">⇒</span> nat <span class="main">(</span>sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> nat  <span class="bound">v</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.lift_def throwError_def returnOk_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="language"><span class="improper">r</span></span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">r</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">≤</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> sche_val1d <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">r</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def sche_val1d_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">corres</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> case_convert<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">r</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">≤</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> sche_val1d <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">r</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def sche_val1d_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_condition_P_rev<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def int64Equal_def sche_val1d_def  
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>




  <span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹updateActorPluginState_sche verify›</span></span></span>


<span class="keyword1"><span class="command">axiomatization</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> Impl_checkActorPluginFinished_hoare<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⦃</span><span class="free">P1</span><span class="main">⦄</span>Impl_checkActorPluginFinished <span class="free">schePtr</span> <span class="free">acb</span><span class="main">⦃</span> <span class="free">Q1</span> <span class="main">⦄</span>"</span></span></span>
    <span class="keyword2"><span class="keyword">and</span></span> Impl_updateActorPluginStates_hoare<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⦃</span><span class="free">P2</span><span class="main">⦄</span>Impl_updateActorPluginStates <span class="free">bus</span> <span class="free">a</span> <span class="free">sta</span> <span class="main">⦃</span> <span class="free">Q2</span> <span class="main">⦄</span>"</span></span></span>
    <span class="keyword2"><span class="keyword">and</span></span> Impl_updateActorPluginState_hoare<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⦃</span><span class="free">P3</span><span class="main">⦄</span> Impl_updateActorPluginState <span class="free">bus</span> <span class="free">apia</span> <span class="free">anstate</span> <span class="main">⦃</span> <span class="free">Q3</span> <span class="main">⦄</span>"</span></span></span>

<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span> 
  sint_add_one_sub <span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="main">(</span>sint <span class="free">P</span><span class="main">)</span> <span class="main">-</span> nat <span class="main">(</span><span class="free">a</span><span class="main">+</span><span class="main">1</span><span class="main">)</span> <span class="main">&lt;</span> nat <span class="main">(</span>sint <span class="free">P</span><span class="main">)</span> <span class="main">-</span> nat <span class="free">a</span>"</span></span></span>


<span class="keyword1"><span class="command">definition</span></span> sche_valid_updateActorPluginState <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_updateActorPluginState</span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> 
            is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="main">∧</span>
            is_valid_GeneralBusVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
            <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span> is_valid_GeneralBus_C <span class="free"><span class="bound">s</span></span>
          <span class="main">(</span>GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="main">(</span><span class="numeral">2147483646</span><span class="main">::</span>int<span class="main">)</span>
            "</span></span></span>


<span class="keyword1"><span class="command">lemma</span></span> des_impl_updateActorPluginState_sche_aux0 <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">" <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span> actorPluginInfoListEqual <span class="free">apil</span> <span class="free">apivecPtr</span> <span class="bound">s</span> <span class="main">∧</span> 
          <span class="free">busPtr</span> <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="free">r'</span> <span class="main">⦄</span>
       Impl_updateActorPluginStates <span class="free">busPtr</span> <span class="free">apivecPtr</span> <span class="free">anstate</span>
     <span class="main">⦃</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span> <span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> actorPluginInfoListEqual <span class="free">apil</span> <span class="free">apivecPtr</span> <span class="bound">s</span> <span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Impl_updateActorPluginStates_def actorPluginInfoVectorSize'_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">,</span><span class="bound">set</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span> actorPluginInfoListEqual <span class="free">apil</span> <span class="free">apivecPtr</span> <span class="bound">s</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">,</span><span class="bound">set</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">apivecPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def returnOk_def throwError_def   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command">using</span></span> Impl_updateActorPluginState_hoare <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_updateActorPluginState_sche_aux1<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">bl</span> <span class="main">=</span> registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">⦄</span>
       NonDetMonad_call.call <span class="main">(</span>Des_updateActorPluginStates <span class="free">apil</span> <span class="free">staDes</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span> <span class="main">!</span> <span class="free">a</span><span class="main">,</span> snd <span class="bound">σ</span><span class="main">)</span><span class="main">)</span>
        <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span> <span class="bound">b</span><span class="main">.</span> <span class="main">(</span>fst <span class="bound">σ</span><span class="main">⦇</span>registeredBus <span class="main">:=</span> <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span><span class="main">)</span><span class="main">[</span><span class="free">a</span> <span class="main">:=</span> fst <span class="bound">b</span><span class="main">]</span><span class="main">⦈</span><span class="main">,</span> snd <span class="bound">b</span><span class="main">)</span><span class="main">)</span> 
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">x</span> <span class="bound">a</span><span class="main">.</span> <span class="free">bl</span> <span class="main">=</span> registeredBus <span class="main">(</span>fst <span class="bound">a</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span>  NonDetMonad_call.call_def  NonDetMonad.valid_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> cancel_comm_monoid_add_class.diff_cancel gr_implies_not_zero finish_puase_apiList sint_add_one_sub<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_updateActorPluginState_sche_aux2<span class="main">:</span>
 <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">s'</span> <span class="bound">a</span> <span class="bound">b</span> <span class="bound">s</span> <span class="bound">bus___ptr_to_struct_GeneralBus_C'param</span><span class="main">.</span>
       sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s'</span> <span class="main">⟹</span>
       <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s'</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s'</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span>
       <span class="free">busPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s'</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">⟹</span>
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="bound">bus___ptr_to_struct_GeneralBus_C'param</span>  <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">⦄</span>
       Impl_updateActorPluginStates <span class="bound">bus___ptr_to_struct_GeneralBus_C'param</span> <span class="free">apivecPtr</span> <span class="free">anstate</span> 
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">sa</span><span class="main">.</span>
           <span class="bound">a</span> <span class="main">≤</span> <span class="numeral">2147483646</span> <span class="main">⟶</span>
           is_valid_ActorScheduler_C <span class="bound">sa</span> <span class="free">schePtr</span> <span class="main">⟶</span>
           nat <span class="main">(</span>sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">sa</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">sa</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span>
           nat <span class="main">(</span><span class="bound">a</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span>
           <span class="main">&lt;</span> nat <span class="main">(</span>sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span>
             nat <span class="bound">a</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Impl_updateActorPluginStates_def actorPluginInfoVectorSize'_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">,</span><span class="bound">set</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> True "</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">,</span><span class="bound">set</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">apivecPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def returnOk_def throwError_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span> Impl_updateActorPluginState_hoare<span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold sche_valid_updateActorPluginState_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> cancel_comm_monoid_add_class.diff_cancel gr_implies_not_zero sint_add_one_sub<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_updateActorPluginState_sche_aux311<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">" no_fail <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="free">busPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">ret''</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="free">busPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
             <span class="free">len</span> <span class="main">=</span>  sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">apivecPtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">and</span>
            <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">a</span> <span class="main">&lt;</span> <span class="free">ret''</span><span class="main">)</span><span class="main">)</span>
        <span class="main">(</span>whileLoopE <span class="main">(</span><span class="main">λ</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span> <span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">ret</span><span class="main">,</span> <span class="bound">setResult</span><span class="main">)</span> <span class="main">⇒</span> <span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="bound">i</span> <span class="main">∧</span> <span class="bound">i</span> <span class="main">&lt;</span> <span class="free">len</span><span class="main">)</span>
           <span class="main">(</span><span class="main">λ</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span>
                 <span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">ret</span><span class="main">,</span> <span class="bound">setResult</span><span class="main">)</span> <span class="main">⇒</span>
                   <span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">apivecPtr</span><span class="main">)</span><span class="main">;</span>
                      <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorPluginInfo_C <span class="bound">s</span> <span class="main">(</span>ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">apivecPtr</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                      <span class="bound">api</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ActorPluginInfo_C <span class="bound">s</span> <span class="main">(</span>ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">apivecPtr</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                      <span class="keyword1">if</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">16</span> signed <span class="main">→</span> <span class="numeral">32</span> signed<span class="main">)</span> <span class="main">(</span>ActorPluginInfo_C.state_C <span class="bound">api</span><span class="main">)</span> <span class="main">=</span> <span class="free">anstate</span>
                      <span class="keyword1">then</span> <span class="keyword1">do</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="numeral">2147483649</span> <span class="main">+</span> <span class="bound">i</span><span class="main">)</span><span class="main">;</span>
                              guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="bound">i</span> <span class="main">≤</span> <span class="numeral">2147483646</span><span class="main">)</span><span class="main">;</span>
                              <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">apivecPtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                              returnOk <span class="main">(</span><span class="bound">i</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">,</span> <span class="bound">setResult</span><span class="main">)</span>
                           <span class="keyword1">od</span>
                      <span class="keyword1">else</span> <span class="keyword1">do</span> <span class="bound">api</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">apivecPtr</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">i</span><span class="main">)</span><span class="main">;</span>
                              <span class="bound">tmpRes</span> <span class="main">&lt;-</span> Impl_updateActorPluginState <span class="free">bus___ptr_to_struct_GeneralBus_C'param</span> <span class="bound">api</span> <span class="free">anstate</span><span class="main">;</span>
                              guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="numeral">2147483649</span> <span class="main">+</span> <span class="bound">i</span><span class="main">)</span><span class="main">;</span>
                              guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="bound">i</span> <span class="main">≤</span> <span class="numeral">2147483646</span><span class="main">)</span><span class="main">;</span>
                              <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">apivecPtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                              <span class="keyword1">if</span> <span class="main">¬</span> <span class="main">(</span><span class="bound">setResult</span> <span class="main">=</span> <span class="main">1</span> <span class="main">∧</span> <span class="bound">tmpRes</span> <span class="main">=</span> <span class="main">1</span><span class="main">)</span> <span class="keyword1">then</span> throwError <span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">,</span> <span class="main">0</span><span class="main">)</span> <span class="keyword1">else</span> returnOk <span class="main">(</span><span class="bound">i</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">,</span> <span class="bound">setResult</span><span class="main">)</span>
                           <span class="keyword1">od</span>
                   <span class="keyword1">od</span><span class="main">)</span>
          <span class="main">(</span><span class="main">0</span><span class="main">,</span> <span class="free">len</span><span class="main">,</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> noFail_whileLoopE<span class="main">)</span></span> <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>bus_verify_impl.non_fail_super<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_updateActorPluginState_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> cancel_comm_monoid_add_class.diff_cancel  finish_puase_apiList sint_add_one_sub<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>


<span class="keyword1"><span class="command">lemma</span></span> des_impl_updateActorPluginState_sche_aux31<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">" no_fail <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="free">busPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">ret''</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="free">busPtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">and</span>
            <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">a</span> <span class="main">&lt;</span> <span class="free">ret''</span><span class="main">)</span><span class="main">)</span>
  <span class="main">(</span>Impl_updateActorPluginStates <span class="free">bus___ptr_to_struct_GeneralBus_C'param</span> <span class="free">apivecPtr</span> <span class="free">anstate</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Impl_updateActorPluginStates_def actorPluginInfoVectorSize'_def catch_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_updateActorPluginState_sche_aux311<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> busPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">busPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> a<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">a</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>


<span class="keyword1"><span class="command">lemma</span></span> des_impl_updateActorPluginState_sche_aux3<span class="main">:</span>
 <span class="quoted"><span class="quoted"><span class="language">"no_fail
     <span class="main">(</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="free">busPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="free">busPtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">and</span>
      <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">a</span> <span class="main">&lt;</span> <span class="free">ret'</span><span class="main">)</span><span class="main">)</span>
     <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">b</span> <span class="main">≠</span> <span class="main">0</span><span class="main">)</span>
       <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
           <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
           <span class="bound">y</span> <span class="main">&lt;-</span>
           guard
            <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_GeneralBus_C <span class="bound">s</span>
                   <span class="main">(</span>GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
           <span class="bound">bus___ptr_to_struct_GeneralBus_C'param</span> <span class="main">&lt;-</span>
           gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span><span class="main">;</span>
           Impl_updateActorPluginStates <span class="bound">bus___ptr_to_struct_GeneralBus_C'param</span> <span class="free">apivecPtr</span> <span class="free">anstate</span>
        <span class="keyword1">od</span><span class="main">)</span>
       <span class="main">(</span>return <span class="main">0</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_updateActorPluginState_sche_aux31<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> schePtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">schePtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> 
                          busPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">busPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> a<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">a</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ret''<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">ret'</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_updateActorPluginState_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  
<span class="keyword1"><span class="command">lemma</span></span> des_impl_updateActorPluginState_sche_aux4<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
        <span class="free">bus___ptr</span> <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span> <span class="main">⦄</span>
        Impl_updateActorPluginStates <span class="free">bus___ptr</span> <span class="free">apivecPtr</span> <span class="free">anstate</span> 
   <span class="main">⦃</span><span class="main">λ</span><span class="bound">rv</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="numeral">2147483649</span> <span class="main">+</span> <span class="free">a</span> <span class="main">⟶</span> <span class="free">a</span> <span class="main">≤</span> <span class="numeral">2147483646</span> <span class="main">∧</span> <span class="main">(</span><span class="free">a</span> <span class="main">≤</span> <span class="numeral">2147483646</span> <span class="main">⟶</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
 <span class="keyword1"><span class="command">unfolding</span></span> Impl_updateActorPluginStates_def actorPluginInfoVectorSize'_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">,</span><span class="bound">set</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span>  "</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">,</span><span class="bound">set</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">apivecPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def returnOk_def throwError_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span> Impl_updateActorPluginState_hoare<span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold sche_valid_updateActorPluginState_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> cancel_comm_monoid_add_class.diff_cancel gr_implies_not_zero sint_add_one_sub<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_updateActorPluginState_sche_aux5<span class="main">:</span>
     <span class="quoted"><span class="quoted"><span class="language">" <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span> actorPluginInfoListEqual <span class="free">apil</span> <span class="free">apivecPtr</span> <span class="bound">s</span> <span class="main">∧</span>
         <span class="free">bus__ptr</span> <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span> <span class="main">⦄</span>
          Impl_updateActorPluginStates  <span class="free">bus__ptr</span> <span class="free">apivecPtr</span> <span class="free">anstate</span> 
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">x</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="numeral">2147483649</span> <span class="main">+</span> fst <span class="free">r'</span> <span class="main">⟶</span>
               fst <span class="free">r'</span> <span class="main">≤</span> <span class="numeral">2147483646</span> <span class="main">⟶</span>
               is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span> <span class="main">⟶</span>
               sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
               <span class="free">busPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
               actorPluginInfoListEqual <span class="free">apil</span> <span class="free">apivecPtr</span> <span class="bound">s</span> <span class="main">∧</span>
               <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="free">busPtr</span><span class="main">)</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
 <span class="keyword1"><span class="command">unfolding</span></span> Impl_updateActorPluginStates_def actorPluginInfoVectorSize'_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">,</span><span class="bound">set</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span>  "</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">,</span><span class="bound">set</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">apivecPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span><span class="main"><span class="keyword3">+</span></span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> validE_def returnOk_def throwError_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span> Impl_updateActorPluginState_hoare<span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span><span class="main"><span class="keyword3">+</span></span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold sche_valid_updateActorPluginState_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> cancel_comm_monoid_add_class.diff_cancel gr_implies_not_zero sint_add_one_sub<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_updateActorPluginState_sche <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"stateACBEqual <span class="free">staDes</span> <span class="main">(</span>scast <span class="free">anstate</span><span class="main">)</span> <span class="main">⟹</span>
  corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False 
    <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> True<span class="main">∧</span><span class="bound">r'</span><span class="main">=</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> False<span class="main">∧</span><span class="bound">r'</span><span class="main">=</span><span class="main">0</span><span class="main">)</span> <span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> 
    <span class="main">(</span>sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="keyword1">and</span> actorPluginInfoListEqual <span class="free">apil</span> <span class="free">apivecPtr</span><span class="main">)</span> 
   <span class="main">(</span>Des_updateActorPluginState_sche <span class="free">apil</span> <span class="free">staDes</span><span class="main">)</span> <span class="main">(</span>Impl_updateActorPluginState_sche <span class="free">schePtr</span> <span class="free">apivecPtr</span> <span class="free">anstate</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_updateActorPluginState_sche_def  Impl_updateActorPluginState_sche_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> actorPluginInfoListEqual <span class="free">apil</span> <span class="free">apivecPtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span> actorPluginInfoListEqual <span class="free">apil</span> <span class="free">apivecPtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> busPtr
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span> 
                  <span class="main">∧</span> <span class="skolem">busPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>  <span class="main">∧</span> actorPluginInfoListEqual <span class="free">apil</span> <span class="free">apivecPtr</span> <span class="bound">s</span>
                  <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span>  sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="skolem">busPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span>  registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> generalBusVectorSize'_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> generalBusVectorSize'_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret' bl
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">rdes</span><span class="main">,</span><span class="bound">res</span><span class="main">,</span><span class="bound">bldes</span><span class="main">)</span> <span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">ret</span><span class="main">,</span> <span class="bound">y</span><span class="main">::</span>int<span class="main">)</span><span class="main">.</span> <span class="main">(</span>int <span class="bound">rdes</span> <span class="main">=</span> <span class="bound">i</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">(</span><span class="bound">res</span> <span class="main">∧</span> <span class="bound">y</span> <span class="main">=</span> <span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="main">¬</span> <span class="bound">res</span> <span class="main">∧</span> <span class="bound">y</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                                       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">σ</span><span class="main">.</span> True"</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> True <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoop<span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def busListEqual_def
          <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold 
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">res</span> <span class="bound">y</span><span class="main">::</span>int<span class="main">.</span> <span class="main">(</span><span class="main">(</span><span class="bound">res</span> <span class="main">∧</span> <span class="bound">y</span> <span class="main">=</span> <span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="main">¬</span> <span class="bound">res</span> <span class="main">∧</span> <span class="bound">y</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                                       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">σ</span><span class="main">.</span> True"</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> actorPluginInfoListEqual <span class="free">apil</span> <span class="free">apivecPtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r' <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> actorPluginInfoListEqual <span class="free">apil</span> <span class="free">apivecPtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span> <span class="main">()</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span> actorPluginInfoListEqual <span class="free">apil</span> <span class="free">apivecPtr</span> <span class="bound">s</span><span class="main">∧</span>
                     <span class="bound">r</span> <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> busPtr <span class="comment1">(* call Impl_updateActorPluginStates*)</span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_callR_nr<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> srel <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">{</span><span class="main">(</span><span class="bound">ds</span><span class="main">,</span><span class="bound">is</span><span class="main">)</span><span class="main">.</span> busPtrEqual <span class="main">(</span>GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">is</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">is</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span> <span class="bound">is</span> <span class="main">(</span>fst <span class="bound">ds</span><span class="main">)</span><span class="main">}</span><span class="main">)</span>"</span></span></span> 
                                            <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> Gx <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">s</span><span class="main">.</span> fst <span class="bound">s</span> <span class="main">=</span> <span class="skolem">bl</span> <span class="main">!</span> fst <span class="skolem">r</span>"</span></span></span></span> <span class="main"><span class="main">]</span></span><span class="main">)</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
                <span class="keyword1"><span class="command">using</span></span> des_impl_updateActorPluginStates 
                <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def case_prod_unfold <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> int_nat_eq finish_puase_apiList<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def busListEqual_def
               <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> int_nat_eq<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r'
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_updateActorPluginState_sche_aux0<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="language"><span class="skolem">r'</span></span></span></span><span class="main"><span class="main">]</span></span> <span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>   <span class="keyword1"><span class="command">unfolding</span></span> generalBusVectorSize'_def 
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span> <span class="main">()</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                     <span class="bound">r</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>          
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">corres</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> int_nat_eq finish_puase_apiList<span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> generalBusVectorSize'_def 
          <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_updateActorPluginState_sche_aux1<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r'
          <span class="keyword1"><span class="command">unfolding</span></span> generalBusVectorSize'_def 
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_updateActorPluginState_sche_aux5<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> a<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"fst <span class="skolem">r'</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b
          <span class="keyword1"><span class="command">unfolding</span></span> generalBusVectorSize'_def
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_updateActorPluginState_sche_aux3<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> busPtr <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="language"><span class="skolem">busPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ret' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="language"><span class="skolem">ret'</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_updateActorPluginState_sche_aux4<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_updateActorPluginState_def 
          <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span>
                <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span> 
                  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span>  nat <span class="main">(</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> nat <span class="main">(</span>fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> generalBusVectorSize'_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_updateActorPluginState_sche_aux2<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command">using</span></span> sint_add_one_sub <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def modify_def put_def get_def return_def 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> int_nat_eq finish_puase_apiList<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
            


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹checkActorPluginFinished verify›</span></span></span>

<span class="keyword1"><span class="command">axiomatization</span></span> <span class="keyword2"><span class="keyword">where</span></span> 
  acb_C_acb_equal <span class="main">:</span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">∀</span><span class="bound">s</span><span class="main">.</span> acbEqual_1 <span class="free">acb_C</span> <span class="bound">s</span> <span class="free">acb</span><span class="main">)</span>"</span></span></span>


<span class="keyword1"><span class="command">definition</span></span> sche_valid_checkActorPluginFinished<span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_checkActorPluginFinished</span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> 
    <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span> is_valid_w8'ptr <span class="free"><span class="bound">s</span></span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span><span class="numeral">8</span> word ptr<span class="main">)</span>
            <span class="main">&amp;(</span>GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span>
              <span class="bound">a</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''pluginName_C''</span><span class="main">]</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> is_valid_w64 <span class="free"><span class="bound">s</span></span>  <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span><span class="numeral">64</span> word<span class="main">)</span>
            <span class="main">&amp;(</span>GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span>
              <span class="bound">a</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''pluginOwner_C''</span><span class="main">]</span><span class="main">)</span><span class="main">)</span> <span class="main">)</span> <span class="main">∧</span>
      sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">≤</span><span class="numeral">2147483646</span> <span class="main">∧</span> 
      is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="main">∧</span>is_valid_GeneralBusVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
      <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span>  is_valid_GeneralBus_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
       <span class="main">0</span> <span class="main">≤</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">∧</span>
       <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> corres_condition_P_pre<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⟦</span> <span class="main">∀</span><span class="main">(</span><span class="bound">s</span><span class="main">,</span><span class="bound">t</span><span class="main">)</span><span class="main">∈</span><span class="free">sr</span><span class="main">.</span> <span class="free">P</span> <span class="bound">s</span> <span class="main">∧</span> <span class="free">P'</span> <span class="bound">t</span> <span class="main">⟶</span>  <span class="free">G</span> <span class="bound">s</span> <span class="main">=</span> <span class="free">G'</span> <span class="bound">t</span><span class="main">;</span>
      corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">r</span> <span class="main">(</span><span class="free">P</span> <span class="keyword1">and</span> <span class="free">G</span><span class="main">)</span> <span class="main">(</span><span class="free">P'</span> <span class="keyword1">and</span> <span class="free">G'</span><span class="main">)</span> <span class="free">a</span> <span class="free">c</span><span class="main">;</span> 
     corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">r</span> <span class="main">(</span><span class="free">P</span> <span class="keyword1">and</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="main">¬</span> <span class="free">G</span> <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="free">P'</span> <span class="keyword1">and</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="main">¬</span> <span class="free">G'</span> <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="free">b</span> <span class="free">d</span> <span class="main">⟧</span> <span class="main">⟹</span>
    corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">r</span>
      <span class="free">P</span>  <span class="free">P'</span>
        <span class="main">(</span>condition <span class="free">G</span> <span class="free">a</span> <span class="free">b</span><span class="main">)</span> <span class="main">(</span>condition <span class="free">G'</span> <span class="free">c</span> <span class="free">d</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> condition_def corres_underlying_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold 
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>



<span class="keyword1"><span class="command">lemma</span></span> des_impl_checkActorPluginFinished_aux01<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">"     <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span>   sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
              <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>PluginInfoVector_C.length_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="free">ret'a</span> <span class="main">=</span>  sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="free">xc</span> <span class="main">=</span>  GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">x</span> <span class="main">⦄</span> 
      Impl_getActorPluginState <span class="free">xc</span> <span class="main">(</span>PluginInfo_C.name_C <span class="free">tmpi</span><span class="main">)</span> <span class="main">(</span>sint <span class="main">(</span>ACB_C.actorID_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span> 
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">xf</span> <span class="bound">s</span><span class="main">.</span>
           <span class="main">(</span><span class="bound">xf</span> <span class="main">=</span> sint impl_ACTOR_STATE_FINISH <span class="main">⟶</span>
            sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>PluginInfoVector_C.length_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           <span class="main">(</span><span class="bound">xf</span> <span class="main">≠</span> sint impl_ACTOR_STATE_FINISH <span class="main">⟶</span>
            <span class="main">0</span> <span class="main">≤</span> <span class="numeral">2147483649</span> <span class="main">+</span> <span class="free">x</span> <span class="main">⟶</span>
            <span class="free">x</span> <span class="main">≤</span> <span class="numeral">2147483646</span> <span class="main">⟶</span>
            is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span> <span class="main">⟶</span>
            <span class="main">0</span> <span class="main">≤</span> <span class="free">x</span> <span class="main">+</span> <span class="main">1</span> <span class="main">∧</span>
            <span class="free">x</span> <span class="main">+</span> <span class="main">1</span> <span class="main">≤</span> <span class="free">ret'a</span> <span class="main">∧</span>
            sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>PluginInfoVector_C.length_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">ret'a</span> <span class="main">=</span>
            sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Impl_getActorPluginState_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span> <span class="main">≤</span>  sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">xc</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>PluginInfoVector_C.length_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">ret'a</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> "</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span> sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">xc</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def getState'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_checkActorPluginFinished_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList 
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span></span>


<span class="keyword1"><span class="command">lemma</span></span> des_impl_checkActorPluginFinished_aux0<span class="main">:</span>
 <span class="quoted"><span class="quoted"><span class="language">" <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span>   sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
              <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>PluginInfoVector_C.length_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="free">ret'a</span> <span class="main">=</span>  sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⦄</span>
       whileLoopE <span class="main">(</span><span class="main">λ</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span> <span class="main">(</span><span class="bound">j</span><span class="main">,</span> <span class="bound">ret</span><span class="main">)</span> <span class="main">⇒</span> <span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="bound">j</span> <span class="main">∧</span> <span class="bound">j</span> <span class="main">&lt;</span> <span class="free">ret'a</span><span class="main">)</span>
         <span class="main">(</span><span class="main">λ</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span>
               <span class="main">(</span><span class="bound">j</span><span class="main">,</span> <span class="bound">ret</span><span class="main">)</span> <span class="main">⇒</span>
                 <span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span>
                    guard
                     <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_GeneralBus_C <span class="bound">s</span>
                            <span class="main">(</span>GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">j</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">tmpj</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">j</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">ret'</span> <span class="main">&lt;-</span> Impl_getBusName <span class="bound">tmpj</span><span class="main">;</span>
                    <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> compare' <span class="bound">s</span> <span class="bound">ret'</span> <span class="main">(</span>busName_C <span class="free">tmpi</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="bound">ret'</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span>
                      <span class="main">(</span><span class="keyword1">do</span> <span class="bound">ret'</span> <span class="main">&lt;-</span> Impl_getActorPluginState <span class="bound">tmpj</span> <span class="main">(</span>PluginInfo_C.name_C <span class="free">tmpi</span><span class="main">)</span> <span class="main">(</span>sint <span class="main">(</span>ACB_C.actorID_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="bound">ret'</span> <span class="main">=</span> sint impl_ACTOR_STATE_FINISH<span class="main">)</span>
                            <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span>
                            <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="numeral">2147483649</span> <span class="main">+</span> <span class="bound">j</span><span class="main">)</span><span class="main">;</span>
                                <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="bound">j</span> <span class="main">≤</span> <span class="numeral">2147483646</span><span class="main">)</span><span class="main">;</span>
                                <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                                <span class="bound">v___ptr_to_struct_GeneralBusVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                                <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_GeneralBusVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                                returnOk <span class="main">(</span><span class="bound">j</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">)</span>
                             <span class="keyword1">od</span><span class="main">)</span>
                       <span class="keyword1">od</span><span class="main">)</span>
                      <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="numeral">2147483649</span> <span class="main">+</span> <span class="bound">j</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="bound">j</span> <span class="main">≤</span> <span class="numeral">2147483646</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">v___ptr_to_struct_GeneralBusVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_GeneralBusVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          returnOk <span class="main">(</span><span class="bound">j</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">)</span>
                       <span class="keyword1">od</span><span class="main">)</span>
                 <span class="keyword1">od</span><span class="main">)</span>
        <span class="main">(</span><span class="main">0</span><span class="main">,</span> <span class="free">ret'a</span><span class="main">)</span> 
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="main">(</span>fst <span class="bound">j</span> <span class="main">=</span> <span class="main">-</span> <span class="main">1</span> <span class="main">⟶</span>
                sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>PluginInfoVector_C.length_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
               <span class="main">(</span>fst <span class="bound">j</span> <span class="main">≠</span> <span class="main">-</span> <span class="main">1</span> <span class="main">⟶</span>
                <span class="main">0</span> <span class="main">≤</span> <span class="numeral">2147483649</span> <span class="main">+</span> <span class="free">i</span> <span class="main">⟶</span>
                <span class="free">i</span> <span class="main">≤</span> <span class="numeral">2147483646</span> <span class="main">⟶</span>
                sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>PluginInfoVector_C.length_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">⦄,</span>
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">x</span> <span class="bound">a</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">a</span> <span class="main">∧</span>
               <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>PluginInfoVector_C.length_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">a</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span> <span class="main">≤</span> <span class="free">ret'a</span> <span class="main">∧</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                         <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>PluginInfoVector_C.length_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
                      <span class="free">ret'a</span> <span class="main">=</span>  sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span><span class="free">ret'a</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def Impl_getBusName_def
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_checkActorPluginFinished_aux01<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_checkActorPluginFinished_def
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>


<span class="keyword1"><span class="command">lemma</span></span> des_impl_checkActorPluginFinished_aux2<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">"    <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">bj</span> <span class="main">=</span> registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> nat <span class="main">(</span>int <span class="free">a</span><span class="main">)</span> <span class="main">∧</span>
         <span class="main">0</span> <span class="main">≤</span> fst <span class="free">r'</span> <span class="main">∧</span> nat <span class="main">(</span>fst <span class="free">r'</span><span class="main">)</span> <span class="main">&lt;</span> length <span class="main">(</span>plugins <span class="main">(</span>ACB.taskInfo <span class="free">acb</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span> nat <span class="main">(</span>int <span class="free">a</span><span class="main">)</span> <span class="main">&lt;</span> length <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span><span class="main">⦄</span>
    NonDetMonad_call.call <span class="main">(</span>Des_getActorPluginState <span class="main">(</span>PluginInfo.name <span class="main">(</span>plugins <span class="main">(</span>ACB.taskInfo <span class="free">acb</span><span class="main">)</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB.actorID <span class="free">acb</span><span class="main">)</span><span class="main">)</span>
     <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span> <span class="main">!</span> <span class="free">a</span><span class="main">,</span> snd <span class="bound">σ</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span> <span class="bound">b</span><span class="main">.</span> <span class="bound">σ</span><span class="main">)</span> 
    <span class="main">⦃</span><span class="main">λ</span><span class="bound">dr</span> <span class="bound">s</span><span class="main">.</span>
        <span class="free">bj</span> <span class="main">=</span> registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> nat <span class="main">(</span>int <span class="free">a</span><span class="main">)</span> <span class="main">∧</span>
        <span class="main">0</span> <span class="main">≤</span> fst <span class="free">r'</span> <span class="main">∧</span> nat <span class="main">(</span>fst <span class="free">r'</span><span class="main">)</span> <span class="main">&lt;</span> length <span class="main">(</span>plugins <span class="main">(</span>ACB.taskInfo <span class="free">acb</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span> nat <span class="main">(</span>int <span class="free">a</span><span class="main">)</span> <span class="main">&lt;</span> length <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad_call.call_def NonDetMonad.valid_def
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_checkActorPluginFinished_aux3<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">"<span class="main">⦃</span><span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">tmpj</span> <span class="main">=</span>
          GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="free">a</span> <span class="main">∧</span>
          sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
          <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span>
          int <span class="free">a</span> <span class="main">&lt;</span> <span class="free">ret'</span> <span class="main">∧</span>
          <span class="free">tmpi</span> <span class="main">=</span>
          heap_PluginInfo_C <span class="bound">s</span>
           <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="free">r'</span><span class="main">)</span> <span class="main">∧</span>
          <span class="free">ret'a</span> <span class="main">=</span> GeneralBus_C.name_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">tmpj</span><span class="main">)</span> <span class="main">∧</span> <span class="free">ret'b</span> <span class="main">=</span> compare' <span class="bound">s</span> <span class="free">ret'a</span> <span class="main">(</span>busName_C <span class="free">tmpi</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">and</span>
     <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">ret'b</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span><span class="main">⦄</span>
    Impl_getActorPluginState <span class="free">tmpj</span> <span class="main">(</span>PluginInfo_C.name_C <span class="free">tmpi</span><span class="main">)</span> <span class="main">(</span>sint <span class="main">(</span>ACB_C.actorID_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span> 
    <span class="main">⦃</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span> int <span class="free">a</span> <span class="main">&lt;</span> <span class="free">ret'</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Impl_getActorPluginState_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span> <span class="main">≤</span> sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">tmpj</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span> <span class="free">a</span> <span class="main">&lt;</span> <span class="free">ret'</span> "</span></span></span> 
         <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">tmpj</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def getState'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span><span class="main"><span class="keyword3">+</span></span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_checkActorPluginFinished_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_checkActorPluginFinished_aux4<span class="main">:</span>
    <span class="quoted"><span class="quoted"><span class="language">" <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="free">tmpi</span> <span class="main">=</span> heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="free">r'</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">tmpj</span> <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span> <span class="main">∧</span>          
            <span class="free">busVecPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="free">busVecPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">⦄</span> 
          Impl_getActorPluginState <span class="free">tmpj</span> <span class="main">(</span>PluginInfo_C.name_C <span class="free">tmpi</span><span class="main">)</span> <span class="main">(</span>sint <span class="main">(</span>ACB_C.actorID_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span> 
         <span class="main">⦃</span><span class="main">λ</span><span class="bound">ret'b</span> <span class="bound">s</span><span class="main">.</span>
           <span class="main">(</span><span class="bound">ret'b</span> <span class="main">=</span> sint impl_ACTOR_STATE_FINISH <span class="main">⟶</span>
            sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="free">tmpi</span> <span class="main">=</span> heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="free">r'</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">busVecPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="free">busVecPtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           <span class="main">(</span><span class="bound">ret'b</span> <span class="main">≠</span> sint impl_ACTOR_STATE_FINISH <span class="main">⟶</span>
            <span class="main">0</span> <span class="main">≤</span> <span class="numeral">2147483649</span> <span class="main">+</span> <span class="free">a</span> <span class="main">⟶</span>
            <span class="free">a</span> <span class="main">≤</span> <span class="numeral">2147483646</span> <span class="main">⟶</span>
            is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span> <span class="main">⟶</span>
            sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="free">tmpi</span> <span class="main">=</span> heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="free">r'</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">busVecPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="free">busVecPtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span>  Impl_getActorPluginState_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span>  <span class="bound">j</span> <span class="main">≤</span> sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">tmpj</span><span class="main">)</span><span class="main">)</span><span class="main">∧</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="free">tmpi</span> <span class="main">=</span> heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="free">r'</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">busVecPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="free">busVecPtr</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
         <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">tmpj</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def getState'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_checkActorPluginFinished_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  

<span class="keyword1"><span class="command">lemma</span></span> des_impl_checkActorPluginFinished_aux51<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"no_fail  <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span> <span class="free">a</span> <span class="main">&lt;</span> <span class="free">ret'</span> <span class="main">∧</span>
             <span class="free">tmpi</span> <span class="main">=</span> heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="free">r'</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">tmpj</span> <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span> <span class="main">∧</span>          
  <span class="free">busVecPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="free">busVecPtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
    <span class="main">(</span>Impl_getActorPluginState <span class="free">tmpj</span> <span class="main">(</span>PluginInfo_C.name_C <span class="free">tmpi</span><span class="main">)</span> <span class="main">(</span>sint <span class="main">(</span>ACB_C.actorID_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Impl_getActorPluginState_def catch_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> noFail_whileLoopE<span class="main">)</span></span> <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> non_fail_super<span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_checkActorPluginFinished_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_checkActorPluginFinished_aux52<span class="main">:</span>
    <span class="quoted"><span class="quoted"><span class="language">"no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span> <span class="free">a</span> <span class="main">&lt;</span> <span class="free">ret'</span> <span class="main">∧</span>
             <span class="free">tmpi</span> <span class="main">=</span> heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="free">r'</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">tmpj</span> <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span> <span class="main">∧</span>           
             <span class="free">busVecPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="free">busVecPtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
        <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">ret'</span> <span class="main">=</span> sint impl_ACTOR_STATE_FINISH<span class="main">)</span>
               <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span>
                <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="numeral">2147483649</span> <span class="main">+</span> <span class="free">a</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">a</span> <span class="main">≤</span> <span class="numeral">2147483646</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">v___ptr_to_struct_GeneralBusVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_GeneralBusVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    returnOk <span class="main">(</span><span class="free">a</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">)</span>
                 <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_checkActorPluginFinished_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  

<span class="keyword1"><span class="command">lemma</span></span> des_impl_checkActorPluginFinished_aux53<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">"<span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span>  sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span> <span class="free">a</span> <span class="main">&lt;</span> <span class="free">ret'</span> <span class="main">∧</span>
        <span class="free">tmpi</span> <span class="main">=</span> heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="free">r'</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">tmpj</span> <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span> <span class="main">∧</span>        
        <span class="free">busVecPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="free">busVecPtr</span><span class="main">)</span><span class="main">)</span><span class="main">⦄</span> 
      Impl_getActorPluginState <span class="free">tmpj</span> <span class="main">(</span>PluginInfo_C.name_C <span class="free">tmpi</span><span class="main">)</span> <span class="main">(</span>sint <span class="main">(</span>ACB_C.actorID_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span> 
 <span class="main">⦃</span><span class="main">λ</span><span class="bound">ret'</span> <span class="bound">s</span><span class="main">.</span>
        sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
        <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span>
        <span class="free">a</span> <span class="main">&lt;</span> <span class="bound">ret'</span> <span class="main">∧</span>
        <span class="free">tmpi</span> <span class="main">=</span> heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="free">r'</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">tmpj</span> <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span> <span class="main">∧</span>        
        <span class="free">busVecPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">ret'</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="free">busVecPtr</span><span class="main">)</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
 <span class="keyword1"><span class="command">unfolding</span></span> Impl_getActorPluginState_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span> <span class="main">≤</span>  sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">tmpj</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="free">tmpi</span> <span class="main">=</span> heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="free">r'</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">tmpj</span> <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span> <span class="main">∧</span>  <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span>      
        <span class="free">busVecPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="free">busVecPtr</span><span class="main">)</span><span class="main">)</span> "</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span> sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">tmpj</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def getState'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 3 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_checkActorPluginFinished_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList 
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_checkActorPluginFinished_aux5<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">" no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span> <span class="free">a</span> <span class="main">&lt;</span> <span class="free">ret'</span> <span class="main">∧</span>
             <span class="free">tmpi</span> <span class="main">=</span> heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="free">r'</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">tmpj</span> <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span> <span class="main">∧</span>
            <span class="free">busVecPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="free">busVecPtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
   <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">ret'a</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">ret'</span> <span class="main">&lt;-</span> Impl_getActorPluginState <span class="free">tmpj</span> <span class="main">(</span>PluginInfo_C.name_C <span class="free">tmpi</span><span class="main">)</span> <span class="main">(</span>sint <span class="main">(</span>ACB_C.actorID_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="bound">ret'</span> <span class="main">=</span> sint impl_ACTOR_STATE_FINISH<span class="main">)</span>
                <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span>
                <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="numeral">2147483649</span> <span class="main">+</span> <span class="free">a</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">a</span> <span class="main">≤</span> <span class="numeral">2147483646</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">v___ptr_to_struct_GeneralBusVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_GeneralBusVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    returnOk <span class="main">(</span><span class="free">a</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">)</span>
                 <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="numeral">2147483649</span> <span class="main">+</span> <span class="free">a</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">a</span> <span class="main">≤</span> <span class="numeral">2147483646</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">v___ptr_to_struct_GeneralBusVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_GeneralBusVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              returnOk <span class="main">(</span><span class="free">a</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_checkActorPluginFinished_aux51<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> tmpi<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">tmpi</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> busVecPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">busVecPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> acb_C<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">acb_C</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r'<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">r'</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ret'<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">ret'</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> schePtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">schePtr</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_checkActorPluginFinished_aux52<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> tmpi<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">tmpi</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> busVecPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">busVecPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> acb_C<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">acb_C</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r'<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">r'</span></span></span></span> <span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_checkActorPluginFinished_aux53<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> tmpi<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">tmpi</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> busVecPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">busVecPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> acb_C<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">acb_C</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r'<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">r'</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ret'<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">ret'</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> schePtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">schePtr</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_checkActorPluginFinished_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>





<span class="keyword1"><span class="command">lemma</span></span> des_impl_checkActorPluginFinished <span class="main">:</span>
 <span class="quoted"><span class="quoted"><span class="language">"  corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False 
    <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> True<span class="main">∧</span><span class="bound">r'</span><span class="main">=</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> False<span class="main">∧</span><span class="bound">r'</span><span class="main">=</span><span class="main">0</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> acbEqual <span class="free">acb_C</span> <span class="bound">s</span> <span class="free">acb</span><span class="main">)</span> 
   <span class="main">(</span>Des_checkActorPluginFinished <span class="free">acb</span><span class="main">)</span> <span class="main">(</span>Impl_checkActorPluginFinished <span class="free">schePtr</span> <span class="free">acb_C</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_checkActorPluginFinished_def Impl_checkActorPluginFinished_def pluginInfoVectorSize'_def generalBusVectorSize'_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                     <span class="bound">r</span> <span class="main">=</span> sint <span class="main">(</span>PluginInfoVector_C.length_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret'
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">res</span> <span class="bound">y</span><span class="main">.</span> <span class="main">(</span>fst <span class="bound">y</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span> <span class="main">∧</span> int <span class="bound">res</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> 
                                                            <span class="main">(</span>fst <span class="bound">y</span> <span class="main">=</span> int <span class="bound">res</span><span class="main">)</span>   <span class="main">)</span>"</span></span></span> 
            <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">σ</span><span class="main">.</span> True"</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> True <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> catch_def 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_condition_P<span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> int_nat_eq finish_puase_apiList<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">rdes</span> <span class="bound">rimpl</span><span class="main">.</span> <span class="main">(</span> <span class="bound">rimpl</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">=</span>int  <span class="bound">rdes</span><span class="main">)</span> <span class="main">⊕</span>
                                <span class="main">(</span><span class="main">λ</span><span class="bound">rdes</span> <span class="bound">rimpl</span><span class="main">.</span>  int <span class="bound">rdes</span> <span class="main">=</span> fst <span class="bound">rimpl</span> <span class="main">)</span>"</span></span></span> 
                                       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">dr</span> <span class="bound">σ</span><span class="main">.</span> True"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> True<span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> x xa
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="language"><span class="skolem">x</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoopE<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r' s s' <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="language"><span class="skolem">r</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> acb_C_acb_equal<span class="main">)</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> acbEqual_1_def taskInfoEqual_1_def pluginInfoListEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> nat_int zless_nat_conj<span class="main">)</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> int_nat_eq finish_puase_apiList<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r'  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold    
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">fold</span> catch_def<span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>   <span class="bound">r</span> <span class="main">=</span> <span class="main">()</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
        <span class="bound">r</span> <span class="main">=</span> heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> y ya tmpi
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">tmpi</span> <span class="main">=</span>
           heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span> <span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">tmpi</span> <span class="main">=</span>
           heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span> <span class="main">)</span> <span class="main">∧</span>
                                     <span class="bound">r</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> y busVecPtr
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">tmpi</span> <span class="main">=</span>
           heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span> <span class="main">)</span> <span class="main">∧</span>
                                     <span class="skolem">busVecPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> 
                <span class="bound">r</span><span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="skolem">busVecPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">res</span> <span class="bound">y</span><span class="main">.</span> <span class="main">(</span>fst <span class="bound">y</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span> <span class="main">∧</span> int <span class="bound">res</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> 
                                                            <span class="main">(</span>fst <span class="bound">y</span> <span class="main">=</span> int <span class="bound">res</span> <span class="main">∧</span> int  <span class="bound">res</span><span class="main">≠</span><span class="main">-</span><span class="main">1</span><span class="main">)</span>   <span class="main">)</span>"</span></span></span> 
            <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">σ</span><span class="main">.</span> True"</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> True <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret'
           <span class="keyword1"><span class="command">unfolding</span></span> catch_def
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">rdes</span> <span class="bound">rimpl</span><span class="main">.</span> <span class="main">(</span> <span class="bound">rimpl</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">=</span> int <span class="bound">rdes</span><span class="main">)</span> <span class="main">⊕</span>
                                <span class="main">(</span><span class="main">λ</span><span class="bound">rdes</span> <span class="bound">rimpl</span><span class="main">.</span>  int <span class="bound">rdes</span> <span class="main">=</span> fst <span class="bound">rimpl</span> <span class="main">∧</span>int  <span class="bound">rdes</span> <span class="main">≠</span> <span class="main">-</span><span class="main">1</span> <span class="main">)</span>"</span></span></span> 
                                       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">dr</span> <span class="bound">σ</span><span class="main">.</span> True"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> True<span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoopE<span class="main">)</span></span> 
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="language"><span class="improper">ra</span></span></span><span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def busListEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>  
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def busListEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>  
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a 
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span>  sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  <span class="bound">r</span> <span class="main">=</span> <span class="main">()</span> <span class="main">∧</span>  <span class="main">0</span> <span class="main">≤</span> <span class="skolem">a</span> <span class="main">∧</span> <span class="skolem">a</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span>
            <span class="skolem">tmpi</span> <span class="main">=</span> heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span> <span class="main">∧</span>
            <span class="skolem">busVecPtr</span> <span class="main">=</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="skolem">busVecPtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>  "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="main"><span class="bound">_</span></span><span class="main">.</span> True<span class="main">)</span>"</span></span></span> 
                                       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">dr</span> <span class="bound">s</span><span class="main">.</span><span class="main">(</span><span class="bound">dr</span> <span class="main">=</span> registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> nat <span class="skolem">a</span><span class="main">)</span> <span class="main">∧</span>  <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span> nat <span class="main">(</span>fst <span class="skolem">r'</span><span class="main">)</span> <span class="main">&lt;</span> length <span class="main">(</span>plugins <span class="main">(</span>ACB.taskInfo <span class="free">acb</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>  <span class="main">0</span> <span class="main">≤</span> <span class="skolem">a</span> <span class="main">∧</span> nat <span class="skolem">a</span> <span class="main">&lt;</span> length <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                                       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">a</span>  <span class="main">∧</span> 
                                                  sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  <span class="main">0</span> <span class="main">≤</span> <span class="skolem">a</span> <span class="main">∧</span> <span class="skolem">a</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span>
                                                  <span class="skolem">tmpi</span> <span class="main">=</span> heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> bj tmpj
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span>  <span class="skolem">tmpj</span> <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">a</span> <span class="main">∧</span>
                                  sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">a</span> <span class="main">∧</span> <span class="skolem">a</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span>
                  <span class="skolem">tmpi</span> <span class="main">=</span> heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span> <span class="main">∧</span>
                 <span class="bound">r</span> <span class="main">=</span> GeneralBus_C.name_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="skolem">tmpj</span><span class="main">)</span><span class="main">)</span>  "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret'a
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span>  <span class="skolem">tmpj</span> <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">a</span> <span class="main">∧</span>
                                  sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">a</span> <span class="main">∧</span> <span class="skolem">a</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span>
                  <span class="skolem">tmpi</span> <span class="main">=</span> heap_PluginInfo_C <span class="bound">s</span> <span class="main">(</span>PluginInfoVector_C.data_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span> <span class="main">∧</span>
                 <span class="skolem">ret'a</span> <span class="main">=</span> GeneralBus_C.name_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="skolem">tmpj</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span> compare' <span class="bound">s</span> <span class="skolem">ret'a</span> <span class="main">(</span>busName_C <span class="skolem">tmpi</span><span class="main">)</span><span class="main">)</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre<span class="main">)</span></span>
                   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> getBusName_def
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> acb_C_acb_equal<span class="main">)</span></span>
                          <span class="keyword1"><span class="command">unfolding</span></span> acbEqual_1_def taskInfoEqual_1_def pluginInfoListEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                           <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span></span>
                   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret'b
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">rd</span> <span class="bound">rl</span><span class="main">.</span> statePluginEqual <span class="bound">rd</span> <span class="bound">rl</span><span class="main">)</span>"</span></span></span> 
                             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">dr</span> <span class="bound">s</span><span class="main">.</span><span class="main">(</span><span class="skolem">bj</span> <span class="main">=</span> registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> nat <span class="skolem">a</span><span class="main">)</span> <span class="main">∧</span>  <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span> nat <span class="main">(</span>fst <span class="skolem">r'</span><span class="main">)</span> <span class="main">&lt;</span> length <span class="main">(</span>plugins <span class="main">(</span>ACB.taskInfo <span class="free">acb</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>  <span class="main">0</span> <span class="main">≤</span> <span class="skolem">a</span> <span class="main">∧</span> nat <span class="skolem">a</span> <span class="main">&lt;</span> length <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span>  sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>   <span class="main">0</span> <span class="main">≤</span> <span class="skolem">a</span> <span class="main">∧</span>  <span class="skolem">a</span> <span class="main">&lt;</span> <span class="skolem">ret'</span><span class="main">)</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="comment1">(*call Impl_getActorPluginState*)</span>
                       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_callR_nr<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> srel <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">{</span><span class="main">(</span><span class="bound">ds</span><span class="main">,</span><span class="bound">is</span><span class="main">)</span><span class="main">.</span> busPtrEqual <span class="main">(</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">is</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">is</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">a</span><span class="main">)</span> <span class="bound">is</span> <span class="main">(</span>fst <span class="bound">ds</span><span class="main">)</span><span class="main">}</span><span class="main">)</span>"</span></span></span> 
                                            <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> Gx <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">s</span><span class="main">.</span> fst  <span class="bound">s</span> <span class="main">=</span>  <span class="skolem">bj</span> "</span></span></span></span> <span class="main"><span class="main">]</span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
                       <span class="keyword1"><span class="command">using</span></span> des_impl_getActorPluginState <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def case_prod_unfold <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> int_nat_eq finish_puase_apiList<span class="main">)</span></span>
                        <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def busListEqual_def      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_checkActorPluginFinished_aux2<span class="main">)</span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_checkActorPluginFinished_aux3<span class="main">)</span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre<span class="main">)</span></span>
                       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> statePluginEqual_def impl_ACTOR_STATE_FINISH_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> statePluginEqual_def impl_ACTOR_STATE_FINISH_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> int_nat_eq finish_puase_apiList<span class="main">)</span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">corres</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">corres</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                   <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                 <span class="keyword1"><span class="command">unfolding</span></span> Impl_getBusName_def    <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a  
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def Impl_getBusName_def
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
               <span class="keyword1"><span class="command">by</span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_checkActorPluginFinished_aux4<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a
               <span class="keyword1"><span class="command">unfolding</span></span> Impl_getBusName_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_checkActorPluginFinished_aux5<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> schePtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">schePtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> tmpi<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">tmpi</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> busVecPtr<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="language"><span class="skolem">busVecPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ret'<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">ret'</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r'<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">r'</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_checkActorPluginFinished_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command">unfolding</span></span> whileLoop_terminatesE_def throwError_def returnOk_def
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span>
                    <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span>  "</span></span></span> 
                  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span> Inl <span class="bound">a</span> <span class="main">⇒</span> <span class="main">0</span> <span class="main">|</span>
                             Inr <span class="bound">v</span> <span class="main">⇒</span> nat <span class="main">(</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span>  <span class="main">(</span>fst <span class="bound">v</span><span class="main">)</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.lift_def getName'_def resume'_def setState'_def getActorID'_def Impl_getBusName_def throwError_def returnOk_def 
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> Impl_getActorPluginState_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span> <span class="main">≤</span>  sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">tmpj</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="free">tmpj</span> <span class="main">=</span> GeneralBusVector_C.data_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span> <span class="main">∧</span>  <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> "</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span> sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">tmpj</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
                       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def getState'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_checkActorPluginFinished_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="language"><span class="improper">x</span></span></span><span class="main">)</span></span> 
           <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_condition_P_rev<span class="main">)</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> True <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">corres</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
       <span class="keyword1"><span class="command">unfolding</span></span> validE_def 
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">fold</span> catch_def<span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  
      <span class="keyword1"><span class="command">by</span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_checkActorPluginFinished_aux0<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> Impl_getBusName_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> non_fail_super<span class="main">)</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> whileLoop_terminatesE_def throwError_def returnOk_def
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span>
                <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>  sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span>  "</span></span></span> 
                  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span> Inl <span class="bound">a</span> <span class="main">⇒</span> <span class="main">0</span> <span class="main">|</span>
                             Inr <span class="bound">v</span> <span class="main">⇒</span> nat <span class="main">(</span> sint <span class="main">(</span>PluginInfoVector_C.length_C
                                       <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">acb_C</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> nat <span class="main">(</span>fst <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">fold</span> catch_def<span class="main">)</span></span>
 <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.lift_def getName'_def resume'_def setState'_def getActorID'_def Impl_getBusName_def throwError_def returnOk_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">insert</span> finish_puase_apiList<span class="main"><span class="keyword3">,</span></span><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span></span> 
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span> <span class="main">≤</span> sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                        <span class="main">∧</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span>  "</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def getState'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command">unfolding</span></span> Impl_getActorPluginState_def getState'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span> <span class="main">≤</span> sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">xc</span><span class="main">)</span><span class="main">)</span>
                        <span class="main">∧</span> sche_valid_checkActorPluginFinished <span class="free">schePtr</span> <span class="bound">s</span>  "</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">xc</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
                         <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_checkActorPluginFinished_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹getActorNameByID verify›</span></span></span>

<span class="keyword1"><span class="command">definition</span></span> sche_valid_getActorNameByID <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_getActorNameByID</span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="main">∧</span>
              is_valid_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="main">0</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="main">(</span><span class="main">∀</span><span class="bound">i</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span> <span class="main">&lt;</span> sint<span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> is_valid_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span>"</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_getActorNameByID_aux<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">tmpi</span><span class="main">.</span> no_fail 
          <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_getActorNameByID <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                  <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                 <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="free">r'</span> <span class="main">∧</span> fst <span class="free">r'</span> <span class="main">&lt;</span> <span class="free">ret'</span><span class="main">)</span>
          <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACB_C.actorID_C <span class="bound">tmpi</span><span class="main">)</span> <span class="main">=</span> <span class="free">anActorID</span><span class="main">)</span>
                                  <span class="main">(</span>return <span class="main">(</span>Inl <span class="main">(</span>fst <span class="free">r'</span><span class="main">,</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                                  <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="free">r'</span><span class="main">)</span><span class="main">;</span>
                                      <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> fst <span class="free">r'</span> <span class="main">&lt;</span> <span class="free">ret'</span><span class="main">)</span><span class="main">;</span>
                                      <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                                      return <span class="main">(</span>Inr <span class="main">(</span>fst <span class="free">r'</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="main">0</span><span class="main">)</span><span class="main">)</span>
                                   <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_getActorNameByID_def
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_getActorNameByID <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="free">anActorId1</span> <span class="main">=</span> <span class="free">anActorId2</span> <span class="main">⟹</span>
  corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> <span class="main">(</span>snd <span class="bound">r</span> <span class="main">=</span> True <span class="main">∧</span> <span class="bound">r'</span><span class="main">=</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span>snd <span class="bound">r</span> <span class="main">=</span> False <span class="main">∧</span> <span class="bound">r'</span><span class="main">=</span><span class="main">0</span><span class="main">)</span><span class="main">)</span>
   <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_getActorNameByID <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> <span class="main">(</span>Des_getActorNameByID <span class="free">anActorId1</span><span class="main">)</span> <span class="main">(</span>Impl_getActorNameByID <span class="free">schePtr</span> <span class="free">anActorId2</span> <span class="free">anActorName</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_getActorNameByID_def Impl_getActorNameByID_def ACBVectorSize'_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_getActorNameByID <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_getActorNameByID <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="bound">ret</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_getActorNameByID <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="bound">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="main"><span class="bound">_</span></span><span class="main">.</span> True"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_getActorNameByID <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span> 
        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">rDes</span> <span class="bound">rImpl</span><span class="main">.</span> <span class="main">(</span>snd <span class="bound">rImpl</span> <span class="main">=</span> <span class="main">1</span> <span class="main">∧</span> fst <span class="bound">rDes</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span>snd <span class="bound">rImpl</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> fst <span class="bound">rDes</span> <span class="main">=</span> fst <span class="bound">rImpl</span> <span class="main">∧</span> fst <span class="bound">rImpl</span> <span class="main">&gt;</span> <span class="main">-</span><span class="main">1</span><span class="main">)</span>"</span></span></span></span> <span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret'
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="main">(</span>fst <span class="bound">i</span><span class="main">)</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="main">(</span>fst <span class="bound">i</span><span class="main">)</span><span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> 
                      <span class="main">∧</span> sche_valid_getActorNameByID <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="main">(</span>fst <span class="bound">t</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_getActorNameByID_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> case_prod_unfold<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
   <span class="keyword1"><span class="command">unfolding</span></span> catch_def
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">e</span> <span class="bound">e'</span><span class="main">.</span> snd <span class="bound">e'</span><span class="main">=</span> <span class="main">1</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">λ</span><span class="bound">b</span> <span class="bound">b'</span><span class="main">.</span> fst <span class="bound">b</span> <span class="main">&gt;</span> <span class="main">-</span><span class="main">1</span> <span class="main">∧</span> snd <span class="bound">b'</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> fst <span class="bound">b</span> <span class="main">=</span> fst <span class="bound">b'</span><span class="main">)</span> "</span></span></span> 
                                       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="main"><span class="bound">_</span></span><span class="main">.</span> True<span class="main">)</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_getActorNameByID <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
           <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="main">(</span>fst <span class="bound">i</span><span class="main">)</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="main">(</span>fst <span class="bound">i</span><span class="main">)</span><span class="main">≤</span> <span class="free">ret'</span>
                      <span class="main">∧</span> sche_valid_getActorNameByID <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="main">(</span>fst <span class="bound">t</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_getActorNameByID_def<span class="main">)</span></span> 
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="improper">x</span>"</span></span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoopE<span class="main">)</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret' r r' s s'
     <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r</span>"</span></span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret r r'
     <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_getActorNameByID <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                  <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                 <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span> fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_getActorNameByID <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                  <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                 <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span> fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_getActorNameByID <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                  <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                 <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span> fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_getActorNameByID <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                  <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                 <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span> fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> fst <span class="skolem">r'</span> <span class="main">&lt;</span> int <span class="main">(</span>length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> nat <span class="main">(</span>fst <span class="skolem">r'</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def int64Equal_def<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def int64Equal_def<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_noop<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
     <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_getActorNameByID_def<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_getActorNameByID_def<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_getActorNameByID_def<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_getActorNameByID_aux<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
   <span class="keyword1"><span class="command">unfolding</span></span> whileLoop_terminatesE_def throwError_def returnOk_def
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoop_terminates_inv
           <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> 
                      sche_valid_getActorNameByID <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span> Inl <span class="bound">a</span> <span class="main">⇒</span> <span class="main">0</span> <span class="main">|</span>
                             Inr <span class="bound">t</span> <span class="main">⇒</span> nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="main">(</span>fst <span class="bound">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.lift_def getName'_def resume'_def setState'_def getActorID'_def  bus_valid_def
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹ActorApi Lemma Aux›</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update1_aux<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" ACB_C.actorID_C <span class="main">(</span>prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">acb</span><span class="main">)</span> <span class="main">=</span> ACB_C.actorID_C <span class="free">acb</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">acb</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update1<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span>  ACB.actorID <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.actorID <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update2_aux<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" ACB_C.name_C <span class="main">(</span>prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">acb</span><span class="main">)</span> <span class="main">=</span> ACB_C.name_C <span class="free">acb</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">acb</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update2<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span>  ACB.name <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.name <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update3_aux<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" ACB_C.taskID_C <span class="main">(</span>prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">acb</span><span class="main">)</span> <span class="main">=</span> ACB_C.taskID_C <span class="free">acb</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">acb</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update3<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span>  ACB.taskID <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.taskID <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update4_aux<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" ACB_C.taskName_C <span class="main">(</span>prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">acb</span><span class="main">)</span> <span class="main">=</span> ACB_C.taskName_C  <span class="free">acb</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">acb</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update4<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span>  ACB.taskName <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.taskName <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update5_aux<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" ACB_C.taskInfo_C <span class="main">(</span>prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">acb</span><span class="main">)</span> <span class="main">=</span> ACB_C.taskInfo_C <span class="free">acb</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">acb</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update5<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span>  ACB.taskInfo <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.taskInfo <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update6_aux<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" ACB_C.state_C <span class="main">(</span>prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">acb</span><span class="main">)</span> <span class="main">=</span> ACB_C.state_C <span class="free">acb</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">acb</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update6<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span>  ACB.state <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.state <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update7_aux1<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" swarmName_C <span class="main">(</span>heap_SwarmInfo_C <span class="free">s</span> <span class="main">(</span>ACB_C.pSwarmInfo_C <span class="main">(</span>prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">acb</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmName_C <span class="main">(</span>heap_SwarmInfo_C <span class="free">s</span> <span class="main">(</span>ACB_C.pSwarmInfo_C <span class="free">acb</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">acb</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update7_1<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span> swarmName<span class="main">(</span> ACB.pSwarmInfo <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmName <span class="main">(</span>ACB.pSwarmInfo <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update7_aux2<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="free">s</span> <span class="main">(</span>ACB_C.pSwarmInfo_C <span class="main">(</span>prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">acb</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="free">s</span> <span class="main">(</span>ACB_C.pSwarmInfo_C <span class="free">acb</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">acb</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update7_2<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span> swarmID<span class="main">(</span> ACB.pSwarmInfo <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmID <span class="main">(</span>ACB.pSwarmInfo <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update7_aux3<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="free">s</span> <span class="main">(</span>ACB_C.pSwarmInfo_C <span class="main">(</span>prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">acb</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="free">s</span> <span class="main">(</span>ACB_C.pSwarmInfo_C <span class="free">acb</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">acb</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update7_3<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span> swarmPrio <span class="main">(</span> ACB.pSwarmInfo <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmPrio <span class="main">(</span>ACB.pSwarmInfo <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update7_aux4<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="free">s</span> <span class="main">(</span>ACB_C.pSwarmInfo_C <span class="main">(</span>prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">acb</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="free">s</span> <span class="main">(</span>ACB_C.pSwarmInfo_C <span class="free">acb</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">acb</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update7_4<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span> SwarmInfo.state <span class="main">(</span>ACB.pSwarmInfo <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> SwarmInfo.state <span class="main">(</span>ACB.pSwarmInfo <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update8_aux<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" ACB_C.formationPos_C <span class="main">(</span>prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">acb</span><span class="main">)</span> <span class="main">=</span> ACB_C.formationPos_C <span class="free">acb</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">acb</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update8<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span>  ACB.formationPos <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.formationPos <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update9_aux<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" ACB_C.formationType_C <span class="main">(</span>prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">acb</span><span class="main">)</span> <span class="main">=</span> ACB_C.formationType_C <span class="free">acb</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">acb</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update9<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span>  ACB.formationType <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.formationType <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update10_aux<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" ACB_C.prio_C <span class="main">(</span>prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="free">nrp</span><span class="main">)</span> <span class="free">acb</span><span class="main">)</span> <span class="main">=</span> <span class="free">nrp</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">acb</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update10<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="main">⋀</span><span class="bound">ra</span><span class="main">.</span> <span class="bound">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">ra</span> <span class="main">≠</span> <span class="free">r</span> <span class="main">⟹</span> ACB.prio <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="bound">ra</span><span class="main">)</span> <span class="main">=</span> ACB.prio <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="bound">ra</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update10_2<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="main">⋀</span><span class="bound">ra</span><span class="main">.</span> <span class="bound">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">ra</span> <span class="main">=</span> <span class="free">r</span> <span class="main">⟹</span> ACB.prio <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="bound">ra</span><span class="main">)</span> <span class="main">=</span> <span class="free">t</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update11<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span> <span class="main">⟹</span> ACB.actorID <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">,</span> <span class="free">ra</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.actorID <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update12<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span>  ACB.name <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">,</span> <span class="free">ra</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.name <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update13<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span>  ACB.taskID <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">,</span> <span class="free">ra</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.taskID <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update14<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span>  ACB.taskName <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">,</span> <span class="free">ra</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.taskName <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update15<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span>  ACB.taskInfo <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">,</span> <span class="free">ra</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.taskInfo <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update16<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span>  ACB.state <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">,</span> <span class="free">ra</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.state <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update17_1<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span> swarmName<span class="main">(</span>ACB.pSwarmInfo <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">,</span> <span class="free">ra</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmName <span class="main">(</span>ACB.pSwarmInfo <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update17_2<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span> swarmID<span class="main">(</span> ACB.pSwarmInfo <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">,</span> <span class="free">ra</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmID <span class="main">(</span>ACB.pSwarmInfo <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update17_3<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span> swarmPrio <span class="main">(</span> ACB.pSwarmInfo <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">,</span> <span class="free">ra</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmPrio <span class="main">(</span>ACB.pSwarmInfo <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update17_4<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span> SwarmInfo.state <span class="main">(</span>ACB.pSwarmInfo <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">,</span> <span class="free">ra</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> SwarmInfo.state <span class="main">(</span>ACB.pSwarmInfo <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update18<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span>  ACB.formationPos <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">,</span> <span class="free">ra</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.formationPos <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update19<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="free">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span>   <span class="main">⟹</span>  ACB.formationType <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">,</span> <span class="free">ra</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">=</span> ACB.formationType <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="quoted"><span class="language">"acbList <span class="free">a</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">r</span> <span class="main">=</span> <span class="free">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update20<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="main">⋀</span><span class="bound">ra</span><span class="main">.</span> <span class="bound">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">ra</span> <span class="main">≠</span> <span class="free">r</span> <span class="main">⟹</span> ACB.prio <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">,</span> <span class="bound">ra</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="bound">ra</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="bound">ra</span><span class="main">)</span> <span class="main">=</span> <span class="free">t2</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> ACBprio_Update20_2<span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" <span class="main">⋀</span><span class="bound">ra</span><span class="main">.</span> <span class="bound">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">ra</span> <span class="main">=</span> <span class="free">r</span> <span class="main">⟹</span> ACB.prio <span class="main">(</span><span class="main">(</span>acbList <span class="free">a</span><span class="main">)</span><span class="main">[</span><span class="free">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="free">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t</span><span class="main">⦈</span><span class="main">,</span> <span class="bound">ra</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="free">a</span> <span class="main">!</span> <span class="bound">ra</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="free">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="bound">ra</span><span class="main">)</span> <span class="main">=</span> <span class="free">t2</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹switchToActor  verify›</span></span></span>

<span class="keyword1"><span class="command">axiomatization</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> noFail_whileLoopE2 <span class="main">:</span> 
     <span class="quoted"><span class="quoted"><span class="language">"no_fail <span class="free">P</span> <span class="main">(</span><span class="free">B</span> <span class="free">r</span><span class="main">)</span> <span class="main">⟹</span> no_fail <span class="free">P</span> <span class="main">(</span> whileLoopE <span class="free">C</span> <span class="free">B</span> <span class="free">r</span> <span class="keyword1">&lt;catch&gt;</span> <span class="free">t</span><span class="main">)</span>"</span></span></span>

<span class="keyword1"><span class="command">definition</span></span> sche_valid_switchToActor <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_switchToActor</span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="main">∧</span>
              is_valid_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="main">0</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="main">(</span><span class="main">∀</span><span class="bound">i</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span> <span class="main">&lt;</span> sint<span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> is_valid_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span>
             <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">i</span> <span class="bound">j</span><span class="main">.</span> <span class="bound">i</span><span class="main">≠</span><span class="bound">j</span> <span class="main">⟶</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">i</span><span class="main">)</span> <span class="main">≠</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">j</span><span class="main">)</span><span class="main">)</span>"</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> narrowP<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">∀</span><span class="bound">s</span><span class="main">.</span> <span class="free">P</span> <span class="bound">s</span> <span class="main">⟶</span> <span class="free">T</span> <span class="bound">s</span> <span class="main">⟹</span>
  corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">rrel</span> <span class="free">T</span> <span class="free">P'</span> <span class="free">f</span> <span class="free">g</span> <span class="main">⟹</span>
  corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">rrel</span> <span class="free">P</span> <span class="free">P'</span> <span class="free">f</span> <span class="free">g</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_switchToActor_aux11<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">tmpi</span><span class="main">.</span>
       stringEqual <span class="free">aPluName</span> <span class="free">aPluNameC</span> <span class="main">⟹</span>
       no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>
        <span class="main">(</span>whileLoopE <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="bound">r</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">&lt;</span> <span class="free">ret</span><span class="main">)</span>
           <span class="main">(</span><span class="main">λ</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                   <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                   <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                   <span class="bound">tmpi</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">r'</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                   <span class="bound">tmpj</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                   condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACB_C.actorID_C <span class="bound">tmpj</span><span class="main">)</span> <span class="main">=</span> <span class="free">anActorID</span> <span class="main">∧</span> sint <span class="main">(</span>ACB_C.state_C <span class="bound">tmpj</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING<span class="main">)</span>
                     <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span>
                         modify
                          <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C_update
                                <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="bound">a</span><span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">r'</span> <span class="main">:=</span> prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> prio_C <span class="bound">tmpj</span><span class="main">)</span> <span class="bound">tmpi</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span><span class="main">)</span><span class="main">;</span>
                         <span class="bound">y</span> <span class="main">&lt;-</span>
                         modify
                          <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C_update
                                <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="bound">a</span><span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span> <span class="main">:=</span> prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> prio_C <span class="bound">tmpi</span><span class="main">)</span> <span class="bound">tmpj</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span><span class="main">)</span><span class="main">;</span>
                         throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span>
                      <span class="keyword1">od</span><span class="main">)</span>
                     <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                         returnOk <span class="main">(</span><span class="bound">r</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span>
                      <span class="keyword1">od</span><span class="main">)</span>
                <span class="keyword1">od</span><span class="main">)</span>
          <span class="main">0</span> <span class="keyword1">&lt;catch&gt;</span>
         return<span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> noFail_whileLoopE2<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> guard_def sche_valid_switchToActor_def no_fail_def gets_def modify_def get_def put_def NonDetMonad.bind_def return_def condition_def throwError_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_switchToActor_aux12<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">tmpi</span> <span class="bound">j</span><span class="main">.</span> stringEqual <span class="free">aPluName</span> <span class="free">aPluNameC</span> <span class="main">⟹</span> no_fail  <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>
      <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="bound">j</span> <span class="main">=</span> <span class="main">-</span> <span class="main">1</span><span class="main">)</span>
         <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span>
         <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="numeral">2</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span>  non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
<span class="keyword1"><span class="command">lemma</span></span> des_impl_switchToActor_aux13<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">tmpi</span><span class="main">.</span>
       stringEqual <span class="free">aPluName</span> <span class="free">aPluNameC</span> <span class="main">⟹</span>
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span><span class="main">⦄</span>
       whileLoopE <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="bound">r</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">&lt;</span> <span class="free">ret</span><span class="main">)</span>
         <span class="main">(</span><span class="main">λ</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">tmpi</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">r'</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">tmpj</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACB_C.actorID_C <span class="bound">tmpj</span><span class="main">)</span> <span class="main">=</span> <span class="free">anActorID</span> <span class="main">∧</span> sint <span class="main">(</span>ACB_C.state_C <span class="bound">tmpj</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING<span class="main">)</span>
                   <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span>
                       modify
                        <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C_update
                              <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="bound">a</span><span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">r'</span> <span class="main">:=</span> prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> prio_C <span class="bound">tmpj</span><span class="main">)</span> <span class="bound">tmpi</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span><span class="main">)</span><span class="main">;</span>
                       <span class="bound">y</span> <span class="main">&lt;-</span>
                       modify
                        <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C_update
                              <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="bound">a</span><span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span> <span class="main">:=</span> prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> prio_C <span class="bound">tmpi</span><span class="main">)</span> <span class="bound">tmpj</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span><span class="main">)</span><span class="main">;</span>
                       throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span>
                    <span class="keyword1">od</span><span class="main">)</span>
                   <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                       returnOk <span class="main">(</span><span class="bound">r</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span>
                    <span class="keyword1">od</span><span class="main">)</span>
              <span class="keyword1">od</span><span class="main">)</span>
        <span class="main">0</span> <span class="keyword1">&lt;catch&gt;</span>
       return 
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">j</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
      <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> throwError_def returnOk_def validE_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span> 
<span class="keyword1"><span class="command">lemma</span></span> des_impl_switchToActor_aux1<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">tmpi</span><span class="main">.</span>
       stringEqual <span class="free">aPluName</span> <span class="free">aPluNameC</span> <span class="main">⟹</span>
       no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="free">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="free">r'</span> <span class="main">∧</span> <span class="free">r'</span> <span class="main">&lt;</span> <span class="free">ret</span><span class="main">)</span>
        <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> compare' <span class="bound">s</span> <span class="main">(</span>ACB_C.name_C <span class="bound">tmpi</span><span class="main">)</span> <span class="free">aPluNameC</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span>
          <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACB_C.state_C <span class="bound">tmpi</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING<span class="main">)</span>
            <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="numeral">3</span><span class="main">)</span><span class="main">)</span>
            <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                <span class="bound">j</span> <span class="main">&lt;-</span>
                whileLoopE <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="bound">r</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">&lt;</span> <span class="free">ret</span><span class="main">)</span>
                  <span class="main">(</span><span class="main">λ</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">tmpi</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">r'</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">tmpj</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACB_C.actorID_C <span class="bound">tmpj</span><span class="main">)</span> <span class="main">=</span> <span class="free">anActorID</span> <span class="main">∧</span> sint <span class="main">(</span>ACB_C.state_C <span class="bound">tmpj</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING<span class="main">)</span>
                            <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span>
                                modify
                                 <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C_update
                                       <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="bound">a</span><span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">r'</span> <span class="main">:=</span> prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> prio_C <span class="bound">tmpj</span><span class="main">)</span> <span class="bound">tmpi</span><span class="main">)</span><span class="main">)</span>
                                       <span class="bound">s</span><span class="main">)</span><span class="main">;</span>
                                <span class="bound">y</span> <span class="main">&lt;-</span>
                                modify
                                 <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C_update
                                       <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="bound">a</span><span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span> <span class="main">:=</span> prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> prio_C <span class="bound">tmpi</span><span class="main">)</span> <span class="bound">tmpj</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span><span class="main">)</span><span class="main">;</span>
                                throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span>
                             <span class="keyword1">od</span><span class="main">)</span>
                            <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                                returnOk <span class="main">(</span><span class="bound">r</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span>
                             <span class="keyword1">od</span><span class="main">)</span>
                       <span class="keyword1">od</span><span class="main">)</span>
                 <span class="main">0</span> <span class="keyword1">&lt;catch&gt;</span>
                return<span class="main">;</span>
                condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="bound">j</span> <span class="main">=</span> <span class="main">-</span> <span class="main">1</span><span class="main">)</span>
                  <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span>
                  <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="numeral">2</span><span class="main">)</span><span class="main">)</span>
             <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
              returnOk <span class="main">(</span><span class="free">r'</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span>  non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span>  non_fail_seq2<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_switchToActor_aux11<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> aPluName <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluName</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> aPluNameC <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluNameC</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> schePtr <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">schePtr</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_switchToActor_aux12<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> aPluName <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluName</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> aPluNameC <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluNameC</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> schePtr <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">schePtr</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_switchToActor_aux13<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> aPluName <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluName</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> aPluNameC <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluNameC</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> schePtr <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">schePtr</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
<span class="keyword1"><span class="command">lemma</span></span> des_impl_switchToActor_aux2<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">tmpj</span><span class="main">.</span>
       stringEqual <span class="free">aPluName</span> <span class="free">aPluNameC</span> <span class="main">⟹</span>
       <span class="free">r</span> <span class="main">=</span> <span class="free">r'</span> <span class="main">⟹</span>
       no_fail 
       <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="free">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           <span class="main">0</span> <span class="main">≤</span> <span class="free">r'</span> <span class="main">∧</span> <span class="free">r'</span> <span class="main">&lt;</span> <span class="free">ret</span> <span class="main">∧</span>
           <span class="main">0</span> <span class="main">≤</span> <span class="free">ra</span> <span class="main">∧</span> <span class="free">ra</span> <span class="main">&lt;</span> <span class="free">ret</span><span class="main">)</span>
       <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACB_C.actorID_C <span class="bound">tmpj</span><span class="main">)</span> <span class="main">=</span> <span class="free">anActorID</span> <span class="main">∧</span> sint <span class="main">(</span>ACB_C.state_C <span class="bound">tmpj</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING<span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span>
              modify
               <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="bound">a</span><span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">r'</span> <span class="main">:=</span> prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> prio_C <span class="bound">tmpj</span><span class="main">)</span> <span class="free">tmpi</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">y</span> <span class="main">&lt;-</span>
              modify
               <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="bound">a</span><span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">ra</span> <span class="main">:=</span> prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> prio_C <span class="free">tmpi</span><span class="main">)</span> <span class="bound">tmpj</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span><span class="main">)</span><span class="main">;</span>
              throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
              returnOk <span class="main">(</span><span class="free">ra</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span>  non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>


<span class="keyword1"><span class="command">lemma</span></span> des_impl_switchToActor  <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"stringEqual <span class="free">aPluName</span> <span class="free">aPluNameC</span> <span class="main">⟹</span>
  corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> True <span class="main">∧</span> <span class="bound">r'</span><span class="main">=</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> False <span class="main">∧</span> <span class="bound">r'</span><span class="main">=</span><span class="main">0</span><span class="main">)</span><span class="main">)</span>
   <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True <span class="main">)</span> <span class="main">(</span>sche_valid_switchToActor <span class="free">schePtr</span><span class="main">)</span> 
   <span class="main">(</span>Des_switchToActor <span class="free">anActorID</span> <span class="free">aPluName</span><span class="main">)</span> <span class="main">(</span>Impl_switchToActor <span class="free">schePtr</span> <span class="free">anActorID</span> <span class="free">aPluNameC</span> <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_switchToActor_def Impl_switchToActor_def ACBVectorSize'_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="bound">ret</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="bound">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">len</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret len
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">rDes</span> <span class="bound">rImpl</span><span class="main">.</span> <span class="main">(</span><span class="bound">rImpl</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span> <span class="main">∧</span> <span class="bound">rDes</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">rImpl</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span> <span class="main">∧</span> <span class="bound">rDes</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">rImpl</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">3</span> <span class="main">∧</span> <span class="bound">rDes</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">3</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span> <span class="bound">rImpl</span> <span class="main">=</span> <span class="bound">rDes</span><span class="main">)</span>"</span></span></span></span> <span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">≤</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>  <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span><span class="main">≤</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>   <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
      <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">&lt;=</span> <span class="skolem">ret</span> <span class="main">∧</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
      <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span><span class="main">&lt;=</span><span class="skolem">ret</span> <span class="main">∧</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>  <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def sche_valid_switchToActor_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_condition_P2<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def modify_def get_def put_def NonDetMonad.bind_def return_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> catch_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">e</span> <span class="bound">e'</span><span class="main">.</span> <span class="main">(</span><span class="bound">e</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span> <span class="main">∧</span> <span class="bound">e'</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">e</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span> <span class="main">∧</span> <span class="bound">e'</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="main">(</span><span class="bound">e</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">3</span> <span class="main">∧</span> <span class="bound">e'</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">3</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">λ</span><span class="bound">b</span> <span class="bound">b'</span><span class="main">.</span> <span class="bound">b</span> <span class="main">=</span> <span class="bound">b'</span><span class="main">)</span> "</span></span></span> 
         <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
         <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">≤</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
     <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">fold</span> catch_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span><span class="main">≤</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
     <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
    <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">&lt;=</span> <span class="skolem">ret</span> <span class="main">∧</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="skolem">ret</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">fold</span> catch_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
        <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span><span class="main">&lt;=</span><span class="skolem">ret</span> <span class="main">∧</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
               <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="skolem">ret</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="improper">x</span>"</span></span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="improper">xa</span>"</span></span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">fold</span> catch_def<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoopE<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r' s s'
     <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r</span>"</span></span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r'
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> 
            <span class="main">∧</span> <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
            <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> 
            <span class="main">∧</span> <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
            <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> 
            <span class="main">∧</span> <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
            <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">tempi</span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> 
            <span class="main">∧</span> <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
            <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span> <span class="main">∧</span> <span class="bound">tempi</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">pi</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> int <span class="skolem">len</span> <span class="main">∧</span> 
                  <span class="bound">pi</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> nat <span class="skolem">r</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> tempi pi
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre2<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> int64Equal_def<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> stateACBEqual_def impl_ACTOR_STATE_RUNNING_def<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> compare_str2 nat_0_le<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">)</span></span> compare_string_1 int_nat_eq<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>   
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def modify_def get_def put_def NonDetMonad.bind_def return_def returnOk_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre2<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def stateACBEqual_def impl_ACTOR_STATE_RUNNING_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> actorState.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>13<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span> nat_0_le<span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> Word.sint_0 int_nat_eq num.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> numeral_eq_one_iff one_eq_numeral_iff zero_neq_numeral<span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>   <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def modify_def get_def put_def NonDetMonad.bind_def return_def throwError_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
                <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> int <span class="skolem">len</span>"</span></span></span> 
       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>  sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span>
       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">rDes</span> <span class="bound">rImpl</span><span class="main">.</span> <span class="main">(</span><span class="bound">rImpl</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span> <span class="main">∧</span> <span class="bound">rDes</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">rImpl</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span> <span class="main">∧</span> <span class="bound">rDes</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">rImpl</span> <span class="main">=</span> <span class="bound">rDes</span><span class="main">)</span>"</span></span></span></span> <span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> int <span class="skolem">len</span>"</span></span></span> 
               <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
          <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                 <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span>
                 <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="skolem">ret</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def sche_valid_switchToActor_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_condition_P2<span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def modify_def get_def put_def NonDetMonad.bind_def return_def throwError_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> catch_def
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">e</span> <span class="bound">e'</span><span class="main">.</span> <span class="main">(</span><span class="bound">e</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span> <span class="main">∧</span> <span class="bound">e'</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">e</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span> <span class="main">∧</span> <span class="bound">e'</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span><span class="main">)</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">λ</span><span class="bound">b</span> <span class="bound">b'</span><span class="main">.</span> <span class="bound">b</span> <span class="main">=</span> <span class="bound">b'</span><span class="main">)</span> "</span></span></span> 
       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">≤</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
        <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">&lt;=</span> <span class="skolem">ret</span> <span class="main">∧</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                    <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                    <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="skolem">ret</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="improper">x</span>"</span></span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="improper">xa</span>"</span></span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> narrowP<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> T <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> int <span class="skolem">len</span> <span class="main">∧</span>  ACB.name <span class="skolem">pi</span> <span class="main">=</span> <span class="free">aPluName</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoopE<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r' s s'
        <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r</span>"</span></span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ra r'a
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>
           <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'a</span> <span class="main">∧</span> <span class="skolem">r'a</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>
           <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'a</span> <span class="main">∧</span> <span class="skolem">r'a</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>
           <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'a</span> <span class="main">∧</span> <span class="skolem">r'a</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">tempi</span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>
           <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'a</span> <span class="main">∧</span> <span class="skolem">r'a</span> <span class="main">&lt;</span> <span class="skolem">ret</span> <span class="main">∧</span> <span class="bound">tempi</span> <span class="main">=</span>  heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r'</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">pi</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> int <span class="skolem">len</span> <span class="main">∧</span>  <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'a</span> <span class="main">∧</span> <span class="skolem">r'a</span> <span class="main">&lt;</span> int <span class="skolem">len</span>
              <span class="main">∧</span> <span class="bound">pi</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> nat <span class="skolem">r'</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> tempi pi
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">tempj</span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
               <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>
               <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'a</span> <span class="main">∧</span> <span class="skolem">r'a</span> <span class="main">&lt;</span> <span class="skolem">ret</span> <span class="main">∧</span> <span class="skolem">tempi</span> <span class="main">=</span>  heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r'</span><span class="main">)</span>
               <span class="main">∧</span> <span class="bound">tempj</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r'a</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">pj</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> int <span class="skolem">len</span> <span class="main">∧</span>  <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'a</span> <span class="main">∧</span> <span class="skolem">r'a</span> <span class="main">&lt;</span> int <span class="skolem">len</span>
                  <span class="main">∧</span> <span class="skolem">pi</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> nat <span class="skolem">r'</span> <span class="main">∧</span> <span class="bound">pj</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> nat <span class="skolem">r'a</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> tempj pj
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre2<span class="main">)</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
                <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def  int64Equal_def impl_ACTOR_STATE_RUNNING_def stateACBEqual_def
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">smt</span> actorState.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>13<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span> fst_conv mem_Collect_eq nat_0_le sint_1_eq_1_x<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> snd_conv<span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">force</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def modify_def get_def put_def NonDetMonad.bind_def return_def returnOk_def
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>   <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def modify_def get_def put_def NonDetMonad.bind_def return_def throwError_def
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def stringPtrListEqual_def int64PtrListEqual_def pluginPtrListEqual_def pluginEqual_def
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def 
                <span class="keyword1"><span class="command">unfolding</span></span> pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  <span class="keyword1"><span class="command">unfolding</span></span> pluginInfoListEqual_def pluginInfoEqual_def
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>              
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  <span class="keyword1"><span class="command">unfolding</span></span> pluginInfoListEqual_def pluginInfoEqual_def
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>  
              <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> int64Equal_def sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update11<span class="main">[</span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> ra <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> a <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main">]</span> ACBprio_Update1_aux 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_eq_iff length_0_conv length_greater_0_conv list_update.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> zero_less_nat_eq zless_nat_conj<span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update12<span class="main">[</span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> ra <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> a <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main">]</span> ACBprio_Update2_aux 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_eq_iff length_0_conv length_greater_0_conv list_update.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> zero_less_nat_eq zless_nat_conj<span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update13<span class="main">[</span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> ra <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> a <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main">]</span> ACBprio_Update3_aux 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_eq_iff length_0_conv length_greater_0_conv list_update.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> zero_less_nat_eq zless_nat_conj<span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update14<span class="main">[</span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> ra <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> a <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main">]</span> ACBprio_Update4_aux       
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_eq_iff length_0_conv length_greater_0_conv list_update.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> zero_less_nat_eq zless_nat_conj<span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update15<span class="main">[</span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> ra <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> a <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main">]</span> ACBprio_Update5_aux 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_eq_iff length_0_conv length_greater_0_conv list_update.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> zero_less_nat_eq zless_nat_conj<span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>                
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update16<span class="main">[</span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> ra <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> a <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main">]</span> ACBprio_Update6_aux 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_eq_iff length_0_conv length_greater_0_conv list_update.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> zero_less_nat_eq zless_nat_conj<span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>  
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def swarmInfoEqual_def
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update17_1<span class="main">[</span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> ra <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> a <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main">]</span> ACBprio_Update7_aux1 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_eq_iff length_0_conv length_greater_0_conv list_update.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> zero_less_nat_eq zless_nat_conj<span class="main">)</span></span>
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update17_2<span class="main">[</span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> ra <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> a <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main">]</span> ACBprio_Update7_aux2 
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_eq_iff length_0_conv length_greater_0_conv list_update.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> zero_less_nat_eq zless_nat_conj<span class="main">)</span></span>
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update17_3<span class="main">[</span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> ra <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> a <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main">]</span> ACBprio_Update7_aux3 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_eq_iff length_0_conv length_greater_0_conv list_update.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> zero_less_nat_eq zless_nat_conj<span class="main">)</span></span>
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update17_4<span class="main">[</span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> ra <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> a <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main">]</span> ACBprio_Update7_aux4 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_eq_iff length_0_conv length_greater_0_conv list_update.simps<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> zero_less_nat_eq zless_nat_conj<span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
               <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> ACBprio_Update10_aux<span class="main">)</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> ACBprio_Update20<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ra <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> a <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main"><span class="main">]</span></span>
                            ACBprio_Update20_2<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ra <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> a <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
               <span class="keyword1"><span class="command">proof</span></span> <span class="language"><span class="operator">-</span></span>
                <span class="keyword3"><span class="command">assume</span></span> a1<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">pj</span> <span class="main">=</span> acbList <span class="skolem">a</span> <span class="main">!</span> nat <span class="skolem">r'a</span>"</span></span></span>
                <span class="keyword3"><span class="command">assume</span></span> a2<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">pi</span> <span class="main">=</span> acbList <span class="skolem">a</span> <span class="main">!</span> nat <span class="skolem">r'</span>"</span></span></span>
                <span class="keyword3"><span class="command">assume</span></span> a3<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">tempi</span> <span class="main">=</span> heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r'a</span><span class="main">)</span>"</span></span></span>
                <span class="keyword3"><span class="command">assume</span></span> a4<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">ret</span> <span class="main">=</span> int <span class="main">(</span>length <span class="main">(</span>acbList <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                  <span class="keyword3"><span class="command">assume</span></span> a5<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="skolem">a</span><span class="main">)</span>"</span></span></span>
                  <span class="keyword3"><span class="command">assume</span></span> a6<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r'</span> <span class="main">=</span> ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r'a</span>"</span></span></span>
                  <span class="keyword3"><span class="command">assume</span></span> a7<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">t</span> <span class="bound">t2</span><span class="main">.</span> nat <span class="skolem">r'a</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="skolem">a</span><span class="main">)</span> <span class="main">∧</span> nat <span class="skolem">r'a</span> <span class="main">≠</span> nat <span class="skolem">r'</span> <span class="main">⟹</span> prio <span class="main">(</span><span class="main">(</span>acbList <span class="skolem">a</span><span class="main">)</span> <span class="main">[</span>nat <span class="skolem">r'</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> nat <span class="skolem">r'</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="bound">t</span><span class="main">⦈</span><span class="main">,</span> nat <span class="skolem">r'a</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> nat <span class="skolem">r'a</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="bound">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> nat <span class="skolem">r'a</span><span class="main">)</span> <span class="main">=</span> <span class="bound">t2</span>"</span></span></span>
                  <span class="keyword3"><span class="command">assume</span></span> a8<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'a</span>"</span></span></span>
                  <span class="keyword3"><span class="command">assume</span></span> a9<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r'a</span> <span class="main">&lt;</span> int <span class="main">(</span>length <span class="main">(</span>acbList <span class="skolem">a</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                  <span class="keyword3"><span class="command">assume</span></span> a10<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">t</span> <span class="bound">t2</span><span class="main">.</span> nat <span class="skolem">r'a</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="skolem">a</span><span class="main">)</span> <span class="main">∧</span> nat <span class="skolem">r'a</span> <span class="main">=</span> nat <span class="skolem">r'</span> <span class="main">⟹</span> prio <span class="main">(</span><span class="main">(</span>acbList <span class="skolem">a</span><span class="main">)</span> <span class="main">[</span>nat <span class="skolem">r'</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> nat <span class="skolem">r'</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="bound">t</span><span class="main">⦈</span><span class="main">,</span> nat <span class="skolem">r'a</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> nat <span class="skolem">r'a</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> <span class="bound">t2</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> nat <span class="skolem">r'a</span><span class="main">)</span> <span class="main">=</span> <span class="bound">t2</span>"</span></span></span>
                  <span class="keyword3"><span class="command">assume</span></span> a11<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">∀</span><span class="bound">r</span><span class="main">.</span> int64Equal <span class="main">(</span>ACB.actorID <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.actorID_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stringEqual <span class="main">(</span>ACB.name <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.name_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> int64Equal <span class="main">(</span>ACB.taskID <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>taskID_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stringEqual <span class="main">(</span>taskName <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>taskName_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> taskInfoEqual <span class="main">(</span>ACB.taskInfo <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.taskInfo_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stateACBEqual <span class="main">(</span>ACB.state <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.state_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> swarmInfoEqual <span class="main">(</span>pSwarmInfo <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="skolem">b</span> <span class="main">∧</span> int32Equal <span class="main">(</span>prio <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>prio_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                  <span class="keyword3"><span class="command">assume</span></span> a12<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">rb</span> <span class="main">=</span> ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r'a</span>"</span></span></span>
                  <span class="keyword3"><span class="command">assume</span></span> a13<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span>"</span></span></span>
                  <span class="keyword1"><span class="command">have</span></span> f14<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"int <span class="skolem">len</span> <span class="main">=</span> <span class="skolem">ret</span>"</span></span></span>
                    <span class="keyword1"><span class="command">using</span></span> a5 a4 <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">metis</span></span>
                  <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r'a</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span>
                    <span class="keyword1"><span class="command">using</span></span> a9 a5 <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">meson</span></span>
                  <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted"><span class="language">"int32Equal <span class="main">(</span>prio <span class="main">(</span><span class="main">(</span>acbList <span class="skolem">a</span><span class="main">)</span> <span class="main">[</span>nat <span class="skolem">r'</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> nat <span class="skolem">r'</span><span class="main">)</span> <span class="main">⦇</span>prio <span class="main">:=</span> prio <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> nat <span class="skolem">r'a</span><span class="main">)</span><span class="main">⦈</span><span class="main">,</span> nat <span class="skolem">r'a</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> nat <span class="skolem">r'a</span><span class="main">)</span> <span class="main">⦇</span>prio <span class="main">:=</span> prio <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> nat <span class="skolem">r'</span><span class="main">)</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="skolem">rb</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>prio_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r'a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                    <span class="keyword1"><span class="command">using</span></span> f14 a13 a12 a11 a10 a8 a7 a6 a5 a3 a2 a1 <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff ptr_equal<span class="main">)</span></span>
                <span class="keyword1"><span class="command">qed</span></span> 
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> int64Equal_def sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span>  ACBprio_Update1_aux
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update11 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span>  
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span>  ACBprio_Update2_aux 
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update12 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span>  
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update3_aux 
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update13 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span>  
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update4_aux 
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update14 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span>  
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update5_aux 
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update15 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span>  
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update6_aux 
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update16 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span>  
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def swarmInfoEqual_def
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux1 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update17_1 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span>  
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux2 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update17_2 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span> 
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux3 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update17_3 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span> 
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux4
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update17_4 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span> 
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
               <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> ACBprio_Update10_aux<span class="main">)</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> ACBprio_Update20<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ra <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> a <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main"><span class="main">]</span></span>
                            ACBprio_Update20_2<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ra <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> a <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
               <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update20 ACBprio_Update20_2 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span> 
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> int64Equal_def sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span>  ACBprio_Update1_aux
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update11 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span>  
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span>  ACBprio_Update2_aux 
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update12 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span>  
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update3_aux 
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update13 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span>  
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update4_aux 
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update14 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span>  
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update5_aux 
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update15 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span>  
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update6_aux 
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update16 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span>  
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def swarmInfoEqual_def
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux1 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update17_1 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span>  
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux2 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update17_2 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span> 
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux3 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update17_3 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span> 
                <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux4
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update17_4 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span> 
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
               <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> ACBprio_Update10_aux<span class="main">)</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> ACBprio_Update20<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ra <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> a <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main"><span class="main">]</span></span>
                            ACBprio_Update20_2<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ra <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">r'a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> a <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
               <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> ACBprio_Update20 ACBprio_Update20_2 int_nat_eq length_list_update nat_int.Rep_inverse nat_less_iff nth_list_update_eq nth_list_update_neq<span class="main">)</span></span> 
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def swarmInfoEqual_def
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
              <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ra
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> throwError_def returnOk_def validE_def
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ra
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> throwError_def returnOk_def validE_def
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
         <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ra
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span> 
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span> 
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span> 
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_switchToActor_aux2<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> aPluName <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluName</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r'<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ret <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">ret</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> anActorID <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">anActorID</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> aPluNameC <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluNameC</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> whileLoop_terminatesE_def throwError_def returnOk_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r <span class="comment1">(*whileLoop_terminates*)</span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoop_terminates_inv
           <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span> Inl <span class="bound">a</span> <span class="main">⇒</span> <span class="main">0</span> <span class="main">|</span>
                         Inr <span class="bound">t</span> <span class="main">⇒</span> <span class="main">(</span>nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> nat <span class="bound">t</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.lift_def
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
         <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">force</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span><span class="main">≤</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
      <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
     <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
          <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span><span class="main">&lt;=</span><span class="skolem">ret</span> <span class="main">∧</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
               <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="skolem">ret</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r'
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_switchToActor_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_switchToActor_aux1<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> aPluName <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluName</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> whileLoop_terminatesE_def throwError_def returnOk_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r <span class="comment1">(*whileLoop_terminates*)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoop_terminates_inv
           <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span>  sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span> Inl <span class="bound">a</span> <span class="main">⇒</span> <span class="main">0</span> <span class="main">|</span>
                         Inr <span class="bound">t</span> <span class="main">⇒</span> <span class="main">(</span>nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> nat <span class="bound">t</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.lift_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">insert</span> finish_puase_apiList<span class="main"><span class="keyword3">,</span></span> <span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
          <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> sche_valid_switchToActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_switchToActor_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">force</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>




<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹activateActor  verify›</span></span></span>

<span class="keyword1"><span class="command">definition</span></span> sche_valid_activateActor <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_activateActor</span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="main">∧</span>
              is_valid_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="main">0</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="main">(</span><span class="main">∀</span><span class="bound">i</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span> <span class="main">&lt;</span> sint<span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> is_valid_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span>"</span></span></span>


<span class="keyword1"><span class="command">lemma</span></span> des_impl_activateActor_aux11<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">tmpi</span><span class="main">.</span>
       stringEqual <span class="free">aPluName</span> <span class="free">aPluNameC</span> <span class="main">⟹</span>
       no_fail
       <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>
        <span class="main">(</span>whileLoopE <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="bound">r</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">&lt;</span> <span class="free">ret</span><span class="main">)</span>
           <span class="main">(</span><span class="main">λ</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                   <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                   <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                   <span class="bound">tmpj</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                   <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> compare' <span class="bound">s</span> <span class="main">(</span>ACB_C.name_C <span class="bound">tmpj</span><span class="main">)</span> <span class="free">aPluNameC</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span>
                                  swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="bound">tmpj</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="bound">tmpi</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                     <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACB_C.state_C <span class="bound">tmpj</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING<span class="main">)</span>
                       <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="numeral">2</span><span class="main">)</span><span class="main">)</span>
                       <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span>
                           modify
                            <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C_update
                                  <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="bound">a</span><span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span> <span class="main">:=</span>
                                           prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> prio_C <span class="bound">tmpi</span><span class="main">)</span> <span class="bound">tmpj</span><span class="main">)</span><span class="main">)</span>
                                  <span class="bound">s</span><span class="main">)</span><span class="main">;</span>
                           throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span>
                        <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>
                     <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                         returnOk <span class="main">(</span><span class="bound">r</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span>
                      <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>
                <span class="keyword1">od</span><span class="main">)</span>
          <span class="main">0</span> <span class="keyword1">&lt;catch&gt;</span>
         return<span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> noFail_whileLoopE2<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_activateActor_def<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_activateActor_def<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_activateActor_def<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> guard_def sche_valid_activateActor_def no_fail_def gets_def modify_def get_def put_def NonDetMonad.bind_def return_def condition_def throwError_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_activateActor_aux12<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">tmpi</span> <span class="bound">j</span><span class="main">.</span> stringEqual <span class="free">aPluName</span> <span class="free">aPluNameC</span> <span class="main">⟹</span> no_fail  <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>
      <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="bound">j</span> <span class="main">=</span> <span class="main">-</span> <span class="main">1</span><span class="main">)</span>
         <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span>
         <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="numeral">2</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span>  non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_activateActor_aux13<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">tmpi</span><span class="main">.</span>
       stringEqual <span class="free">aPluName</span> <span class="free">aPluNameC</span> <span class="main">⟹</span>
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span><span class="main">⦄</span>
       whileLoopE <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="bound">r</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">&lt;</span> <span class="free">ret</span><span class="main">)</span>
         <span class="main">(</span><span class="main">λ</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">tmpj</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> compare' <span class="bound">s</span> <span class="main">(</span>ACB_C.name_C <span class="bound">tmpj</span><span class="main">)</span> <span class="free">aPluNameC</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span>
                                swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="bound">tmpj</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="bound">tmpi</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                   <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACB_C.state_C <span class="bound">tmpj</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING<span class="main">)</span>
                     <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="numeral">2</span><span class="main">)</span><span class="main">)</span>
                     <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span>
                         modify
                          <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C_update
                                <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="bound">a</span><span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span> <span class="main">:=</span>
                                         prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> prio_C <span class="bound">tmpi</span><span class="main">)</span> <span class="bound">tmpj</span><span class="main">)</span><span class="main">)</span>
                                <span class="bound">s</span><span class="main">)</span><span class="main">;</span>
                         throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span>
                      <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>
                   <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                       returnOk <span class="main">(</span><span class="bound">r</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span>
                    <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>
              <span class="keyword1">od</span><span class="main">)</span>
        <span class="main">0</span> <span class="keyword1">&lt;catch&gt;</span>
       return 
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">j</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
      <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> throwError_def returnOk_def validE_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_activateActor_def<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span> 


<span class="keyword1"><span class="command">lemma</span></span> des_impl_activateActor_aux1<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">tmpi</span><span class="main">.</span>
       stringEqual <span class="free">aPluName</span> <span class="free">aPluNameC</span> <span class="main">⟹</span>
       no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="free">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="free">r'</span> <span class="main">∧</span> <span class="free">r'</span> <span class="main">&lt;</span> <span class="free">ret</span><span class="main">)</span>
        <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACB_C.actorID_C <span class="bound">tmpi</span><span class="main">)</span> <span class="main">=</span> <span class="free">anActorID</span> <span class="main">∧</span> sint <span class="main">(</span>ACB_C.state_C <span class="bound">tmpi</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING<span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">j</span> <span class="main">&lt;-</span>
              whileLoopE <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="bound">r</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">&lt;</span> <span class="free">ret</span><span class="main">)</span>
                <span class="main">(</span><span class="main">λ</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                        <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                        <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                        <span class="bound">tmpj</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                        <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> compare' <span class="bound">s</span> <span class="main">(</span>ACB_C.name_C <span class="bound">tmpj</span><span class="main">)</span> <span class="free">aPluNameC</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span>
                                       swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="bound">tmpj</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="bound">tmpi</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                          <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACB_C.state_C <span class="bound">tmpj</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING<span class="main">)</span>
                            <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="numeral">2</span><span class="main">)</span><span class="main">)</span>
                            <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span>
                                modify
                                 <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C_update
                                       <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="bound">a</span><span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span> <span class="main">:=</span>
                                                prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> prio_C <span class="bound">tmpi</span><span class="main">)</span> <span class="bound">tmpj</span><span class="main">)</span><span class="main">)</span>
                                       <span class="bound">s</span><span class="main">)</span><span class="main">;</span>
                                throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span>
                             <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>
                          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                              returnOk <span class="main">(</span><span class="bound">r</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span>
                           <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>
                        <span class="keyword1">od</span><span class="main">)</span>
               <span class="main">0</span> <span class="keyword1">&lt;catch&gt;</span>
              return<span class="main">;</span>
              <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="bound">j</span> <span class="main">=</span> <span class="main">-</span> <span class="main">1</span><span class="main">)</span>
                <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span>
                <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="numeral">2</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span>
          <span class="main">(</span>returnOk <span class="main">(</span><span class="free">r'</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span>
        <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span>  non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>            
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_activateActor_aux11<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> aPluName <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluName</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> aPluNameC <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluNameC</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> schePtr <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">schePtr</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_activateActor_aux12<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> aPluName <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluName</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> aPluNameC <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluNameC</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> schePtr <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">schePtr</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_activateActor_aux13<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> aPluName <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluName</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> aPluNameC <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluNameC</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> schePtr <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">schePtr</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_activateActor_aux2<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">tmpj</span><span class="main">.</span>
       stringEqual <span class="free">aPluName</span> <span class="free">aPluNameC</span> <span class="main">⟹</span>
       <span class="free">r</span> <span class="main">=</span> <span class="free">r'</span> <span class="main">⟹</span>
       no_fail 
        <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
             <span class="free">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
             <span class="main">0</span> <span class="main">≤</span> <span class="free">r'</span> <span class="main">∧</span> <span class="free">r'</span> <span class="main">&lt;</span> <span class="free">ret</span> <span class="main">∧</span> <span class="free">tempi</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">r'</span><span class="main">)</span>
             <span class="main">∧</span> sint <span class="main">(</span>ACB_C.actorID_C <span class="free">tempi</span><span class="main">)</span> <span class="main">=</span> <span class="free">anActorID</span> <span class="main">∧</span> sint <span class="main">(</span>ACB_C.state_C <span class="free">tempi</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING
             <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="free">ra</span> <span class="main">∧</span> <span class="free">ra</span> <span class="main">&lt;</span> <span class="free">ret</span><span class="main">)</span>
        <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> compare' <span class="bound">s</span> <span class="main">(</span>ACB_C.name_C <span class="bound">tmpj</span><span class="main">)</span> <span class="free">aPluNameC</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span>
                       swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="bound">tmpj</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="free">tempi</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
          <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACB_C.state_C <span class="bound">tmpj</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING<span class="main">)</span>
            <span class="main">(</span>throwError <span class="main">(</span><span class="main">-</span> <span class="numeral">2</span><span class="main">)</span><span class="main">)</span>
            <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span>
                modify
                 <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C_update
                       <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="bound">a</span><span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">ra</span> <span class="main">:=</span> prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> prio_C <span class="free">tempi</span><span class="main">)</span> <span class="bound">tmpj</span><span class="main">)</span><span class="main">)</span>
                       <span class="bound">s</span><span class="main">)</span><span class="main">;</span>
                throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span>
             <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
              returnOk <span class="main">(</span><span class="free">ra</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span>  non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span>  non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_activateActor_def<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>


<span class="keyword1"><span class="command">lemma</span></span> des_impl_activateActor  <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"stringEqual <span class="free">aPluName</span> <span class="free">aPluNameC</span> <span class="main">⟹</span>
  corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> True <span class="main">∧</span> <span class="bound">r'</span><span class="main">=</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> False <span class="main">∧</span> <span class="bound">r'</span><span class="main">=</span><span class="main">0</span><span class="main">)</span><span class="main">)</span>
   <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True <span class="main">)</span> <span class="main">(</span>sche_valid_activateActor <span class="free">schePtr</span><span class="main">)</span> 
   <span class="main">(</span>Des_activateActor <span class="free">anActorID</span> <span class="free">aPluName</span><span class="main">)</span> <span class="main">(</span>Impl_activateActor <span class="free">schePtr</span> <span class="free">anActorID</span> <span class="free">aPluNameC</span> <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_activateActor_def Impl_activateActor_def ACBVectorSize'_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="bound">ret</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="bound">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret len
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">rDes</span> <span class="bound">rImpl</span><span class="main">.</span> <span class="main">(</span><span class="bound">rImpl</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span> <span class="main">∧</span> <span class="bound">rDes</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">rImpl</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span> <span class="main">∧</span> <span class="bound">rDes</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span> <span class="bound">rImpl</span> <span class="main">=</span> <span class="bound">rDes</span><span class="main">)</span>"</span></span></span></span> <span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">≤</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span><span class="main">≤</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> validE_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
      <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">&lt;=</span> <span class="skolem">ret</span> <span class="main">∧</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
      <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span><span class="main">&lt;=</span><span class="skolem">ret</span> <span class="main">∧</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def sche_valid_activateActor_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_condition_P2<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_activateActor_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def modify_def get_def put_def NonDetMonad.bind_def return_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> catch_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">e</span> <span class="bound">e'</span><span class="main">.</span> <span class="main">(</span><span class="bound">e</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span> <span class="main">∧</span> <span class="bound">e'</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">e</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span> <span class="main">∧</span> <span class="bound">e'</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span><span class="main">)</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">λ</span><span class="bound">b</span> <span class="bound">b'</span><span class="main">.</span> <span class="bound">b</span> <span class="main">=</span> <span class="bound">b'</span><span class="main">)</span> "</span></span></span> 
         <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
         <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">≤</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
     <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">fold</span> catch_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span><span class="main">≤</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
     <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
    <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">&lt;=</span> <span class="skolem">ret</span> <span class="main">∧</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="skolem">ret</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">fold</span> catch_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
        <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span><span class="main">&lt;=</span><span class="skolem">ret</span> <span class="main">∧</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
               <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="skolem">ret</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_activateActor_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_activateActor_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="improper">x</span>"</span></span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="improper">xa</span>"</span></span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">fold</span> catch_def<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoopE<span class="main">)</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r' s s'
     <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r</span>"</span></span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r'
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> 
            <span class="main">∧</span> <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
            <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> 
            <span class="main">∧</span> <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
            <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> 
            <span class="main">∧</span> <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
            <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">tempI</span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> 
            <span class="main">∧</span> <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
            <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span> <span class="main">∧</span> <span class="bound">tempI</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">pi</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> int <span class="skolem">len</span> <span class="main">∧</span> 
                  <span class="bound">pi</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> nat <span class="skolem">r</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> tempi pi
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre2<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> int64Equal_def<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> stateACBEqual_def impl_ACTOR_STATE_RUNNING_def<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> actorState.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>13<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span> nat_0_le<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> int64Equal_def<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> stateACBEqual_def impl_ACTOR_STATE_RUNNING_def<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
         <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> Word.sint_0 int_nat_eq num.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> numeral_One numeral_eq_one_iff zero_neq_numeral<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">corres</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> int <span class="skolem">len</span>"</span></span></span> 
       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span> 
       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">rDes</span> <span class="bound">rImpl</span><span class="main">.</span> <span class="main">(</span><span class="bound">rImpl</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span> <span class="main">∧</span> <span class="bound">rDes</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">rImpl</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span> <span class="main">∧</span> <span class="bound">rDes</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">rImpl</span> <span class="main">=</span> <span class="bound">rDes</span><span class="main">)</span>"</span></span></span></span> <span class="main"><span class="main">]</span></span><span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> int <span class="skolem">len</span>"</span></span></span> 
               <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
         <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
          <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                 <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span>
                 <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="skolem">ret</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def sche_valid_activateActor_def
         <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_condition_P2<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def modify_def get_def put_def NonDetMonad.bind_def return_def throwError_def
         <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command">unfolding</span></span> catch_def
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">e</span> <span class="bound">e'</span><span class="main">.</span> <span class="main">(</span><span class="bound">e</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span> <span class="main">∧</span> <span class="bound">e'</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">e</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span> <span class="main">∧</span> <span class="bound">e'</span> <span class="main">=</span> <span class="main">-</span><span class="numeral">2</span><span class="main">)</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">λ</span><span class="bound">b</span> <span class="bound">b'</span><span class="main">.</span> <span class="bound">b</span> <span class="main">=</span> <span class="bound">b'</span><span class="main">)</span> "</span></span></span> 
         <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
         <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">≤</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
           <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
          <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
        <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">&lt;=</span> <span class="skolem">ret</span> <span class="main">∧</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                    <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                    <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="skolem">ret</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_activateActor_def<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="improper">x</span>"</span></span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="improper">xa</span>"</span></span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
         <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoopE<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r' s s'
         <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r</span>"</span></span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ra r'a
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span> <span class="main">∧</span> <span class="skolem">tempi</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r'</span><span class="main">)</span> <span class="main">∧</span>
           sint <span class="main">(</span>ACB_C.actorID_C <span class="skolem">tempi</span><span class="main">)</span> <span class="main">=</span> <span class="free">anActorID</span> <span class="main">∧</span> sint <span class="main">(</span>ACB_C.state_C <span class="skolem">tempi</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'a</span> <span class="main">∧</span> <span class="skolem">r'a</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span> <span class="main">∧</span> <span class="skolem">tempi</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r'</span><span class="main">)</span> <span class="main">∧</span>
           sint <span class="main">(</span>ACB_C.actorID_C <span class="skolem">tempi</span><span class="main">)</span> <span class="main">=</span> <span class="free">anActorID</span> <span class="main">∧</span> sint <span class="main">(</span>ACB_C.state_C <span class="skolem">tempi</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'a</span> <span class="main">∧</span> <span class="skolem">r'a</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span> <span class="main">∧</span> <span class="skolem">tempi</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r'</span><span class="main">)</span> <span class="main">∧</span>
           sint <span class="main">(</span>ACB_C.actorID_C <span class="skolem">tempi</span><span class="main">)</span> <span class="main">=</span> <span class="free">anActorID</span> <span class="main">∧</span> sint <span class="main">(</span>ACB_C.state_C <span class="skolem">tempi</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'a</span> <span class="main">∧</span> <span class="skolem">r'a</span> <span class="main">&lt;</span> <span class="skolem">ret</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">tempj</span> <span class="bound">s</span><span class="main">.</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span> <span class="main">∧</span> <span class="skolem">tempi</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r'</span><span class="main">)</span> <span class="main">∧</span>
           sint <span class="main">(</span>ACB_C.actorID_C <span class="skolem">tempi</span><span class="main">)</span> <span class="main">=</span> <span class="free">anActorID</span> <span class="main">∧</span> sint <span class="main">(</span>ACB_C.state_C <span class="skolem">tempi</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'a</span> <span class="main">∧</span> <span class="skolem">r'a</span> <span class="main">&lt;</span> <span class="skolem">ret</span>
           <span class="main">∧</span> <span class="bound">tempj</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r'a</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">pj</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="skolem">r'</span> <span class="main">&lt;</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">pi</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> nat <span class="skolem">r'</span> <span class="main">∧</span> ACB.actorID <span class="skolem">pi</span> <span class="main">=</span> <span class="free">anActorID</span> <span class="main">∧</span> ACB.state <span class="skolem">pi</span> <span class="main">=</span> actorState.ACTOR_STATE_RUNNING
              <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'a</span> <span class="main">∧</span> <span class="skolem">r'a</span> <span class="main">&lt;</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="bound">pj</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> nat <span class="skolem">r'a</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> tempj pj
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre2<span class="main">)</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
             <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def swarmListEqual_def swarmInfoEqual_def int64Equal_def
             <span class="keyword1"><span class="command">using</span></span> compare_string compare_string_1
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">smt</span> fst_conv mem_Collect_eq nat_0_le snd_conv<span class="main">)</span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
             <span class="keyword1"><span class="command">proof</span></span> <span class="language"><span class="operator">-</span></span>
                <span class="keyword3"><span class="command">fix</span></span> <span class="skolem">x</span> <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span>scheduler <span class="main">×</span> char list list<span class="main">)</span> <span class="main">×</span> lifted_globals"</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">s</span> <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"scheduler <span class="main">×</span> char list list"</span></span></span> <span class="keyword2"><span class="keyword">and</span></span> <span class="skolem">t</span> <span class="main">::</span> <span class="quoted"><span class="language">lifted_globals</span></span>
                <span class="keyword3"><span class="command">assume</span></span> a1<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"stringEqual <span class="free">aPluName</span> <span class="free">aPluNameC</span>"</span></span></span>
                <span class="keyword3"><span class="command">assume</span></span> a2<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="skolem">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">pi</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="skolem">s</span><span class="main">)</span> <span class="main">!</span> nat <span class="skolem">r'</span> <span class="main">∧</span> ACB.actorID <span class="skolem">pi</span> <span class="main">=</span> <span class="free">anActorID</span> <span class="main">∧</span> ACB.state <span class="skolem">pi</span> <span class="main">=</span> actorState.ACTOR_STATE_RUNNING <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'a</span> <span class="main">∧</span> <span class="skolem">r'a</span> <span class="main">&lt;</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">pj</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="skolem">s</span><span class="main">)</span> <span class="main">!</span> nat <span class="skolem">r'a</span><span class="main">)</span> <span class="main">∧</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="skolem">t</span> <span class="main">∧</span> <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">t</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">t</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'</span> <span class="main">∧</span> <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret</span> <span class="main">∧</span> <span class="skolem">tempi</span> <span class="main">=</span> heap_ACB_C <span class="skolem">t</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">t</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">t</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r'</span><span class="main">)</span> <span class="main">∧</span> sint <span class="main">(</span>ACB_C.actorID_C <span class="skolem">tempi</span><span class="main">)</span> <span class="main">=</span> <span class="free">anActorID</span> <span class="main">∧</span> sint <span class="main">(</span>ACB_C.state_C <span class="skolem">tempi</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r'a</span> <span class="main">∧</span> <span class="skolem">r'a</span> <span class="main">&lt;</span> <span class="skolem">ret</span> <span class="main">∧</span> <span class="skolem">tempj</span> <span class="main">=</span> heap_ACB_C <span class="skolem">t</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">t</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">t</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="skolem">r'a</span><span class="main">)</span>"</span></span></span>
              <span class="keyword3"><span class="command">assume</span></span> a3<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">x</span> <span class="main">∈</span> <span class="main">{</span><span class="bound">p</span><span class="main">.</span> <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> int <span class="main">(</span>length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">r</span><span class="main">.</span> ACB.actorID <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>ACB_C.actorID_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stringEqual <span class="main">(</span>ACB.name <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.name_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> ACB.taskID <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>taskID_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stringEqual <span class="main">(</span>taskName <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>taskName_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> taskInfoEqual <span class="main">(</span>ACB.taskInfo <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.taskInfo_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stateACBEqual <span class="main">(</span>ACB.state <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.state_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>stringEqual <span class="main">(</span>swarmName <span class="main">(</span>pSwarmInfo <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>swarmName_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> swarmID <span class="main">(</span>pSwarmInfo <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> int32Equal <span class="main">(</span>swarmPrio <span class="main">(</span>pSwarmInfo <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stateACBEqual <span class="main">(</span>SwarmInfo.state <span class="main">(</span>pSwarmInfo <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> int32Equal <span class="main">(</span>prio <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>prio_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">r</span><span class="main">.</span> stringEqual <span class="main">(</span>swarmName <span class="main">(</span>swarmList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>swarmName_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> swarmID <span class="main">(</span>swarmList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> int32Equal <span class="main">(</span>swarmPrio <span class="main">(</span>swarmList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stateACBEqual <span class="main">(</span>SwarmInfo.state <span class="main">(</span>swarmList <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> actorNo <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>actorNo_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> nSwarm <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> int32Equal <span class="main">(</span>scheNum <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>scheNum_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> busListEqual <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">∧</span> scheMsgQueueEqual <span class="main">(</span>scheMsgQueue <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">∧</span> actorPluginInfoListEqual <span class="main">(</span>toPauseActors <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">∧</span> actorPluginInfoListEqual <span class="main">(</span>minPrioActors <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">∧</span> actorPluginInfoListEqual <span class="main">(</span>finishingActors <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span><span class="main">}</span>"</span></span></span>
                <span class="keyword3"><span class="command">assume</span></span> a4<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">x</span> <span class="main">=</span> <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span>"</span></span></span>
                <span class="keyword3"><span class="command">assume</span></span> a5<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"compare' <span class="skolem">t</span> <span class="main">(</span>ACB_C.name_C <span class="skolem">tempj</span><span class="main">)</span> <span class="free">aPluNameC</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="skolem">t</span> <span class="main">(</span>pSwarmInfo_C <span class="skolem">tempj</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="skolem">t</span> <span class="main">(</span>pSwarmInfo_C <span class="skolem">tempi</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">∀</span><span class="bound">cs</span> <span class="bound">p</span> <span class="bound">csa</span> <span class="bound">pa</span> <span class="bound">l</span><span class="main">.</span> <span class="main">¬</span> stringEqual <span class="bound">cs</span> <span class="bound">p</span> <span class="main">∨</span> <span class="main">¬</span> stringEqual <span class="bound">csa</span> <span class="bound">pa</span> <span class="main">∨</span> compare' <span class="bound">l</span> <span class="bound">p</span> <span class="bound">pa</span> <span class="main">≠</span> <span class="main">0</span> <span class="main">∧</span> compare' <span class="bound">l</span> <span class="bound">pa</span> <span class="bound">p</span> <span class="main">≠</span> <span class="main">0</span> <span class="main">∨</span> <span class="bound">cs</span> <span class="main">=</span> <span class="bound">csa</span>"</span></span></span>
                  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">meson</span> compare_str3<span class="main">)</span></span>
                <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> f6<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">¬</span> stringEqual <span class="main">(</span>ACB.name <span class="skolem">pj</span><span class="main">)</span> <span class="main">(</span>ACB_C.name_C <span class="skolem">tempj</span><span class="main">)</span> <span class="main">∨</span> ACB.name <span class="skolem">pj</span> <span class="main">=</span> <span class="free">aPluName</span>"</span></span></span>
                  <span class="keyword1"><span class="command">using</span></span> a1 <span class="keyword1"><span class="command">using</span></span> a5 <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span> <span class="comment1">(* &gt; 1.0 s, timed out *)</span>
                <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> int <span class="main">(</span>length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">n</span><span class="main">.</span> ACB.actorID <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>ACB_C.actorID_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stringEqual <span class="main">(</span>ACB.name <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.name_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> ACB.taskID <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>taskID_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stringEqual <span class="main">(</span>taskName <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>taskName_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> taskInfoEqual <span class="main">(</span>ACB.taskInfo <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.taskInfo_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stateACBEqual <span class="main">(</span>ACB.state <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.state_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>stringEqual <span class="main">(</span>swarmName <span class="main">(</span>pSwarmInfo <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>swarmName_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> swarmID <span class="main">(</span>pSwarmInfo <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> int32Equal <span class="main">(</span>swarmPrio <span class="main">(</span>pSwarmInfo <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stateACBEqual <span class="main">(</span>SwarmInfo.state <span class="main">(</span>pSwarmInfo <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> int32Equal <span class="main">(</span>prio <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>prio_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">n</span><span class="main">.</span> stringEqual <span class="main">(</span>swarmName <span class="main">(</span>swarmList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>swarmName_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> swarmID <span class="main">(</span>swarmList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> int32Equal <span class="main">(</span>swarmPrio <span class="main">(</span>swarmList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stateACBEqual <span class="main">(</span>SwarmInfo.state <span class="main">(</span>swarmList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> actorNo <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>actorNo_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> nSwarm <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> int32Equal <span class="main">(</span>scheNum <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>scheNum_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> busListEqual <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> scheMsgQueueEqual <span class="main">(</span>scheMsgQueue <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> actorPluginInfoListEqual <span class="main">(</span>toPauseActors <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> actorPluginInfoListEqual <span class="main">(</span>minPrioActors <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> actorPluginInfoListEqual <span class="main">(</span>finishingActors <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                  <span class="keyword1"><span class="command">using</span></span> a4 a3 <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">force</span></span>
                <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted"><span class="language">"sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> int <span class="main">(</span>length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">n</span><span class="main">.</span> ACB.actorID <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>ACB_C.actorID_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stringEqual <span class="main">(</span>ACB.name <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.name_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> ACB.taskID <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>taskID_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stringEqual <span class="main">(</span>taskName <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>taskName_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> taskInfoEqual <span class="main">(</span>ACB.taskInfo <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.taskInfo_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stateACBEqual <span class="main">(</span>ACB.state <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.state_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stringEqual <span class="main">(</span>swarmName <span class="main">(</span>pSwarmInfo <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>swarmName_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> swarmID <span class="main">(</span>pSwarmInfo <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> int32Equal <span class="main">(</span>swarmPrio <span class="main">(</span>pSwarmInfo <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stateACBEqual <span class="main">(</span>SwarmInfo.state <span class="main">(</span>pSwarmInfo <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> int32Equal <span class="main">(</span>prio <span class="main">(</span>acbList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>prio_C <span class="main">(</span>heap_ACB_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">n</span><span class="main">.</span> stringEqual <span class="main">(</span>swarmName <span class="main">(</span>swarmList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>swarmName_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> swarmID <span class="main">(</span>swarmList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> int32Equal <span class="main">(</span>swarmPrio <span class="main">(</span>swarmList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stateACBEqual <span class="main">(</span>SwarmInfo.state <span class="main">(</span>swarmList <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="bound">n</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">n</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> actorNo <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>actorNo_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> nSwarm <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> int32Equal <span class="main">(</span>scheNum <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>scheNum_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> busListEqual <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> scheMsgQueueEqual <span class="main">(</span>scheMsgQueue <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> actorPluginInfoListEqual <span class="main">(</span>toPauseActors <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> actorPluginInfoListEqual <span class="main">(</span>minPrioActors <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> actorPluginInfoListEqual <span class="main">(</span>finishingActors <span class="main">(</span>fst <span class="main">(</span>fst <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>snd <span class="main">(</span><span class="skolem">s</span><span class="main">,</span> <span class="skolem">t</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
                <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted"><span class="language">"ACB.name <span class="skolem">pj</span> <span class="main">=</span> <span class="free">aPluName</span> <span class="main">∧</span> swarmID <span class="main">(</span>pSwarmInfo <span class="skolem">pj</span><span class="main">)</span> <span class="main">=</span> swarmID <span class="main">(</span>pSwarmInfo <span class="skolem">pi</span><span class="main">)</span>"</span></span></span>
                  <span class="keyword1"><span class="command">using</span></span> f6 a5 a2 <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> fst_conv nat_0_le snd_conv<span class="main">)</span></span>
          <span class="keyword1"><span class="command">qed</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre2<span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b
              <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def stateACBEqual_def impl_ACTOR_STATE_RUNNING_def
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> actorState.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>13<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span> nat_0_le<span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b
              <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def stateACBEqual_def impl_ACTOR_STATE_RUNNING_def
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> Word.sint_0 if_P_1_0_neq_0 int_nat_eq not_numeral_less_one numeral_less_iff semiring_norm<span class="main"><span class="main">(</span></span>76<span class="main"><span class="main">)</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def modify_def get_def put_def NonDetMonad.bind_def return_def throwError_def
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def stringPtrListEqual_def int64PtrListEqual_def pluginPtrListEqual_def pluginEqual_def
              <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def
              <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
              <span class="keyword1"><span class="command">unfolding</span></span> pluginInfoListEqual_def pluginInfoEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
              <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
              <span class="keyword1"><span class="command">unfolding</span></span> pluginInfoListEqual_def pluginInfoEqual_def
              <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
              <span class="keyword1"><span class="command">unfolding</span></span> pluginInfoListEqual_def pluginInfoEqual_def
              <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b ra 
              <span class="keyword1"><span class="command">unfolding</span></span> int64Equal_def
              <span class="keyword1"><span class="command">using</span></span> ACBprio_Update1 ACBprio_Update1_aux
              <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
              <span class="keyword1"><span class="command">using</span></span> ACBprio_Update2 ACBprio_Update2_aux
              <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
              <span class="keyword1"><span class="command">using</span></span> ACBprio_Update3 ACBprio_Update3_aux
              <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
              <span class="keyword1"><span class="command">using</span></span> ACBprio_Update4 ACBprio_Update4_aux
              <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
              <span class="keyword1"><span class="command">using</span></span> ACBprio_Update5 ACBprio_Update5_aux
              <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
              <span class="keyword1"><span class="command">using</span></span> ACBprio_Update6 ACBprio_Update6_aux
              <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
       <span class="keyword1"><span class="command">unfolding</span></span> swarmInfoEqual_def
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux1 ACBprio_Update7_1
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
       <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux2 ACBprio_Update7_2
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
       <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux3 ACBprio_Update7_3
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
       <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux4  ACBprio_Update7_4
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b rb
       <span class="keyword1"><span class="command">unfolding</span></span> int32Equal_def
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> ACBprio_Update10_aux<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">insert</span> ACBprio_Update10 ACBprio_Update10_2<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">rb</span> <span class="main">=</span>  <span class="skolem">r'a</span>"</span></span></span><span class="main">)</span></span>
       <span class="keyword1"><span class="command">unfolding</span></span> ptr_add_def
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">fastforce</span></span>
       <span class="keyword1"><span class="command">proof</span></span> <span class="language"><span class="operator">-</span></span>
          <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="keyword1">PTR</span><span class="main">(</span>ACB_C<span class="main">)</span> <span class="main">(</span>ptr_val <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">+</span> of_int <span class="main">(</span>int <span class="skolem">rb</span><span class="main">)</span> <span class="main">*</span> of_nat <span class="main">(</span>size_of <span class="main">(</span><span class="keyword1">TYPE</span><span class="main">(</span>ACB_C<span class="main">)</span><span class="main">::</span>ACB_C itself<span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>ACB_C<span class="main">)</span> <span class="main">(</span>ptr_val <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">+</span> of_int <span class="skolem">r'a</span> <span class="main">*</span> of_nat <span class="main">(</span>size_of <span class="main">(</span><span class="keyword1">TYPE</span><span class="main">(</span>ACB_C<span class="main">)</span><span class="main">::</span>ACB_C itself<span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">::</span>ACB_C ptr<span class="main">)</span>"</span></span></span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">∃</span><span class="bound">p</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>ACB_C<span class="main">)</span> <span class="main">(</span>ptr_val <span class="main">(</span><span class="bound">p</span><span class="main">::</span>ACB_C ptr<span class="main">)</span> <span class="main">+</span> of_int <span class="main">(</span>int <span class="main">(</span><span class="skolem">rb</span> <span class="main">*</span> size_of <span class="main">(</span><span class="keyword1">TYPE</span><span class="main">(</span>ACB_C<span class="main">)</span><span class="main">::</span>ACB_C itself<span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">::</span>ACB_C ptr<span class="main">)</span> <span class="main">=</span> <span class="keyword1">PTR</span><span class="main">(</span>ACB_C<span class="main">)</span> <span class="main">(</span>ptr_val <span class="bound">p</span> <span class="main">+</span> of_int <span class="main">(</span><span class="skolem">r'a</span> <span class="main">*</span> int <span class="main">(</span>size_of <span class="main">(</span><span class="keyword1">TYPE</span><span class="main">(</span>ACB_C<span class="main">)</span><span class="main">::</span>ACB_C itself<span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted"><span class="language">"int <span class="skolem">rb</span> <span class="main">=</span> <span class="skolem">r'a</span>"</span></span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> CTypesDefs.ptr_add_def ptr_equal<span class="main">)</span></span>
        <span class="keyword1"><span class="command">qed</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> swarmInfoEqual_def
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> int_nat_eq nth_list_update_neq of_nat_less_iff<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def modify_def get_def put_def NonDetMonad.bind_def return_def returnOk_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ra
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> throwError_def returnOk_def validE_def
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r'</span> <span class="main">=</span> <span class="skolem">ra</span>"</span></span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span>
         <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> nth_list_update_neq<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ra
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> throwError_def returnOk_def validE_def
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_activateActor_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ra
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span> 
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_activateActor_def<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span> 
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_activateActor_def<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span> 
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_activateActor_def<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_activateActor_aux2<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> aPluName <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluName</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r'<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r'</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ret <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">ret</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> anActorID <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">anActorID</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command">unfolding</span></span> whileLoop_terminatesE_def throwError_def returnOk_def
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r <span class="comment1">(*whileLoop_terminates*)</span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoop_terminates_inv
           <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span>  sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span> Inl <span class="bound">a</span> <span class="main">⇒</span> <span class="main">0</span> <span class="main">|</span>
                         Inr <span class="bound">t</span> <span class="main">⇒</span> <span class="main">(</span>nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> nat <span class="bound">t</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.lift_def
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> finish_puase_apiList <span class="main">)</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_activateActor_def<span class="main">)</span></span> 
          <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">force</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span><span class="main">≤</span> int <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
      <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
     <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
     <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
          <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">j</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">j</span><span class="main">&lt;=</span><span class="skolem">ret</span> <span class="main">∧</span> sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
               <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="skolem">ret</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_activateActor_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r'
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_activateActor_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_activateActor_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_activateActor_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_activateActor_aux1<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> aPluName <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">aPluName</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> whileLoop_terminatesE_def throwError_def returnOk_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r s' <span class="comment1">(*whileLoop_terminates*)</span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoop_terminates_inv
           <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span>  sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span> Inl <span class="bound">a</span> <span class="main">⇒</span> <span class="main">0</span> <span class="main">|</span>
                         Inr <span class="bound">t</span> <span class="main">⇒</span> <span class="main">(</span>nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> nat <span class="bound">t</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.lift_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> finish_puase_apiList<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
          <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">j</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="bound">j</span> <span class="main">∧</span> <span class="bound">j</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">s'</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">s'</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
                  sche_valid_activateActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                <span class="skolem">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
               <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> nat <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def sche_valid_activateActor_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">fastforce</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

      


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹yieldActor  verify›</span></span></span>

<span class="keyword1"><span class="command">axiomatization</span></span>
  <span class="keyword2"><span class="keyword">where</span></span> prio_sint_comp1 <span class="main">:</span> 
     <span class="quoted"><span class="quoted"><span class="language">"MAX_PRIORITY <span class="main">≤</span> sint <span class="free">t</span> <span class="main">⟹</span> impl_MAX_PRIORITY <span class="main">≤</span> <span class="free">t</span>"</span></span></span>
  <span class="keyword2"><span class="keyword">and</span></span> prio_sint_comp2 <span class="main">:</span> 
     <span class="quoted"><span class="quoted"><span class="language">"impl_MAX_PRIORITY <span class="main">≤</span> <span class="free">t</span> <span class="main">⟹</span> MAX_PRIORITY <span class="main">≤</span> sint <span class="free">t</span>"</span></span></span>
  <span class="keyword2"><span class="keyword">and</span></span> prio_sint_add1 <span class="main">:</span> 
     <span class="quoted"><span class="quoted"><span class="language">"<span class="free">m</span> <span class="main">=</span> sint <span class="free">n</span> <span class="main">⟹</span> <span class="free">m</span> <span class="main">+</span> <span class="main">1</span> <span class="main">=</span> sint <span class="main">(</span><span class="free">n</span><span class="main">+</span><span class="main">1</span><span class="main">)</span>"</span></span></span>


<span class="keyword1"><span class="command">definition</span></span> sche_valid_yieldActor <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_yieldActor</span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="main">∧</span>
              is_valid_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="main">0</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="main">(</span><span class="main">∀</span><span class="bound">i</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span> <span class="main">&lt;</span> sint<span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟶</span> is_valid_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
<span class="keyword1"><span class="command">lemma</span></span> des_impl_yieldActor_aux<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">tmpi</span><span class="main">.</span>
       no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_yieldActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="free">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="free">r'</span> <span class="main">∧</span> <span class="free">r'</span> <span class="main">&lt;</span> <span class="free">ret'</span><span class="main">)</span>
        <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACB_C.actorID_C <span class="bound">tmpi</span><span class="main">)</span> <span class="main">=</span> <span class="free">anActorID</span> <span class="main">∧</span> sint <span class="main">(</span>ACB_C.state_C <span class="bound">tmpi</span><span class="main">)</span> <span class="main">=</span> sint impl_ACTOR_STATE_RUNNING<span class="main">)</span>
          <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> impl_MAX_PRIORITY <span class="main">≤</span> prio_C <span class="bound">tmpi</span><span class="main">)</span>
            <span class="main">(</span>throwError <span class="main">0</span><span class="main">)</span>
            <span class="main">(</span><span class="keyword1">do</span> 
                <span class="bound">y</span> <span class="main">&lt;-</span>
                modify
                 <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C_update
                       <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="bound">a</span><span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">r'</span> <span class="main">:=</span>
                                prio_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> prio_C <span class="bound">tmpi</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span> <span class="bound">tmpi</span><span class="main">)</span><span class="main">)</span>
                       <span class="bound">s</span><span class="main">)</span><span class="main">;</span>
                throwError <span class="main">(</span><span class="main">-</span> <span class="main">1</span><span class="main">)</span>
             <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
              returnOk <span class="main">(</span><span class="free">r'</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> returnOk_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_yieldActor_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span></span>


<span class="keyword1"><span class="command">lemma</span></span> des_impl_yieldActor  <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> True <span class="main">∧</span> <span class="bound">r'</span><span class="main">=</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> False <span class="main">∧</span> <span class="bound">r'</span><span class="main">=</span><span class="main">0</span><span class="main">)</span><span class="main">)</span> 
   <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True <span class="main">)</span> <span class="main">(</span>sche_valid_yieldActor <span class="free">schePtr</span><span class="main">)</span> 
   <span class="main">(</span>Des_yieldActor <span class="free">anActorID</span><span class="main">)</span> <span class="main">(</span>Impl_yieldActor <span class="free">schePtr</span> <span class="free">anActorID</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_yieldActor_def Impl_yieldActor_def ACBVectorSize'_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_yieldActor <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_yieldActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="bound">ret</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_yieldActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="bound">ret</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret' len
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_yieldActor <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span> 
        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">rDes</span> <span class="bound">rImpl</span><span class="main">.</span> <span class="main">(</span><span class="bound">rImpl</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span> <span class="main">∧</span> <span class="bound">rDes</span> <span class="main">=</span> <span class="skolem">len</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">rImpl</span> <span class="main">=</span> int <span class="bound">rDes</span> <span class="main">∧</span> <span class="bound">rDes</span> <span class="main">≤</span> <span class="skolem">len</span> <span class="main">∧</span> <span class="bound">rImpl</span> <span class="main">≥</span> <span class="main">0</span><span class="main">)</span>"</span></span></span></span> <span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
      <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">≤</span> <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
     <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
      <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">&lt;=</span><span class="skolem">ret'</span> <span class="main">∧</span> sche_valid_yieldActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_yieldActor_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_yieldActor_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_condition_P<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def modify_def get_def put_def NonDetMonad.bind_def return_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> catch_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">e</span> <span class="bound">e'</span><span class="main">.</span> <span class="main">(</span><span class="bound">e</span> <span class="main">=</span> <span class="skolem">len</span><span class="main">+</span><span class="main">1</span> <span class="main">∧</span> <span class="bound">e'</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">e</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> <span class="bound">e'</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span> <span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">λ</span><span class="bound">b</span> <span class="bound">b'</span><span class="main">.</span> int <span class="bound">b</span> <span class="main">=</span> <span class="bound">b'</span> <span class="main">∧</span> <span class="bound">b</span> <span class="main">≤</span> <span class="skolem">len</span> <span class="main">∧</span> <span class="bound">b</span> <span class="main">≥</span> <span class="main">0</span><span class="main">)</span> "</span></span></span> 
                                       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_yieldActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
      <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">≤</span> <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
     <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">-</span> <span class="bound">t</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
      <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span><span class="main">&lt;=</span><span class="skolem">ret'</span> <span class="main">∧</span> sche_valid_yieldActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_yieldActor_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_yieldActor_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="improper">x</span>"</span></span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="improper">xa</span>"</span></span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoopE<span class="main">)</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r' s s'
     <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r</span>"</span></span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r'
     <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_yieldActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">r'</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="skolem">r'</span><span class="main">≤</span><span class="skolem">ret'</span> <span class="main">∧</span>
              <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_yieldActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">r'</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="skolem">r'</span><span class="main">≤</span><span class="skolem">ret'</span> <span class="main">∧</span>
              <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_yieldActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">r'</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="skolem">r'</span><span class="main">≤</span><span class="skolem">ret'</span> <span class="main">∧</span>
              <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">rf</span> <span class="bound">s</span><span class="main">.</span> sche_valid_yieldActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">r'</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="skolem">r'</span><span class="main">≤</span><span class="skolem">ret'</span> <span class="main">∧</span>
              <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="bound">rf</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">r</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">rf</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> <span class="skolem">len</span> <span class="main">∧</span> <span class="skolem">r</span><span class="main">≥</span><span class="main">0</span> <span class="main">∧</span> <span class="bound">rf</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">r</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def  int64Equal_def stateACBEqual_def
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
       <span class="keyword1"><span class="command">using</span></span> ded_imp_pluginRUNNING <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">force</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
       <span class="keyword1"><span class="command">unfolding</span></span> impl_ACTOR_STATE_RUNNING_def
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">force</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> returnOk_def 
       <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def guard_def return_def put_def get_def NonDetMonad.bind_def
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
       <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def int32Equal_def
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">insert</span> prio_sint_comp1<span class="main">)</span></span>
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
       <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def int32Equal_def
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">insert</span> prio_sint_comp2<span class="main">)</span></span>
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> gets_def corres_underlying_def modify_def get_def put_def NonDetMonad.bind_def return_def throwError_def
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> tempi p
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> <span class="skolem">len</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="skolem">r</span>"</span></span></span> 
        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_yieldActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
             int <span class="skolem">r</span> <span class="main">≤</span> <span class="skolem">ret'</span> <span class="main">∧</span>
             <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">rDes</span> <span class="bound">rImpl</span><span class="main">.</span> True"</span></span></span></span> <span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_yieldActor_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
       <span class="keyword1"><span class="command">unfolding</span></span> gets_def corres_underlying_def modify_def get_def put_def NonDetMonad.bind_def return_def throwError_def
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> swarmListEqual_def swarmInfoEqual_def<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> busListEqual_def busPtrEqual_def<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> stringPtrListEqual_def<span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> int64PtrListEqual_def<span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> pluginPtrListEqual_def  pluginEqual_def<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>   <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def
       <span class="keyword1"><span class="command">unfolding</span></span> taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def
       <span class="keyword1"><span class="command">unfolding</span></span> taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def
       <span class="keyword1"><span class="command">unfolding</span></span> taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b ra <span class="keyword1"><span class="command">unfolding</span></span> int64Equal_def 
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> ACBprio_Update1_aux<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"ACB.actorID <span class="main">(</span><span class="main">(</span>acbList <span class="skolem">a</span><span class="main">)</span><span class="main">[</span><span class="skolem">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="skolem">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> prio <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="skolem">r</span><span class="main">)</span> <span class="main">+</span> <span class="main">1</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="skolem">ra</span> <span class="main">)</span> <span class="main">=</span> ACB.actorID <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="skolem">ra</span><span class="main">)</span>"</span></span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> ACBprio_Update1<span class="main">)</span></span>
       <span class="keyword1"><span class="command">using</span></span> ptr_equal <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">fastforce</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>   <span class="keyword1"><span class="command">using</span></span> ACBprio_Update2 ACBprio_Update2_aux
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> nth_list_update_neq<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">using</span></span> ACBprio_Update3 ACBprio_Update3_aux
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> nth_list_update_neq<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">using</span></span> ACBprio_Update4 ACBprio_Update4_aux
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> nth_list_update_neq<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">using</span></span> ACBprio_Update5 ACBprio_Update5_aux
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> nth_list_update_neq<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">using</span></span> ACBprio_Update6 ACBprio_Update6_aux
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> nth_list_update_neq<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmInfoEqual_def
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux1 ACBprio_Update7_1
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> of_nat_eq_iff ptr_equal<span class="main">)</span></span>
       <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux2 ACBprio_Update7_2
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> of_nat_eq_iff ptr_equal<span class="main">)</span></span>
       <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux3 ACBprio_Update7_3
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> of_nat_eq_iff ptr_equal<span class="main">)</span></span>
       <span class="keyword1"><span class="command">using</span></span> ACBprio_Update7_aux4  ACBprio_Update7_4
       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> of_nat_eq_iff ptr_equal<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b ra
       <span class="keyword1"><span class="command">unfolding</span></span> int32Equal_def
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> ACBprio_Update10_aux<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">insert</span> ACBprio_Update10 ACBprio_Update10_2<span class="main">)</span></span>
       <span class="keyword1"><span class="command">proof</span></span> <span class="language"><span class="operator">-</span></span>
         <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r'</span> <span class="main">=</span> int <span class="skolem">r</span>"</span></span></span>
         <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">len</span> <span class="main">=</span> length <span class="main">(</span>acbList <span class="skolem">a</span><span class="main">)</span>"</span></span></span>
         <span class="keyword3"><span class="command">assume</span></span> a1<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="skolem">a</span><span class="main">)</span>"</span></span></span>
         <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">p</span> <span class="main">=</span> acbList <span class="skolem">a</span> <span class="main">!</span> <span class="skolem">r</span>"</span></span></span>
         <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">tempi</span> <span class="main">=</span> heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">r</span><span class="main">)</span>"</span></span></span>
         <span class="keyword3"><span class="command">assume</span></span> a2<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">∀</span><span class="bound">r</span><span class="main">.</span> int64Equal <span class="main">(</span>ACB.actorID <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.actorID_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stringEqual <span class="main">(</span>ACB.name <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.name_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> int64Equal <span class="main">(</span>ACB.taskID <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>taskID_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stringEqual <span class="main">(</span>taskName <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>taskName_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> taskInfoEqual <span class="main">(</span>ACB.taskInfo <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.taskInfo_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> stateACBEqual <span class="main">(</span>ACB.state <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB_C.state_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> swarmInfoEqual <span class="main">(</span>pSwarmInfo <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="skolem">b</span> <span class="main">∧</span> prio <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="bound">r</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>prio_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
         <span class="keyword3"><span class="command">assume</span></span> <span class="quoted"><span class="quoted"><span class="language">"ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">ra</span> <span class="main">=</span> ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">r</span>"</span></span></span>
         <span class="keyword1"><span class="command">then</span></span> <span class="keyword1"><span class="command">have</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">ra</span> <span class="main">=</span> <span class="skolem">r</span>"</span></span></span>
           <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">meson</span> of_nat_eq_iff ptr_equal<span class="main">)</span></span>
         <span class="keyword1"><span class="command">then</span></span> <span class="keyword3"><span class="command">show</span></span> <span class="quoted"><span class="quoted"><span class="language">"prio <span class="main">(</span><span class="main">(</span>acbList <span class="skolem">a</span><span class="main">)</span> <span class="main">[</span><span class="skolem">r</span> <span class="main">:=</span> <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="skolem">r</span><span class="main">)</span><span class="main">⦇</span>prio <span class="main">:=</span> prio <span class="main">(</span>acbList <span class="skolem">a</span> <span class="main">!</span> <span class="skolem">r</span><span class="main">)</span> <span class="main">+</span> <span class="main">1</span><span class="main">⦈</span><span class="main">]</span> <span class="main">!</span> <span class="skolem">ra</span><span class="main">)</span> <span class="main">=</span> sint <span class="main">(</span>prio_C <span class="main">(</span>heap_ACB_C <span class="skolem">b</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="skolem">b</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">r</span><span class="main">)</span><span class="main">)</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span>"</span></span></span>
           <span class="keyword1"><span class="command">using</span></span> a2 a1 <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> prio_sint_add1<span class="main">)</span></span>
       <span class="keyword1"><span class="command">qed</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> nth_list_update_neq<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> nth_list_update_neq<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> nth_list_update_neq<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> nth_list_update_neq<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> nth_list_update_neq<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> nth_list_update_neq<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> nth_list_update_neq<span class="main">)</span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> swarmInfoEqual_def
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> nth_list_update_neq<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>    <span class="keyword1"><span class="command">unfolding</span></span>  throwError_def returnOk_def modify_def  gets_def get_def put_def NonDetMonad.bind_def return_def NonDetMonad.valid_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span>  throwError_def returnOk_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_yieldActor_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_yieldActor_def<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_yieldActor_def<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_seq2<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_yieldActor_def<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_yieldActor_aux<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> ret' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="language"><span class="skolem">ret'</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
   <span class="keyword1"><span class="command">unfolding</span></span> whileLoop_terminatesE_def throwError_def returnOk_def
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r s'
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> finish_puase_apiList<span class="main">)</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoop_terminates_inv
           <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_yieldActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span> Inl <span class="bound">a</span> <span class="main">⇒</span> <span class="main">0</span> <span class="main">|</span>
                         Inr <span class="bound">t</span> <span class="main">⇒</span> <span class="main">(</span>nat <span class="skolem">ret'</span><span class="main">)</span> <span class="main">-</span> nat <span class="bound">t</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
   <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.lift_def
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">fastforce</span></span>
   <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_yieldActor_def
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>



<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹findFinishActors verify›</span></span></span>

<span class="keyword1"><span class="command">axiomatization</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> min_puase_apiList <span class="main">:</span> 
     <span class="quoted"><span class="quoted"><span class="language">"<span class="main">∀</span><span class="bound">i</span> <span class="bound">j</span><span class="main">.</span> ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C 
        <span class="free">b</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">i</span> <span class="main">≠</span> 
            ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C 
        <span class="free">b</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">j</span> <span class="main">∧</span> 
    minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">b</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">≠</span> toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">b</span> <span class="free">schePtr</span><span class="main">)</span>  "</span></span></span>

<span class="keyword1"><span class="command">axiomatization</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> fin_puase_apiList <span class="main">:</span> 
     <span class="quoted"><span class="quoted"><span class="language">"<span class="main">∀</span><span class="bound">i</span> <span class="bound">j</span> <span class="bound">b</span><span class="main">.</span> ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C 
        <span class="bound">b</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">i</span> <span class="main">≠</span> 
            ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C 
        <span class="bound">b</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">j</span> <span class="main">∧</span> 
    finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">b</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">≠</span> toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">b</span> <span class="free">schePtr</span><span class="main">)</span>  "</span></span></span>


<span class="keyword1"><span class="command">axiomatization</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> min_finish_apiList <span class="main">:</span> 
     <span class="quoted"><span class="quoted"><span class="language">"<span class="main">∀</span><span class="bound">i</span> <span class="bound">j</span><span class="main">.</span> ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C 
        <span class="free">b</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">i</span> <span class="main">≠</span> 
            ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C 
        <span class="free">b</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">b</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">j</span> <span class="main">∧</span> 
    minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">b</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">≠</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">b</span> <span class="free">schePtr</span><span class="main">)</span>  "</span></span></span>


<span class="keyword1"><span class="command">definition</span></span> sche_valid_findFinishActors<span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_findFinishActors</span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> 
          is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span> 
"</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_findFinishActors_aux0<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">it</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> <span class="free">r</span>  <span class="main">⦄</span>
       NonDetMonad_call.call <span class="main">(</span>Des_getActorPluginState <span class="main">(</span>PluginInfo.name <span class="main">(</span>plugins <span class="main">(</span>ACB.taskInfo <span class="free">it</span><span class="main">)</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>ACB.actorID <span class="free">it</span><span class="main">)</span><span class="main">)</span>
        <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span> <span class="main">!</span> <span class="free">raa</span><span class="main">,</span> snd <span class="bound">σ</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span> <span class="bound">b</span><span class="main">.</span> <span class="bound">σ</span><span class="main">)</span> 
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="free">it</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> <span class="free">r</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad_call.call_def NonDetMonad.valid_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_findFinishActors_aux1<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="free">ACBVecPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="free">ret'</span> <span class="main">=</span> Impl_ACBVectorSize <span class="free">ACBVecPtr</span> <span class="bound">s</span><span class="main">⦄</span>
       actorPluginInfoVectorPushback' <span class="free">v___ptr_to_struct_ActorPluginInfoVector_C'param</span>
        <span class="main">(</span>ActorPluginInfo_C <span class="main">(</span>ACB_C.actorID_C <span class="free">tmpACB</span><span class="main">)</span> <span class="main">(</span>ACB_C.name_C <span class="free">tmpACB</span><span class="main">)</span> <span class="main">(</span>ACB_C.state_C <span class="free">tmpACB</span><span class="main">)</span> <span class="main">(</span>ACB_C.taskInfo_C <span class="free">tmpACB</span><span class="main">)</span><span class="main">)</span> 
  <span class="main">⦃</span><span class="main">λ</span><span class="bound">yc</span> <span class="bound">s</span><span class="main">.</span>
      <span class="main">0</span> <span class="main">≤</span> <span class="numeral">2147483649</span> <span class="main">+</span> <span class="free">a</span> <span class="main">⟶</span> <span class="free">a</span> <span class="main">≤</span> <span class="numeral">2147483646</span> <span class="main">⟶</span>  is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span> <span class="main">⟶</span>
      sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="free">ACBVecPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="free">ret'</span> <span class="main">=</span> Impl_ACBVectorSize <span class="free">ACBVecPtr</span> <span class="bound">s</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoVectorPushback'_def sche_valid_findFinishActors_def Impl_ACBVectorSize_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_findFinishActors_aux2<span class="main">:</span>
    <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⦃</span><span class="main">λ</span><span class="bound">sa</span><span class="main">.</span> sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">sa</span> <span class="main">∧</span>  <span class="free">aa</span> <span class="main">&lt;</span> Impl_ACBVectorSize <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="free">s</span> <span class="main">∧</span>
           Impl_ACBVectorSize <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">sa</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="bound">sa</span> <span class="main">-</span> <span class="main">1</span> <span class="main">&lt;</span> Impl_ACBVectorSize <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="free">s</span><span class="main">⦄</span>
       actorPluginInfoVectorPushback' <span class="free">v___ptr_to_struct_ActorPluginInfoVector_C'param</span>
        <span class="main">(</span>ActorPluginInfo_C <span class="main">(</span>ACB_C.actorID_C <span class="free">ab</span><span class="main">)</span> <span class="main">(</span>ACB_C.name_C <span class="free">ab</span><span class="main">)</span> <span class="main">(</span>ACB_C.state_C <span class="free">ab</span><span class="main">)</span> <span class="main">(</span>ACB_C.taskInfo_C <span class="free">ab</span><span class="main">)</span><span class="main">)</span> 
     <span class="main">⦃</span><span class="main">λ</span><span class="bound">yb</span> <span class="bound">sa</span><span class="main">.</span>
          <span class="main">0</span> <span class="main">≤</span> <span class="numeral">2147483649</span> <span class="main">+</span> <span class="free">aa</span> <span class="main">⟶</span><span class="free">aa</span> <span class="main">≤</span> <span class="numeral">2147483646</span> <span class="main">⟶</span> is_valid_ActorScheduler_C <span class="bound">sa</span> <span class="free">schePtr</span> <span class="main">⟶</span>
          sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">sa</span> <span class="main">∧</span>  <span class="free">aa</span> <span class="main">&lt;</span> Impl_ACBVectorSize <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="free">s</span> <span class="main">∧</span>
          Impl_ACBVectorSize <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">sa</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="bound">sa</span> <span class="main">-</span> <span class="main">1</span> <span class="main">&lt;</span> Impl_ACBVectorSize <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="free">s</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoVectorPushback'_def sche_valid_findFinishActors_def Impl_ACBVectorSize_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_findFinishActors <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False
     <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span>sche_valid_findFinishActors <span class="free">schePtr</span><span class="main">)</span>
     Des_findFinishActors <span class="main">(</span>Impl_findFinishActors <span class="free">schePtr</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_findFinishActors_def Impl_findFinishActors_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="bound">ret</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> rv ACBVecPtr
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="skolem">ACBVecPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
           <span class="bound">ret</span> <span class="main">=</span> Impl_ACBVectorSize <span class="skolem">ACBVecPtr</span> <span class="bound">s</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> int <span class="bound">r</span> <span class="main">=</span> fst <span class="bound">r'</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret'
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoop_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">r</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span>  <span class="main">0</span> <span class="main">≤</span> <span class="bound">i</span> <span class="main">∧</span> <span class="bound">i</span> <span class="main">≤</span> <span class="skolem">ret'</span> <span class="main">∧</span> sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span> "</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">r</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span>  nat <span class="main">(</span><span class="skolem">ret'</span> <span class="main">-</span> <span class="bound">i</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> ACBVectorSize'_def actorPluginInfoVectorPushback'_def
                   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> Impl_checkActorPluginFinished_def pluginInfoVectorSize'_def 
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">r</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span>  <span class="main">0</span> <span class="main">≤</span> <span class="bound">i</span> <span class="main">∧</span> <span class="bound">i</span> <span class="main">≤</span> sint <span class="main">(</span>PluginInfoVector_C.length_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">xe</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
             <span class="free">xe</span> <span class="main">=</span> <span class="main">(</span>heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span>  <span class="main">∧</span> sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span> "</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">r</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span>  nat <span class="main">(</span>sint <span class="main">(</span>PluginInfoVector_C.length_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="free">xe</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">r</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span>  <span class="main">0</span> <span class="main">≤</span> <span class="bound">i</span> <span class="main">∧</span> <span class="bound">i</span> <span class="main">≤</span> <span class="free">xh</span> <span class="main">∧</span> sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span> "</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">r</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span>  nat <span class="main">(</span><span class="free">xh</span> <span class="main">-</span> <span class="bound">i</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def generalBusVectorSize'_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> Impl_getActorPluginState_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">insert</span> finish_puase_apiList<span class="main"><span class="keyword3">,</span></span><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span><span class="main">)</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">r</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span>  <span class="main">0</span> <span class="main">≤</span> <span class="bound">i</span> <span class="main">∧</span> <span class="bound">i</span> <span class="main">≤</span> sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">xj</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span> "</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">r</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span>  nat <span class="main">(</span>sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">xj</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def  getState'_def compare'_def Impl_getBusName_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> skip_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoop<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> Impl_ACBVectorSize_def schePtrEqual_def acbListPtrEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret' r
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">()</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span> 
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">r</span>"</span></span></span>  
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> snd <span class="bound">ret</span> <span class="main">=</span> <span class="bound">s</span> <span class="main">∧</span> fst <span class="bound">ret</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span>
                       <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">r</span><span class="main">)</span> "</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="main">(</span><span class="bound">r'</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> acbEqual <span class="bound">r'</span> <span class="bound">s</span> <span class="bound">r</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>  
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
                  corres_underlying_def return_def gets_def schePtrEqual_def acbListPtrEqual_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> acbEqual_def acbPtrEqual_def<span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> it a b
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">it</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">r</span>"</span></span></span> 
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  
                            <span class="skolem">a</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">r</span><span class="main">)</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span> <span class="bound">flag</span> <span class="bound">ret</span><span class="main">.</span> <span class="main">(</span><span class="bound">flag</span> <span class="main">=</span> True <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">flag</span> <span class="main">=</span> False <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span>  "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> acbEqual_def compare'_def compare_string zero_neq_neg_one<span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
          <span class="keyword1"><span class="command">unfolding</span></span> Des_checkActorPluginFinished_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span>   <span class="skolem">it</span> <span class="main">=</span> <span class="main">(</span><span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">r</span><span class="main">)</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span>  length <span class="main">(</span>plugins <span class="main">(</span>ACB.taskInfo <span class="skolem">it</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span>  <span class="bound">r</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span>   <span class="skolem">it</span> <span class="main">=</span> <span class="main">(</span><span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">r</span><span class="main">)</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span>  length <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span><span class="main">-</span>  <span class="bound">r</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
          <span class="keyword1"><span class="command">by</span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_findFinishActors_aux0<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> Impl_checkActorPluginFinished_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span>  <span class="main">0</span> <span class="main">≤</span> <span class="bound">i</span> <span class="main">∧</span>  <span class="bound">i</span> <span class="main">≤</span>  sint <span class="main">(</span>PluginInfoVector_C.length_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                       <span class="main">∧</span>   sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
        <span class="skolem">a</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">r</span><span class="main">)</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span>  nat <span class="main">(</span> sint <span class="main">(</span>PluginInfoVector_C.length_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def pluginInfoVectorSize'_def generalBusVectorSize'_def
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span>  <span class="main">0</span> <span class="main">≤</span> <span class="bound">i</span> <span class="main">∧</span>  <span class="bound">i</span> <span class="main">≤</span>   sint <span class="main">(</span>GeneralBusVector_C.length_C <span class="main">(</span>heap_GeneralBusVector_C <span class="bound">s</span> <span class="main">(</span> registeredBus_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                       <span class="main">∧</span>   sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
        <span class="skolem">a</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">r</span><span class="main">)</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span>  nat <span class="main">(</span> sint <span class="main">(</span>PluginInfoVector_C.length_C <span class="main">(</span>heap_PluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>plugins_C <span class="main">(</span>ACB_C.taskInfo_C <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def pluginInfoVectorSize'_def generalBusVectorSize'_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> Impl_getActorPluginState_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">insert</span> finish_puase_apiList<span class="main"><span class="keyword3">,</span></span><span class="operator">wpsimp</span><span class="main">)</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span>  <span class="main">0</span> <span class="main">≤</span> <span class="bound">i</span> <span class="main">∧</span>  <span class="bound">i</span> <span class="main">≤</span> sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">xg</span><span class="main">)</span><span class="main">)</span>
                       <span class="main">∧</span>   sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
        <span class="skolem">a</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">r</span><span class="main">)</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span>  nat <span class="main">(</span> sint <span class="main">(</span>nRegisteredPlugin_C <span class="main">(</span>heap_GeneralBus_C <span class="bound">s</span> <span class="free">xg</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
                              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def getState'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> Impl_getBusName_def 
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
        <span class="keyword1"><span class="command">unfolding</span></span> when_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 3
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> flag
          <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def guard_def actorPluginInfoVectorPushback'_def
                    return_def gets_def unknown_def select_def corres_underlying_def ACBVectorSize'_def
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>  
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def stringPtrListEqual_def
                    int64PtrListEqual_def pluginPtrListEqual_def pluginEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def guard_def
                    return_def gets_def  corres_underlying_def ACBVectorSize'_def 
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>   <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> int_nat_eq finish_puase_apiList<span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> it a b
        <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def guard_def
                  return_def gets_def  corres_underlying_def ACBVectorSize'_def 
         <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> int_nat_eq finish_puase_apiList<span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret' a  <span class="keyword1"><span class="command">unfolding</span></span> ACBVectorSize'_def  
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_findFinishActors_aux1<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command">by</span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>Impl_checkActorPluginFinished_hoare<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">insert</span> finish_puase_apiList<span class="main"><span class="keyword3">,</span></span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> non_fail_super<span class="main">)</span></span>  <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span>
                <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>  sche_valid_findFinishActors <span class="free">schePtr</span> <span class="bound">s</span>  "</span></span></span> 
                  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>Impl_ACBVectorSize <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span> <span class="main">-</span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> ACBVectorSize'_def   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>Impl_checkActorPluginFinished_hoare des_impl_findFinishActors_aux2<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> Impl_ACBVectorSize_def sche_valid_findFinishActors_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>



<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹delFinishActors verify›</span></span></span>
<span class="keyword1"><span class="command">definition</span></span> sche_valid_delFinishActors<span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_delFinishActors</span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> 
          is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="main">∧</span> 
          <span class="main">0</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
          sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">2147483646</span> <span class="main">∧</span>
           sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span>  <span class="numeral">2147483646</span> <span class="main">∧</span>
          is_valid_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
          is_valid_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
          <span class="main">(</span><span class="main">∀</span><span class="bound">r</span><span class="main">.</span> is_valid_ActorPluginInfo_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
          <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span> is_valid_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
          is_valid_ActorPluginInfoVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
          <span class="main">(</span><span class="main">∀</span><span class="bound">r</span><span class="main">.</span>  is_valid_ActorPluginInfo_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span>
"</span></span></span>

<span class="keyword1"><span class="command">axiomatization</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span>  ACBList_length_update <span class="main">:</span><span class="quoted"><span class="quoted"><span class="language">"
     <span class="free">a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free">s'</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s'</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span> 
       <span class="free">a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword2"><span class="keyword">and</span></span> ACBVectorErase'_refinement <span class="main">:</span> 
     <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">P</span> <span class="bound">P'</span> <span class="bound">sta</span> <span class="bound">R</span><span class="main">.</span>
     int <span class="free">ra</span> <span class="main">=</span> fst <span class="free">r'</span> <span class="main">⟹</span>
     <span class="main">(</span><span class="main">∀</span><span class="bound">s</span><span class="main">.</span> <span class="bound">P</span> <span class="bound">s</span> <span class="main">⟶</span> <span class="free">it</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> <span class="free">ra</span><span class="main">)</span> <span class="main">⟹</span>
     <span class="main">(</span><span class="main">∀</span><span class="bound">s</span><span class="main">.</span> <span class="bound">P'</span> <span class="bound">s</span> <span class="main">⟶</span> <span class="free">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="free">r'</span><span class="main">)</span> <span class="main">∧</span> <span class="free">rv</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span>
     corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False <span class="bound">R</span> <span class="bound">P</span> <span class="bound">P'</span>
     <span class="main">(</span>modify <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> <span class="main">(</span>fst <span class="bound">σ</span><span class="main">⦇</span>acbList <span class="main">:=</span> remove1 <span class="free">it</span> <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span><span class="main">)</span><span class="main">⦈</span><span class="main">,</span> snd <span class="bound">σ</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
     <span class="main">(</span>ACBVectorErase' <span class="free">rv</span> <span class="main">(</span>ACB_C.state_C_update <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> <span class="bound">sta</span><span class="main">)</span> <span class="free">tmpACB</span><span class="main">)</span><span class="main">)</span>
     "</span></span></span>
  <span class="keyword2"><span class="keyword">and</span></span> valid_delFinishActors_auxfimary<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">rv</span> <span class="bound">schePtr</span> <span class="bound">s'</span><span class="main">.</span> 
       sche_valid_delFinishActors <span class="bound">schePtr</span> <span class="free">s</span> <span class="main">⟹</span>
       is_valid_ActorScheduler_C <span class="free">s</span> <span class="bound">schePtr</span> <span class="main">⟹</span>
       is_valid_ACBVector_C <span class="free">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s</span> <span class="bound">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span>
       is_valid_ActorPluginInfoVector_C <span class="free">s</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s</span> <span class="bound">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span>
       sche_valid_delFinishActors <span class="bound">schePtr</span> <span class="bound">s'</span>"</span></span></span>
  <span class="keyword2"><span class="keyword">and</span></span> lengthC_delFinishActors_auxfimary<span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">rv</span> <span class="bound">schePtr</span> <span class="bound">s'</span><span class="main">.</span> 
    sche_valid_delFinishActors <span class="bound">schePtr</span> <span class="free">s</span> <span class="main">⟹</span>
    is_valid_ActorScheduler_C <span class="free">s</span> <span class="bound">schePtr</span> <span class="main">⟹</span>
    is_valid_ACBVector_C <span class="free">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s</span> <span class="bound">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span>
    is_valid_ActorPluginInfoVector_C <span class="free">s</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s</span> <span class="bound">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">⟹</span>
    is_valid_ActorPluginInfo_C <span class="free">s</span>
     <span class="main">(</span>ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="free">s</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s</span> <span class="bound">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">aa</span><span class="main">)</span> <span class="main">⟹</span>
    ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="free">s</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free">s</span> <span class="bound">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
    ActorPluginInfoVector_C.length_C <span class="bound">s'</span>"</span></span></span>
  <span class="keyword2"><span class="keyword">and</span></span> Impl_updateActorPluginState_sche_delFinish_hoare<span class="main">:</span> 
    <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">P</span> <span class="bound">Q</span> <span class="bound">sta</span><span class="main">.</span>
    <span class="main">(</span><span class="main">∀</span><span class="bound">s</span><span class="main">.</span> <span class="bound">P</span> <span class="bound">s</span> <span class="main">⟶</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">Q</span> <span class="bound">r</span> <span class="bound">s</span> <span class="main">⟶</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> <span class="main">⟹</span>
    <span class="main">⦃</span><span class="bound">P</span><span class="main">⦄</span> Impl_updateActorPluginState_sche <span class="free">scheduler</span> <span class="free">anActorsPtr</span> <span class="bound">sta</span> <span class="main">⦃</span><span class="bound">Q</span><span class="main">⦄</span>"</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_delFinishActors_aux0<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"actorPluginInfoListEqual <span class="free">fal</span> <span class="free">a</span> <span class="free">b</span> <span class="main">⟹</span>
       no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span><span class="free">ret'</span> <span class="main">=</span> Impl_actorPluginInfoVectorSize <span class="free">APIVecPtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="free">APIVecPtr</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  int <span class="free">r</span> <span class="main">&lt;</span> <span class="free">ret'</span> <span class="main">∧</span>
            <span class="free">acbPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="free">ret'a</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="free">acbPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="main">0</span> <span class="main">≤</span> <span class="free">aa</span> <span class="main">∧</span> <span class="free">aa</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">tmpACB</span> <span class="main">=</span>  heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">aa</span><span class="main">)</span> <span class="main">)</span>
        <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ActorPluginInfo_C.actorID_C <span class="main">(</span>heap_ActorPluginInfo_C <span class="bound">s</span> <span class="main">(</span>ActorPluginInfoVector_C.data_C
             <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span>int <span class="free">r</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> ACB_C.actorID_C <span class="free">tmpACB</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">y</span> <span class="main">&lt;-</span>
              <span class="keyword1">do</span> <span class="bound">index</span> <span class="main">&lt;-</span>
                 gets
                  <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ACBVectorFind <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span>
                         <span class="main">(</span>ACB_C.state_C_update <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_FINISH<span class="main">)</span> <span class="free">tmpACB</span><span class="main">)</span> <span class="main">0</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">len</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 <span class="keyword1">if</span> <span class="bound">index</span> <span class="main">=</span> <span class="bound">len</span> <span class="keyword1">then</span> skip
                 <span class="keyword1">else</span> <span class="keyword1">do</span> <span class="bound">head</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                         modify <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ACBVectorRemove <span class="bound">s</span> <span class="bound">head</span> <span class="bound">index</span> <span class="bound">len</span><span class="main">)</span><span class="main">;</span>
                         <span class="bound">newQue</span> <span class="main">&lt;-</span>
                         gets
                          <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ACBVector_C.length_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">len</span><span class="main">.</span> of_int <span class="main">(</span>sint <span class="bound">len</span> <span class="main">-</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span>
                                 <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                         modify <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="bound">s</span><span class="main">⦇</span>heap_ACBVector_C <span class="main">:=</span> <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span><span class="main">)</span><span class="main">(</span><span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">:=</span> <span class="bound">newQue</span><span class="main">)</span><span class="main">⦈</span><span class="main">)</span>
                      <span class="keyword1">od</span>
              <span class="keyword1">od</span><span class="main">;</span>
              return <span class="main">(</span>Inl <span class="main">(</span>Break<span class="main">,</span> <span class="free">aa</span><span class="main">)</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">aa</span> <span class="main">≤</span> <span class="numeral">2147483646</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              return <span class="main">(</span>Inr <span class="main">(</span><span class="free">aa</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">)</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> skip_def sche_valid_delFinishActors_def
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_delFinishActors_aux1<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">" actorPluginInfoListEqual <span class="free">fal</span> <span class="free">a</span> <span class="free">b</span> <span class="main">⟹</span>
       no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  <span class="free">ret'a</span> <span class="main">=</span> Impl_actorPluginInfoVectorSize <span class="free">APIVecPtr</span> <span class="bound">s</span>
             <span class="main">∧</span> <span class="free">APIVecPtr</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> <span class="free">aa</span> <span class="main">∧</span>
            <span class="free">aa</span> <span class="main">&lt;</span> sint  <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
        <span class="main">(</span>whileLoopE <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="bound">r</span> <span class="main">∧</span>
                            fst <span class="bound">r</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
           <span class="main">(</span><span class="main">λ</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span>
                    guard
                     <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">tmpACB</span> <span class="main">&lt;-</span>
                    gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span>
                    guard
                     <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorPluginInfo_C <span class="bound">s</span>
                            <span class="main">(</span>ActorPluginInfoVector_C.data_C
                              <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span>
                             <span class="free">aa</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ActorPluginInfo_C.actorID_C
                                     <span class="main">(</span>heap_ActorPluginInfo_C <span class="bound">s</span>
                                       <span class="main">(</span>ActorPluginInfoVector_C.data_C
                                         <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span>
                                        <span class="free">aa</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
                                    ACB_C.actorID_C <span class="bound">tmpACB</span><span class="main">)</span>
                      <span class="main">(</span><span class="keyword1">do</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">y</span> <span class="main">&lt;-</span>
                          ACBVectorErase' <span class="bound">v___ptr_to_struct_ACBVector_C'param</span>
                           <span class="main">(</span>ACB_C.state_C_update <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_FINISH<span class="main">)</span> <span class="bound">tmpACB</span><span class="main">)</span><span class="main">;</span>
                          throwError <span class="main">(</span>Break<span class="main">,</span> fst <span class="bound">r</span><span class="main">)</span>
                       <span class="keyword1">od</span><span class="main">)</span>
                      <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> fst <span class="bound">r</span> <span class="main">≤</span> <span class="numeral">2147483646</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          returnOk <span class="main">(</span>fst <span class="bound">r</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">)</span>
                       <span class="keyword1">od</span><span class="main">)</span>
                 <span class="keyword1">od</span><span class="main">)</span>
          <span class="main">(</span><span class="main">0</span><span class="main">,</span> <span class="free">ret'</span><span class="main">)</span><span class="keyword1">&lt;catch&gt;</span>
         <span class="main">(</span><span class="main">λ</span><span class="bound">global_exn_var</span><span class="main">.</span> return <span class="main">(</span>snd <span class="bound">global_exn_var</span><span class="main">,</span> <span class="main">-</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> catch_def ACBVectorErase'_def skip_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> noFail_whileLoopE<span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_delFinishActors_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_delFinishActors_aux2<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">setResult</span> <span class="bound">bl</span> <span class="bound">r</span> <span class="bound">x</span> <span class="bound">y</span> <span class="bound">xa</span> <span class="bound">ya</span><span class="main">.</span>
       actorPluginInfoListEqual <span class="free">fal</span> <span class="free">a</span> <span class="free">b</span> <span class="main">⟹</span>
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="bound">x</span> <span class="main">∧</span> <span class="bound">x</span> <span class="main">&lt;</span> length <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="free">fal</span> <span class="main">=</span> finishingActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">⦄</span>
      NonDetMonad_call.call <span class="main">(</span>Des_updateActorPluginStates <span class="free">fal</span> actorState.ACTOR_STATE_FINISH<span class="main">)</span>
        <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span> <span class="main">!</span> <span class="bound">x</span><span class="main">,</span> snd <span class="bound">σ</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span> <span class="bound">b</span><span class="main">.</span> <span class="main">(</span>fst <span class="bound">σ</span><span class="main">⦇</span>registeredBus <span class="main">:=</span> <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span><span class="main">)</span><span class="main">[</span><span class="bound">x</span> <span class="main">:=</span> fst <span class="bound">b</span><span class="main">]</span><span class="main">⦈</span><span class="main">,</span> snd <span class="bound">b</span><span class="main">)</span><span class="main">)</span> 
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">xb</span> <span class="bound">a</span><span class="main">.</span>
           <span class="main">0</span> <span class="main">≤</span> fst <span class="main">(</span>Suc <span class="bound">x</span><span class="main">,</span> <span class="bound">xa</span> <span class="main">∧</span> <span class="bound">xb</span><span class="main">,</span> <span class="bound">ya</span><span class="main">)</span> <span class="main">∧</span>
           fst <span class="main">(</span>Suc <span class="bound">x</span><span class="main">,</span> <span class="bound">xa</span> <span class="main">∧</span> <span class="bound">xb</span><span class="main">,</span> <span class="bound">ya</span><span class="main">)</span> <span class="main">≤</span> length <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">a</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="free">fal</span> <span class="main">=</span> finishingActors <span class="main">(</span>fst <span class="bound">a</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad_call.call_def NonDetMonad.valid_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span> 

<span class="keyword1"><span class="command">lemma</span></span> des_impl_delFinishActors <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False 
    <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span>sche_valid_delFinishActors <span class="free">schePtr</span><span class="main">)</span>
     Des_delFinishActors <span class="main">(</span>Impl_delFinishActors <span class="free">schePtr</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_delFinishActors_def Impl_delFinishActors_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span> finishingActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span>"</span></span></span>  
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> snd <span class="bound">ret</span> <span class="main">=</span> <span class="bound">s</span> <span class="main">∧</span> fst <span class="bound">ret</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> "</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="main">(</span><span class="bound">r'</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> actorPluginInfoListEqual <span class="bound">r</span> <span class="bound">r'</span> <span class="bound">s</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> schePtrEqual_def<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> fal a b
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">fal</span> <span class="main">=</span> finishingActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span>"</span></span></span>  
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">a</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> "</span></span></span>
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">flag</span> <span class="bound">ret</span><span class="main">.</span> <span class="main">(</span><span class="bound">flag</span> <span class="main">=</span> True <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">flag</span> <span class="main">=</span> False <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="comment1">(*updateActorPluginState_sche verify*)</span>
      <span class="keyword1"><span class="command">using</span></span> des_impl_updateActorPluginState_sche<span class="main">[</span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> schePtr<span class="main"><span class="main">=</span></span><span class="quoted"><span class="language"><span class="free">schePtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> anstate<span class="main"><span class="main">=</span></span><span class="quoted"><span class="language">impl_ACTOR_STATE_FINISH</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> apivecPtr<span class="main"><span class="main">=</span></span><span class="quoted"><span class="language"><span class="skolem">a</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> staDes<span class="main"><span class="main">=</span></span><span class="quoted"><span class="language">actorState.ACTOR_STATE_FINISH</span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> apil<span class="main"><span class="main">=</span></span><span class="quoted"><span class="language"><span class="skolem">fal</span></span></span></span><span class="main">]</span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">" sche_valid_updateActorPluginState <span class="free">schePtr</span> <span class="skolem">b</span> <span class="main">⟷</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="skolem">b</span> "</span></span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"stateACBEqual actorState.ACTOR_STATE_FINISH <span class="main">(</span><span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_FINISH<span class="main">)</span> "</span></span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> prod_injects<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span></span> <span class="keyword1"><span class="command">unfolding</span></span> stateACBEqual_def impl_ACTOR_STATE_FINISH_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">force</span></span> 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> Des_updateActorPluginState_sche_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>    
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoop_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">res</span><span class="main">,</span> <span class="bound">rb</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span>  <span class="main">0</span> <span class="main">≤</span> <span class="bound">i</span> <span class="main">∧</span>  <span class="bound">i</span> <span class="main">≤</span> length <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>  <span class="skolem">fal</span> <span class="main">=</span> finishingActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">res</span><span class="main">,</span> <span class="bound">rb</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span>   length <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_delFinishActors_aux2<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> a<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">a</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> b <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">b</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command">using</span></span> Impl_updateActorPluginState_sche_delFinish_hoare
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">,</span></span> lifting<span class="main"><span class="main">)</span></span> NonDetMonadLemmaBucket.validI<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> APIVecPtr
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> Impl_actorPluginInfoVectorSize <span class="skolem">APIVecPtr</span> <span class="bound">s</span>  
                    <span class="main">∧</span> <span class="skolem">APIVecPtr</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span>  
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True "</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">i'</span><span class="main">.</span> int <span class="bound">i</span> <span class="main">=</span> fst <span class="bound">i'</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> skip_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoop<span class="main">)</span></span> <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret' r r' s s' <span class="keyword1"><span class="command">unfolding</span></span> Impl_actorPluginInfoVectorSize_def 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
        <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def actorPluginInfoListEqual_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret' r <span class="keyword1"><span class="command">unfolding</span></span>  ACBVectorSize'_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="skolem">ret'</span> <span class="main">=</span> Impl_actorPluginInfoVectorSize <span class="skolem">APIVecPtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">APIVecPtr</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> 
            <span class="main">∧</span> int <span class="skolem">r</span> <span class="main">&lt;</span> <span class="skolem">ret'</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">retu</span> <span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="skolem">ret'</span> <span class="main">=</span> Impl_actorPluginInfoVectorSize <span class="skolem">APIVecPtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">APIVecPtr</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> 
            <span class="main">∧</span> int <span class="skolem">r</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span> <span class="bound">retu</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> y acbPtr
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">retu</span> <span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="skolem">ret'</span> <span class="main">=</span> Impl_actorPluginInfoVectorSize <span class="skolem">APIVecPtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">APIVecPtr</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> 
            <span class="main">∧</span> int <span class="skolem">r</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span> <span class="skolem">acbPtr</span>  <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">retu</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbPtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>           
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret'a
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">fal</span> <span class="main">=</span> finishingActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> length <span class="skolem">fal</span>"</span></span></span>
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">ret'</span> <span class="main">=</span> Impl_actorPluginInfoVectorSize <span class="skolem">APIVecPtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="skolem">APIVecPtr</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  int <span class="skolem">r</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span>
           <span class="skolem">acbPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">ret'a</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbPtr</span><span class="main">)</span><span class="main">)</span> "</span></span></span>
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  int <span class="bound">r</span> <span class="main">=</span> fst <span class="bound">r'</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
              <span class="keyword1"><span class="command">unfolding</span></span> catch_def 
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">rdes</span> <span class="bound">rimpl</span><span class="main">.</span> int <span class="bound">rdes</span> <span class="main">=</span> snd <span class="bound">rimpl</span><span class="main">)</span> <span class="main">⊕</span>
                                <span class="main">(</span><span class="main">λ</span><span class="bound">rdes</span> <span class="bound">rimpl</span><span class="main">.</span>  int <span class="bound">rdes</span> <span class="main">=</span> fst <span class="bound">rimpl</span> <span class="main">)</span>"</span></span></span> 
                                       <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">dr</span> <span class="bound">σ</span><span class="main">.</span> True"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> True<span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> x xa <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="language"><span class="skolem">x</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoopE<span class="main">)</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ra r' s s' <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="language"><span class="skolem">ra</span></span></span><span class="main">)</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ra r' 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">retu</span> <span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="skolem">ret'</span> <span class="main">=</span> Impl_actorPluginInfoVectorSize <span class="skolem">APIVecPtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">APIVecPtr</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
            int <span class="skolem">r</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span> <span class="skolem">acbPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret'a</span> <span class="main">∧</span>
            <span class="skolem">ret'a</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbPtr</span><span class="main">)</span><span class="main">)</span><span class="main">∧</span> <span class="bound">retu</span> <span class="main">=</span> <span class="main">()</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
                         <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">rdes</span> <span class="bound">rimpl</span><span class="main">.</span> True<span class="main">)</span>"</span></span></span> 
                     <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">dr</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">dr</span> <span class="main">=</span> acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">ra</span> <span class="main">∧</span> <span class="skolem">fal</span> <span class="main">=</span> finishingActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> length <span class="skolem">fal</span> <span class="main">∧</span>  <span class="skolem">ra</span> <span class="main">&lt;</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                     <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">retu</span> <span class="bound">s</span><span class="main">.</span>  sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="skolem">ret'</span> <span class="main">=</span> Impl_actorPluginInfoVectorSize <span class="skolem">APIVecPtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">APIVecPtr</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
            int <span class="skolem">r</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span> <span class="skolem">acbPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret'a</span> <span class="main">∧</span>
            <span class="skolem">ret'a</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="bound">retu</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> it tmpACB
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">retu</span> <span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="skolem">ret'</span> <span class="main">=</span> Impl_actorPluginInfoVectorSize <span class="skolem">APIVecPtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">APIVecPtr</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
            int <span class="skolem">r</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span> <span class="skolem">acbPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret'a</span> <span class="main">∧</span>
            <span class="skolem">ret'a</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbPtr</span><span class="main">)</span><span class="main">)</span><span class="main">∧</span> <span class="bound">retu</span> <span class="main">=</span> <span class="main">()</span> <span class="main">∧</span>
            <span class="skolem">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre<span class="main">)</span></span>
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> y ya <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                    <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def actorPluginInfoListEqual_def
                              actorPluginInfoEqual_sche_def int64Equal_def 
                    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> y ya
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                        <span class="skolem">ret'</span> <span class="main">=</span> Impl_actorPluginInfoVectorSize <span class="skolem">APIVecPtr</span> <span class="bound">s</span> <span class="main">∧</span>
                        <span class="skolem">APIVecPtr</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
                        int <span class="skolem">r</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span>
                        <span class="skolem">acbPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
                        fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret'a</span> <span class="main">∧</span>
                        <span class="skolem">ret'a</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
                        <span class="skolem">ya</span> <span class="main">=</span> <span class="main">()</span> <span class="main">∧</span>
                        <span class="skolem">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span> <span class="main">∧</span>
                         ActorPluginInfo_C.actorID_C
                         <span class="main">(</span>heap_ActorPluginInfo_C <span class="bound">s</span>
                           <span class="main">(</span>ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span>
                            int <span class="skolem">r</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
                         ACB_C.actorID_C <span class="skolem">tmpACB</span> <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True "</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  True "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> ACBVectorErase'_refinement<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> ra <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">ra</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">r'</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> y ya 
                    <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def guard_def
                              return_def gets_def  corres_underlying_def returnOk_def 
                    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
              <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def ACBVectorErase'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_delFinishActors_def
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">metis</span> actorState.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>13<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span> fst_conv mem_Collect_eq nat_0_le sint_1_eq_1_x<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> snd_conv ACBVectorErase'_def finish_puase_apiList<span class="main">)</span></span> 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> aa 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_delFinishActors_aux0<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> ret' <span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">ret'</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> APIVecPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">APIVecPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> acbPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">acbPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ret'a<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">ret'a</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_delFinishActors_def 
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command">unfolding</span></span> whileLoop_terminatesE_def throwError_def returnOk_def
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span>
                <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span>  "</span></span></span> 
                  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span> Inl <span class="bound">a</span> <span class="main">⇒</span> <span class="main">0</span> <span class="main">|</span>
                             Inr <span class="bound">v</span> <span class="main">⇒</span> nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> nat <span class="main">(</span>fst <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span>  NonDetMonad.lift_def  
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> s' s aa
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> valid_delFinishActors_auxfimary<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> s <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">s</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
                  <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">i</span> <span class="main">≤</span>length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">fal</span> <span class="main">=</span> finishingActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> length <span class="skolem">fal</span> "</span></span></span> 
                     <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
                  <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="bound">ret</span> <span class="main">∧</span> fst <span class="bound">ret</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> 
                  <span class="main">∧</span> sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>   <span class="skolem">ret'</span> <span class="main">=</span> Impl_actorPluginInfoVectorSize <span class="skolem">APIVecPtr</span> <span class="bound">s</span> <span class="main">∧</span>
        <span class="skolem">APIVecPtr</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  int <span class="skolem">r</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span>
        <span class="skolem">acbPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">ret'a</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbPtr</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                     <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> fst <span class="bound">r</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def ACBVectorErase'_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 4 
            <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def guard_def Impl_actorPluginInfoVectorSize_def
                      return_def gets_def  corres_underlying_def returnOk_def actorPluginInfoVectorSize'_def 
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> aa s
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> valid_delFinishActors_auxfimary<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> s <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">s</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> aa s
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> lengthC_delFinishActors_auxfimary<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> s <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">s</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 4
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
              <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_delFinishActors_def 
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">smt</span> actorState.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span>  fst_conv mem_Collect_eq nat_0_le sint_1_eq_1_x<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> snd_conv ACBVectorErase'_def finish_puase_apiList<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> Impl_actorPluginInfoVectorSize_def 
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span>  <span class="main">0</span> <span class="main">≤</span> <span class="bound">i</span> <span class="main">∧</span>  <span class="bound">i</span> <span class="main">≤</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>  <span class="skolem">fal</span> <span class="main">=</span> finishingActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span>   length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret' aa
        <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoVectorSize'_def Impl_actorPluginInfoVectorSize_def ACBVectorSize'_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
             <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">r</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span>  <span class="main">0</span> <span class="main">≤</span> <span class="bound">i</span> <span class="main">∧</span> <span class="bound">i</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>  
            sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="skolem">APIVecPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           <span class="skolem">APIVecPtr</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">r</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span>  nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def ACBVectorErase'_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_delFinishActors_def
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ab s
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> valid_delFinishActors_auxfimary<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> s <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">s</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ab s
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> lengthC_delFinishActors_auxfimary<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> s <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">s</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">metis</span> actorState.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span>  fst_conv mem_Collect_eq nat_0_le sint_1_eq_1_x<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> snd_conv ACBVectorErase'_def finish_puase_apiList<span class="main">)</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret' aa
        <span class="keyword1"><span class="command">unfolding</span></span> ACBVectorSize'_def  actorPluginInfoVectorSize'_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_delFinishActors_aux1<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span>  APIVecPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">APIVecPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ret'a<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">ret'</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
             <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">r</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span>  <span class="main">0</span> <span class="main">≤</span> <span class="bound">i</span> <span class="main">∧</span> <span class="bound">i</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>  
                sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  <span class="skolem">aa</span> <span class="main">&lt;</span> sint
                       <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">r</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span>  nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def ACBVectorErase'_def Impl_actorPluginInfoVectorSize_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_delFinishActors_def 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span>  <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span> 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> aa ba s' 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span> <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span>  True "</span></span></span> 
                  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>Impl_actorPluginInfoVectorSize <span class="main">(</span>finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span><span class="main">-</span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoVectorSize'_def 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def ACBVectorSize'_def ACBVectorErase'_def Impl_actorPluginInfoVectorSize_def 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
             <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">r</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span>  <span class="main">0</span> <span class="main">≤</span> <span class="bound">i</span> <span class="main">∧</span> <span class="bound">i</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>  
                sche_valid_delFinishActors <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">r</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span>  nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def ACBVectorSize'_def ACBVectorErase'_def Impl_actorPluginInfoVectorSize_def 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">smt</span> actorState.distinct<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span>  fst_conv mem_Collect_eq  sint_1_eq_1_x<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> snd_conv ACBVectorErase'_def Impl_actorPluginInfoVectorSize_def  finish_puase_apiList<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>




<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹findMinPrioSwarm  verify›</span></span></span>


<span class="keyword1"><span class="command">definition</span></span> sche_valid_findMinPrioSwarm<span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_findMinPrioSwarm</span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> 
          is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="main">∧</span>
          sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span> <span class="main">∧</span> 
          <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span>  is_valid_SwarmInfo_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free"><span class="bound">schePtr</span></span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">)</span><span class="main">)</span>
"</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_findMinPrioSwarm_aux0<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">"<span class="free">minSwarmPrio</span> <span class="main">=</span> <span class="free">minSwarmPrioDes</span> <span class="main">⟹</span>
    no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_findMinPrioSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                  <span class="free">a</span> <span class="main">&lt;</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span> <span class="main">)</span><span class="main">)</span> <span class="main">∧</span>  is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span> <span class="main">)</span>
     <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">&lt;</span> <span class="free">b</span><span class="main">)</span>
       <span class="main">(</span><span class="keyword1">do</span> <span class="bound">minSwarmPrio</span> <span class="main">&lt;-</span>
           gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
           <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span><span class="main">;</span>
           <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
           <span class="bound">y</span> <span class="main">&lt;-</span>
           modify
            <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_SwarmInfo_C_update
                   <span class="main">(</span><span class="main">λ</span><span class="bound">aa</span><span class="main">.</span> <span class="bound">aa</span><span class="main">(</span><span class="free">minSwarmPtr</span> <span class="main">:=</span> heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span><span class="main">)</span><span class="main">;</span>
           return <span class="bound">minSwarmPrio</span>
        <span class="keyword1">od</span><span class="main">)</span>
       <span class="main">(</span>return <span class="free">b</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_findMinPrioSwarm_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>


<span class="keyword1"><span class="command">definition</span></span> is_valid_minSwarmPtr<span class="main">::</span>  <span class="quoted"><span class="quoted"><span class="language">" SwarmInfo_C  ptr <span class="main">⇒</span> ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">is_valid_minSwarmPtr</span> <span class="free"><span class="bound">minSwarmPtr</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> is_valid_SwarmInfo_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">minSwarmPtr</span></span> <span class="main">∧</span>
     <span class="main">(</span><span class="main">∀</span><span class="bound">r</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free"><span class="bound">schePtr</span></span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span> <span class="main">≠</span> <span class="free"><span class="bound">minSwarmPtr</span></span><span class="main">)</span> <span class="main">∧</span> 
     <span class="main">(</span><span class="main">∀</span><span class="bound">r</span><span class="main">.</span> <span class="free"><span class="bound">minSwarmPtr</span></span> <span class="main">≠</span> pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="free"><span class="bound">s</span></span>
              <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>


<span class="keyword1"><span class="command">lemma</span></span> des_impl_findMinPrioSwarm  <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">" <span class="free">minSwarmPrio</span> <span class="main">=</span> <span class="free">minSwarmPrioDes</span> <span class="main">⟹</span>
  corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False 
    <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> snd <span class="bound">r</span> <span class="main">=</span><span class="bound">r'</span> <span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True <span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_findMinPrioSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
          is_valid_minSwarmPtr  <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> 
   <span class="main">(</span>Des_findMinPrioSwarm <span class="free">minSwarmPtrDes</span> <span class="free">minSwarmPrioDes</span>  <span class="main">)</span> <span class="main">(</span>Impl_findMinPrioSwarm <span class="free">schePtr</span>  <span class="free">minSwarmPtr</span> <span class="free">minSwarmPrio</span>    <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_findMinPrioSwarm_def Impl_findMinPrioSwarm_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_findMinPrioSwarm <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span>  is_valid_minSwarmPtr  <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span>  
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True "</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">i'</span><span class="main">.</span>  snd <span class="bound">i'</span> <span class="main">=</span> snd<span class="main">(</span>snd <span class="bound">i</span><span class="main">)</span> <span class="main">∧</span> int <span class="main">(</span>fst <span class="bound">i</span><span class="main">)</span> <span class="main">=</span> fst <span class="bound">i'</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoop<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def int64Equal_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a aa b
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_findMinPrioSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  is_valid_minSwarmPtr  <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_findMinPrioSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_minSwarmPtr  <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span> swarmList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">a</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="main">(</span>fst <span class="bound">ret</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">a</span><span class="main">+</span><span class="main">1</span>"</span></span></span>  
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True "</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">i'</span><span class="main">.</span>  <span class="bound">i'</span> <span class="main">=</span> snd<span class="main">(</span>snd <span class="bound">i</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre<span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def swarmListEqual_def swarmInfoEqual_def int32Equal_def <span class="keyword1"><span class="command">by</span></span>  <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_findMinPrioSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_minSwarmPtr  <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span><span class="main">∧</span> 
                      is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span> <span class="main">∧</span>
                   sint <span class="main">(</span>swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">&lt;</span> <span class="skolem">b</span> <span class="main">∧</span>
                   <span class="bound">r</span> <span class="main">=</span>  sint <span class="main">(</span>swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> rv
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_findMinPrioSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_minSwarmPtr  <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span><span class="main">∧</span> 
                     is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span> <span class="main">∧</span>
                   sint <span class="main">(</span>swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">&lt;</span> <span class="skolem">b</span> <span class="main">∧</span>
                   <span class="skolem">rv</span> <span class="main">=</span>  sint <span class="main">(</span>swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> sche_valid_findMinPrioSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_minSwarmPtr  <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span><span class="main">∧</span> 
                     is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span> <span class="main">∧</span>
                   sint <span class="main">(</span>swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">&lt;</span> <span class="skolem">b</span> <span class="main">∧</span>
                   <span class="skolem">rv</span> <span class="main">=</span>  sint <span class="main">(</span>swarmPrio_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
          <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def put_def get_def
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def int32Equal_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def  is_valid_minSwarmPtr_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def  swarmInfoEqual_def is_valid_minSwarmPtr_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>  
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def pluginPtrListEqual_def 
                            stringPtrListEqual_def int64PtrListEqual_def pluginEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                            pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                            pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                            pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> is_valid_minSwarmPtr_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">corres</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
      <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def put_def get_def guard_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_findMinPrioSwarm_def swarmInfoEqual_def  is_valid_minSwarmPtr_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_findMinPrioSwarm_aux0<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_findMinPrioSwarm_def is_valid_minSwarmPtr_def 
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span> <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>  sche_valid_findMinPrioSwarm <span class="free">schePtr</span> <span class="bound">s</span>  "</span></span></span> 
                  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_findMinPrioSwarm_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>   
 


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹ifMinPrioSwarmHaveActor verify›</span></span></span>



<span class="keyword1"><span class="command">definition</span></span> sche_valid_ifMinPrioSwarmHaveActor<span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_ifMinPrioSwarmHaveActor</span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> 
          is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="main">∧</span>
          is_valid_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
          <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span> is_valid_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">)</span> <span class="main">∧</span> 
         is_valid_SwarmInfo_C <span class="free"><span class="bound">s</span></span>
          <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">2147483646</span>
"</span></span></span>


<span class="keyword1"><span class="command">definition</span></span> is_valid_minPrioPtr<span class="main">::</span>  <span class="quoted"><span class="quoted"><span class="language">" <span class="numeral">32</span> signed word  ptr <span class="main">⇒</span> ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">is_valid_minPrioPtr</span> <span class="free"><span class="bound">minPrioPtr</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> 
          is_valid_w32 <span class="free"><span class="bound">s</span></span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span><span class="free"><span class="bound">minPrioPtr</span></span><span class="main">)</span> 
"</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_ifMinPrioSwarmHaveActor_aux0<span class="main">:</span>
    <span class="quoted"><span class="quoted"><span class="language">"<span class="free">minIdx</span> <span class="main">=</span> <span class="main">-</span> <span class="main">1</span> <span class="main">⟹</span>
       no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">ret'</span> <span class="main">=</span>  sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="free">acbListPtr</span><span class="main">)</span><span class="main">)</span>
                  <span class="main">∧</span> <span class="free">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> 
                  <span class="main">∧</span> <span class="free">ret</span> <span class="main">=</span> <span class="main">(</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="free">tmpACB</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span><span class="main">)</span>
                  <span class="main">∧</span> sche_valid_ifMinPrioSwarmHaveActor <span class="free">schePtr</span> <span class="bound">s</span>   <span class="main">∧</span>  is_valid_minPrioPtr  <span class="free">minPrioPtr</span> <span class="free">schePtr</span> <span class="bound">s</span>
                  <span class="main">∧</span> <span class="free">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="free">x</span><span class="main">)</span><span class="main">)</span>
        <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">ret</span> <span class="main">∧</span>
                        sint <span class="main">(</span>prio_C <span class="free">tmpACB</span><span class="main">)</span>
                        <span class="main">&lt;</span> sint <span class="main">(</span><span class="keyword1">UCAST</span><span class="main">(</span><span class="numeral">32</span> <span class="main">→</span> <span class="numeral">32</span> signed<span class="main">)</span> <span class="main">(</span>heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minPrioPtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minPrioPtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">y</span> <span class="main">&lt;-</span>
              modify
               <span class="main">(</span>heap_w32_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="bound">a</span><span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minPrioPtr</span> <span class="main">:=</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">32</span><span class="main">)</span> <span class="main">(</span>prio_C <span class="free">tmpACB</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              return <span class="free">a</span>
           <span class="keyword1">od</span><span class="main">)</span>
          <span class="main">(</span>return <span class="free">aa</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> is_valid_minPrioPtr_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_ifMinPrioSwarmHaveActor   <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="free">minIdx</span> <span class="main">=</span> <span class="main">-</span><span class="main">1</span> <span class="main">⟹</span>
  corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> fst <span class="bound">r</span><span class="main">=</span><span class="bound">r'</span> <span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True <span class="main">)</span> 
  <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_ifMinPrioSwarmHaveActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_minPrioPtr <span class="free">minPrioPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span> 
   <span class="main">(</span>Des_ifMinPrioSwarmHaveActor <span class="free">minSwarm</span> <span class="free">minIdx</span> <span class="free">minPrio</span>  <span class="main">)</span> <span class="main">(</span>Impl_ifMinPrioSwarmHaveActor  <span class="free">schePtr</span>  <span class="free">minSwarmPtr</span> <span class="free">minPrioPtr</span>    <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_ifMinPrioSwarmHaveActor_def  Impl_ifMinPrioSwarmHaveActor_def
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_ifMinPrioSwarmHaveActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  is_valid_minPrioPtr  <span class="free">minPrioPtr</span> <span class="free">schePtr</span> <span class="bound">s</span><span class="main">∧</span>  is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def 
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>
              <span class="main">∧</span> sche_valid_ifMinPrioSwarmHaveActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span>
              <span class="main">∧</span>  is_valid_minPrioPtr  <span class="free">minPrioPtr</span> <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> acbListPtr
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span>  sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span>
              <span class="main">∧</span> <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>
              <span class="main">∧</span> sche_valid_ifMinPrioSwarmHaveActor <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span>
              <span class="main">∧</span>  is_valid_minPrioPtr  <span class="free">minPrioPtr</span> <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret'
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True "</span></span></span> 
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">minIdx</span><span class="main">,</span> <span class="bound">ret</span><span class="main">)</span>  <span class="main">(</span><span class="bound">iI</span><span class="main">,</span> <span class="bound">minIdxI</span><span class="main">,</span> <span class="bound">retI</span><span class="main">)</span><span class="main">.</span> int <span class="bound">i</span> <span class="main">=</span> <span class="bound">iI</span> <span class="main">∧</span> <span class="bound">minIdx</span> <span class="main">=</span> <span class="bound">minIdxI</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoop<span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span>  sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span>
              <span class="main">∧</span> <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span> <span class="main">()</span><span class="main">∧</span>  is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span>
              <span class="main">∧</span> sche_valid_ifMinPrioSwarmHaveActor <span class="free">schePtr</span> <span class="bound">s</span>   <span class="main">∧</span>  is_valid_minPrioPtr  <span class="free">minPrioPtr</span> <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> x b aa ba y ya yb
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span>  acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">x</span>"</span></span></span> 
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span>  sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span>
              <span class="main">∧</span> <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span>
              <span class="main">∧</span> sche_valid_ifMinPrioSwarmHaveActor <span class="free">schePtr</span> <span class="bound">s</span>   <span class="main">∧</span>  is_valid_minPrioPtr  <span class="free">minPrioPtr</span> <span class="free">schePtr</span> <span class="bound">s</span>
              <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">x</span><span class="main">)</span> "</span></span></span> 
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>  
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> acb tmpACB
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span>  sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span>
              <span class="main">∧</span> <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">()</span><span class="main">∧</span>  is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span>
              <span class="main">∧</span> sche_valid_ifMinPrioSwarmHaveActor <span class="free">schePtr</span> <span class="bound">s</span>   <span class="main">∧</span>  is_valid_minPrioPtr  <span class="free">minPrioPtr</span> <span class="free">schePtr</span> <span class="bound">s</span>
              <span class="main">∧</span> <span class="skolem">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">x</span><span class="main">)</span> "</span></span></span></span> <span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span>  sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span>
              <span class="main">∧</span> <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span>
              <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">(</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="skolem">tmpACB</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span><span class="main">)</span>
              <span class="main">∧</span> sche_valid_ifMinPrioSwarmHaveActor <span class="free">schePtr</span> <span class="bound">s</span>   <span class="main">∧</span>  is_valid_minPrioPtr  <span class="free">minPrioPtr</span> <span class="free">schePtr</span> <span class="bound">s</span>
              <span class="main">∧</span> <span class="skolem">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">x</span><span class="main">)</span> "</span></span></span></span> <span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> y ya rbool
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span>  sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span>
                  <span class="main">∧</span> <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span>
                  <span class="main">∧</span> <span class="skolem">rbool</span> <span class="main">=</span> <span class="main">(</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="skolem">tmpACB</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span><span class="main">)</span>
                  <span class="main">∧</span> sche_valid_ifMinPrioSwarmHaveActor <span class="free">schePtr</span> <span class="bound">s</span>   <span class="main">∧</span>  is_valid_minPrioPtr  <span class="free">minPrioPtr</span> <span class="free">schePtr</span> <span class="bound">s</span>
                  <span class="main">∧</span> <span class="skolem">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">x</span><span class="main">)</span> "</span></span></span></span> <span class="main"><span class="main">]</span></span><span class="main">)</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> fst <span class="bound">ret</span> <span class="main">=</span> <span class="skolem">x</span> <span class="main">+</span> <span class="main">1</span>"</span></span></span>  
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True "</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">minIdx</span><span class="main">,</span> <span class="bound">ret</span><span class="main">)</span> <span class="bound">i'</span><span class="main">.</span>  <span class="bound">i'</span> <span class="main">=</span> <span class="bound">minIdx</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre<span class="main">)</span></span> 
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span>  sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span>
                      <span class="main">∧</span> <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span>
                      <span class="main">∧</span> <span class="skolem">rbool</span> <span class="main">=</span> <span class="main">(</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="skolem">tmpACB</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span><span class="main">)</span>
                      <span class="main">∧</span> sche_valid_ifMinPrioSwarmHaveActor <span class="free">schePtr</span> <span class="bound">s</span>   <span class="main">∧</span>  is_valid_minPrioPtr  <span class="free">minPrioPtr</span> <span class="free">schePtr</span> <span class="bound">s</span>
                      <span class="main">∧</span> <span class="skolem">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">x</span><span class="main">)</span> "</span></span></span></span> <span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split_r_ret<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">acb</span> <span class="main">=</span>  acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">x</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="main"><span class="bound">_</span></span> <span class="main">.</span>  True"</span></span></span>
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span>  sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span>
                      <span class="main">∧</span> <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span>
                      <span class="main">∧</span> <span class="skolem">rbool</span> <span class="main">=</span> <span class="main">(</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="skolem">tmpACB</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span><span class="main">)</span>
                      <span class="main">∧</span> sche_valid_ifMinPrioSwarmHaveActor <span class="free">schePtr</span> <span class="bound">s</span>   <span class="main">∧</span>  is_valid_minPrioPtr  <span class="free">minPrioPtr</span> <span class="free">schePtr</span> <span class="bound">s</span>
                      <span class="main">∧</span> <span class="skolem">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="skolem">x</span><span class="main">)</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
                      <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def put_def gets_def get_def guard_def  ACBVectorSize'_def
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                       <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def  is_valid_minSwarmPtr_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def  swarmInfoEqual_def is_valid_minSwarmPtr_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>  
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def pluginPtrListEqual_def 
                                          stringPtrListEqual_def int64PtrListEqual_def pluginEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                                          pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                                          pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                                          pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def  is_valid_minSwarmPtr_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def  swarmInfoEqual_def is_valid_minSwarmPtr_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>  
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def pluginPtrListEqual_def 
                                          stringPtrListEqual_def int64PtrListEqual_def pluginEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                                          pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                                          pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                                          pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_ifMinPrioSwarmHaveActor_def is_valid_minPrioPtr_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
                       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>  <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def put_def gets_def get_def guard_def  ACBVectorSize'_def
                  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold ACBVectorSize'_def
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_ifMinPrioSwarmHaveActor_def is_valid_minPrioPtr_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a aa
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_ifMinPrioSwarmHaveActor_aux0<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> ret' <span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">ret'</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> schePtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">schePtr</span></span></span>
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> acbListPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">acbListPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> minSwarmPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">minSwarmPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> x<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"nat <span class="skolem">a</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_ifMinPrioSwarmHaveActor_def is_valid_minPrioPtr_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span> <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>  sche_valid_ifMinPrioSwarmHaveActor <span class="free">schePtr</span> <span class="bound">s</span>   <span class="main">∧</span>  is_valid_minPrioPtr  <span class="free">minPrioPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> "</span></span></span> 
                  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_ifMinPrioSwarmHaveActor_def is_valid_minPrioPtr_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> ACBList_length_update<span class="main"><span class="keyword3">,</span></span><span class="operator">force</span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span> 
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> ACBVectorSize'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹findActorUnderMinSwarm   verify›</span></span></span>


<span class="keyword1"><span class="command">definition</span></span> sche_valid_findActorUnderMinSwarm <span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_findActorUnderMinSwarm</span>  <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> 
          is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="main">∧</span>
           is_valid_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
        <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span>  is_valid_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
    <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span>  is_valid_SwarmInfo_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
        sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span><span class="numeral">2147483646</span> 
"</span></span></span>



<span class="keyword1"><span class="command">lemma</span></span> des_impl_findActorUnderMinSwarm   <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"  corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True <span class="main">)</span> 
  <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_findActorUnderMinSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarm</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span> 
   <span class="main">(</span>Des_findActorUnderMinSwarm <span class="free">minSwarm</span>  <span class="free">minPrio</span>  <span class="main">)</span> <span class="main">(</span>Impl_findActorUnderMinSwarm  <span class="free">schePtr</span>  <span class="free">minSwarmPtr</span> <span class="free">minPrio</span> <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_findActorUnderMinSwarm_def  Impl_findActorUnderMinSwarm_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_findActorUnderMinSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarm</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>
              <span class="main">∧</span> sche_valid_findActorUnderMinSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarm</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span>  <span class="main">∧</span> is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> acbListPtr
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span>  sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span>
              <span class="main">∧</span> <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>  <span class="main">∧</span> is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span>
              <span class="main">∧</span> sche_valid_findActorUnderMinSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarm</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True "</span></span></span> 
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> int <span class="bound">r</span> <span class="main">=</span> fst <span class="bound">r'</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret'
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoop<span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r' <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
            sche_valid_findActorUnderMinSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarm</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
             <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span> fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span> <span class="main">()</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> rv y ya
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span>  acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">r</span>"</span></span></span> 
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
            sche_valid_findActorUnderMinSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarm</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
             <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span> fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span> "</span></span></span> 
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>  
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> rv tmpACB
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  sche_valid_findActorUnderMinSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           swarmInfoEqual <span class="free">minSwarm</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span>  fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span>
           <span class="skolem">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span> <span class="main">()</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  sche_valid_findActorUnderMinSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           swarmInfoEqual <span class="free">minSwarm</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span>  fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span>
           <span class="skolem">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span> <span class="main">∧</span>
           <span class="bound">r</span> <span class="main">=</span> <span class="main">(</span>sint <span class="main">(</span>ACB_C.state_C <span class="skolem">tmpACB</span><span class="main">)</span> <span class="main">≠</span> sint impl_ACTOR_STATE_RUNNING <span class="main">∧</span>  swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="skolem">tmpACB</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> y ya ret''
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span> <span class="skolem">r</span> <span class="main">+</span> <span class="main">1</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="main"><span class="bound">_</span></span> <span class="main">.</span>  True"</span></span></span>
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  sche_valid_findActorUnderMinSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           swarmInfoEqual <span class="free">minSwarm</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>  <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span>    fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span>
           <span class="skolem">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span> <span class="main">∧</span>
           <span class="skolem">ret''</span> <span class="main">=</span> <span class="main">(</span>sint <span class="main">(</span>ACB_C.state_C <span class="skolem">tmpACB</span><span class="main">)</span> <span class="main">≠</span> sint impl_ACTOR_STATE_RUNNING <span class="main">∧</span>  swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="skolem">tmpACB</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
                  <span class="keyword1"><span class="command">unfolding</span></span> when_def
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_simple_pre<span class="main">)</span></span>
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> int32Equal_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> stateACBEqual_def impl_ACTOR_STATE_RUNNING_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>13<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmInfoEqual_def  int64Equal_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span> 
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> int32Equal_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> stateACBEqual_def impl_ACTOR_STATE_RUNNING_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">force</span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmInfoEqual_def  int64Equal_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span> 
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> int32Equal_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> stateACBEqual_def impl_ACTOR_STATE_RUNNING_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">force</span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmInfoEqual_def  int64Equal_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span> 
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> int32Equal_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                     <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def guard_def actorPluginInfoVectorPushback'_def 
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                     <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def  is_valid_minSwarmPtr_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def  swarmInfoEqual_def is_valid_minSwarmPtr_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>  
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def pluginPtrListEqual_def 
                                          stringPtrListEqual_def int64PtrListEqual_def pluginEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                         <span class="keyword1"><span class="command">unfolding</span></span>  actorPluginInfoEqual_def taskInfoPtrEqual_def
                                    pluginInfoListEqual_def pluginInfoEqual_def actorPluginInfoEqual_sche_def 
                         <span class="keyword1"><span class="command">using</span></span> min_puase_apiList finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">force</span><span class="main"><span class="keyword3">+</span></span></span>
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoVectorPushback'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
                  <span class="keyword1"><span class="command">unfolding</span></span> swarmInfoEqual_def sche_valid_findActorUnderMinSwarm_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                 <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def guard_def ACBVectorSize'_def   <span class="keyword1"><span class="command">by</span></span>  <span class="language"><span class="operator">auto</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> ACBVectorSize'_def actorPluginInfoVectorPushback'_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> swarmInfoEqual_def sche_valid_findActorUnderMinSwarm_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a
          <span class="keyword1"><span class="command">unfolding</span></span> ACBVectorSize'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoVectorPushback'_def sche_valid_findActorUnderMinSwarm_def
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span> <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_findActorUnderMinSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarm</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span>  "</span></span></span> 
                  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  <span class="keyword1"><span class="command">unfolding</span></span> ACBVectorSize'_def actorPluginInfoVectorPushback'_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_findActorUnderMinSwarm_def swarmInfoEqual_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> ACBVectorSize'_def  skip_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>



<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹findRunningSwarm   verify›</span></span></span>

<span class="keyword1"><span class="command">definition</span></span> sche_valid_findRunningSwarm<span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_findRunningSwarm</span>  <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> 
          is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="main">∧</span>
          sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span> <span class="main">∧</span> 
          <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span>  is_valid_SwarmInfo_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free"><span class="bound">schePtr</span></span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">)</span> <span class="main">)</span>
         "</span></span></span>

<span class="keyword1"><span class="command">definition</span></span> is_valid_runningSwarmPtr<span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">" SwarmInfo_C ptr  <span class="main">⇒</span> ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">is_valid_runningSwarmPtr</span> <span class="free"><span class="bound">swarmptr</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span>
                 is_valid_SwarmInfo_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">swarmptr</span></span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">r</span><span class="main">.</span> <span class="free"><span class="bound">swarmptr</span></span> <span class="main">≠</span>  pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="free"><span class="bound">s</span></span> 
                <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
                <span class="main">(</span><span class="main">∀</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free"><span class="bound">schePtr</span></span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span>  <span class="main">≠</span> <span class="free"><span class="bound">swarmptr</span></span><span class="main">)</span>"</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_findRunningSwarm_aux0<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">"<span class="free">nRunningSwarmDes</span> <span class="main">=</span> <span class="free">nRunningSwarm</span> <span class="main">⟹</span>
    no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_findRunningSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_runningSwarmPtr <span class="free">runningSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                 <span class="free">a</span> <span class="main">&lt;</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
     <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
                     sint impl_ACTOR_STATE_RUNNING<span class="main">)</span>
       <span class="main">(</span><span class="keyword1">do</span> 
           <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_SwarmInfo_C <span class="bound">s</span> <span class="free">runningSwarmPtr</span><span class="main">)</span><span class="main">;</span>
           <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
           <span class="bound">y</span> <span class="main">&lt;-</span>
           modify
            <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_SwarmInfo_C_update
                   <span class="main">(</span><span class="main">λ</span><span class="bound">aa</span><span class="main">.</span> <span class="bound">aa</span><span class="main">(</span><span class="free">runningSwarmPtr</span> <span class="main">:=</span> heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="bound">s</span><span class="main">)</span><span class="main">;</span>
           return <span class="main">(</span><span class="free">a</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="free">b</span> <span class="main">+</span> <span class="main">1</span><span class="main">)</span>
        <span class="keyword1">od</span><span class="main">)</span>
       <span class="main">(</span>return <span class="main">(</span><span class="free">a</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="free">b</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> 
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 2 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_findRunningSwarm_def is_valid_runningSwarmPtr_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  

<span class="keyword1"><span class="command">lemma</span></span> des_impl_findRunningSwarm  <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="free">nRunningSwarmDes</span> <span class="main">=</span> <span class="free">nRunningSwarm</span><span class="main">⟹</span>
  corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False
   <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> snd <span class="bound">r</span> <span class="main">=</span> <span class="bound">r'</span> <span class="main">)</span> 
  <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True <span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_findRunningSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_runningSwarmPtr <span class="free">runningSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span> 
   <span class="main">(</span>Des_findRunningSwarm <span class="free">runningSwarmDes</span> <span class="free">nRunningSwarmDes</span><span class="main">)</span> <span class="main">(</span>Impl_findRunningSwarm  <span class="free">schePtr</span> <span class="free">runningSwarmPtr</span> <span class="free">nRunningSwarm</span>   <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_findRunningSwarm_def  Impl_findRunningSwarm_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>  sche_valid_findRunningSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_runningSwarmPtr <span class="free">runningSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span>  
            <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">iI</span><span class="main">,</span> <span class="bound">nRSI</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span>   
            <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">rSPtr</span><span class="main">,</span> <span class="bound">nRS</span><span class="main">)</span> <span class="main">(</span><span class="bound">iI</span><span class="main">,</span> <span class="bound">nRSI</span><span class="main">)</span><span class="main">.</span> int <span class="bound">i</span> <span class="main">=</span> <span class="bound">iI</span> <span class="main">∧</span> <span class="bound">nRS</span> <span class="main">=</span> <span class="bound">nRSI</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>  
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoop<span class="main">)</span></span> <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def int64Equal_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r'
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span>  sche_valid_findRunningSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">∧</span> is_valid_runningSwarmPtr <span class="free">runningSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span><span class="main">()</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> int <span class="main">(</span>fst <span class="skolem">r</span><span class="main">)</span> <span class="main">&lt;</span> nSwarm <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">∧</span>
            <span class="bound">ret</span> <span class="main">=</span> swarmList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> fst <span class="skolem">r</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> y ya yb swarm
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> int <span class="main">(</span>fst <span class="skolem">r</span><span class="main">)</span> <span class="main">&lt;</span> nSwarm <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">swarm</span> <span class="main">=</span> swarmList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> fst <span class="skolem">r</span> "</span></span></span>
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_findRunningSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> is_valid_runningSwarmPtr <span class="free">runningSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">yb</span> <span class="main">=</span> <span class="main">()</span> "</span></span></span> 
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">rSPtr</span><span class="main">,</span> <span class="bound">nRS</span><span class="main">)</span> <span class="main">(</span><span class="bound">iI</span><span class="main">,</span> <span class="bound">nRSI</span><span class="main">)</span><span class="main">.</span> int <span class="bound">i</span> <span class="main">=</span> <span class="bound">iI</span> <span class="main">∧</span> <span class="bound">nRS</span> <span class="main">=</span> <span class="bound">nRSI</span>  "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre<span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
            <span class="keyword1"><span class="command">unfolding</span></span> impl_ACTOR_STATE_RUNNING_def schePtrEqual_def 
                      swarmListEqual_def swarmInfoEqual_def stateACBEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>13<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> Word.sint_0 actorState.distinct<span class="main"><span class="main">(</span></span>15<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>17<span class="main"><span class="main">)</span></span>  actorState.distinct<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>5<span class="main"><span class="main">)</span></span> num.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> numeral_eq_one_iff zero_neq_one<span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_findRunningSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            is_valid_runningSwarmPtr <span class="free">runningSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">ya</span> <span class="main">=</span> <span class="main">()</span> <span class="main">∧</span> fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
            sint <span class="main">(</span>SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
            sint impl_ACTOR_STATE_RUNNING <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">()</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_findRunningSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            is_valid_runningSwarmPtr <span class="free">runningSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">ya</span> <span class="main">=</span> <span class="main">()</span> <span class="main">∧</span> fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
            sint <span class="main">(</span>SwarmInfo_C.state_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free">schePtr</span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
            sint impl_ACTOR_STATE_RUNNING <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">()</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
            <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def guard_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def  is_valid_minSwarmPtr_def
                      swarmInfoEqual_def is_valid_runningSwarmPtr_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def  swarmInfoEqual_def
                       is_valid_minSwarmPtr_def is_valid_runningSwarmPtr_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>  
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def pluginPtrListEqual_def 
                          stringPtrListEqual_def int64PtrListEqual_def pluginEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                                pluginInfoListEqual_def pluginInfoEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                                pluginInfoListEqual_def pluginInfoEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                                pluginInfoListEqual_def pluginInfoEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  
          <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def guard_def
                          is_valid_runningSwarmPtr_def sche_valid_findRunningSwarm_def
          <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
        <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def guard_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_findRunningSwarm_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> is_valid_runningSwarmPtr_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_findRunningSwarm_aux0<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_findRunningSwarm_def 
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span> <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_findRunningSwarm <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  is_valid_runningSwarmPtr <span class="free">runningSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> "</span></span></span> 
                  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span> sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_findRunningSwarm_def is_valid_runningSwarmPtr_def 
     <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoop_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">n</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">r</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>



 <span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹findToPauseActors   verify›</span></span></span>


<span class="keyword1"><span class="command">definition</span></span> sche_valid_findToPauseActors<span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_findToPauseActors</span>  <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> 
          is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="main">∧</span>
           is_valid_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
        sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">2147483646</span> <span class="main">∧</span> 
          <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span> is_valid_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">)</span> <span class="main">∧</span>
              is_valid_SwarmInfo_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>  <span class="main">∧</span>
          sint <span class="main">(</span>nSwarm_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">1024</span> <span class="main">∧</span> 
          <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span>  is_valid_SwarmInfo_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span><span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free"><span class="bound">schePtr</span></span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">)</span><span class="main">)</span>
         "</span></span></span>

<span class="keyword1"><span class="command">definition</span></span> is_valid_findToPauseActors<span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">" SwarmInfo_C ptr  <span class="main">⇒</span> ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">is_valid_findToPauseActors</span> <span class="free"><span class="bound">swarmptr</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span>
                 is_valid_SwarmInfo_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">swarmptr</span></span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">r</span><span class="main">.</span> <span class="free"><span class="bound">swarmptr</span></span> <span class="main">≠</span>  pSwarmInfo_C <span class="main">(</span>heap_ACB_C <span class="free"><span class="bound">s</span></span> 
                <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
                <span class="main">(</span><span class="main">∀</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">PTR</span><span class="main">(</span>SwarmInfo_C<span class="main">)</span> <span class="main">&amp;(</span><span class="free"><span class="bound">schePtr</span></span><span class="main">→</span><span class="main">[</span><span class="inner_quoted">''swarmList_C''</span><span class="main">]</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> int <span class="bound">r</span>  <span class="main">≠</span> <span class="free"><span class="bound">swarmptr</span></span><span class="main">)</span>"</span></span></span>


<span class="keyword1"><span class="command">lemma</span></span> des_impl_findToPauseActors  <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"
  corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True <span class="main">)</span>
   <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_findToPauseActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_findToPauseActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span> 
   <span class="main">(</span>Des_findToPauseActors <span class="free">minSwarmDes</span> <span class="free">minPrio</span> <span class="main">)</span> <span class="main">(</span>Impl_findToPauseActors  <span class="free">schePtr</span> <span class="free">minSwarmPtr</span> <span class="free">minPrio</span>    <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_findToPauseActors_def  Impl_findToPauseActors_def               
 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_findToPauseActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_findToPauseActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>
              <span class="main">∧</span>  sche_valid_findToPauseActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_findToPauseActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> acbListPtr
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span>  sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span>
              <span class="main">∧</span> <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>  <span class="main">∧</span>  sche_valid_findToPauseActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
              swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_findToPauseActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True "</span></span></span> 
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> int <span class="bound">r</span> <span class="main">=</span> fst <span class="bound">r'</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret'
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoop<span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r' <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  sche_valid_findToPauseActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
            swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_findToPauseActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
             <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span> fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span> <span class="main">()</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> rv y ya
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span>  acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span> <span class="main">!</span> <span class="skolem">r</span>"</span></span></span> 
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  sche_valid_findToPauseActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
            swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_findToPauseActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
             <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span> fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span> "</span></span></span> 
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>  
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span> <span class="skolem">r</span> <span class="main">+</span> <span class="main">1</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="main"><span class="bound">_</span></span> <span class="main">.</span>  True"</span></span></span>
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> rv tmpACB
                  <span class="keyword1"><span class="command">unfolding</span></span> when_def
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_simple_pre<span class="main">)</span></span>
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> impl_ACTOR_STATE_RUNNING_def
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                    <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def stateACBEqual_def
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">smt</span> actorState.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>11<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>13<span class="main"><span class="main">)</span></span> actorState.distinct<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span><span class="main">)</span></span>
                    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">smt</span></span>
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  sche_valid_findToPauseActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
            swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_findToPauseActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
             <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span> fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span>  <span class="bound">r</span> <span class="main">=</span> <span class="main">()</span>  <span class="main">∧</span> 
             <span class="skolem">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> y ya
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  sche_valid_findToPauseActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
              swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>  is_valid_findToPauseActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
              <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span>  fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span> <span class="skolem">ya</span> <span class="main">=</span> <span class="main">()</span> <span class="main">∧</span>
              <span class="skolem">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span> <span class="main">∧</span>
                 <span class="bound">ret</span> <span class="main">=</span> <span class="main">(</span>swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="skolem">tmpACB</span><span class="main">)</span><span class="main">)</span> <span class="main">≠</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> retb 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="skolem">acbListPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
                <span class="skolem">acbListPtr</span> <span class="main">=</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  sche_valid_findToPauseActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>  is_valid_findToPauseActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span>  fst <span class="skolem">r'</span> <span class="main">&lt;</span> <span class="skolem">ret'</span> <span class="main">∧</span> <span class="skolem">ya</span> <span class="main">=</span> <span class="main">()</span> <span class="main">∧</span>
                <span class="skolem">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'</span><span class="main">)</span> <span class="main">∧</span>
                <span class="skolem">retb</span> <span class="main">=</span> <span class="main">(</span>swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="main">(</span>pSwarmInfo_C <span class="skolem">tmpACB</span><span class="main">)</span><span class="main">)</span> <span class="main">≠</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
                <span class="bound">ret</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">if</span> <span class="skolem">retb</span> <span class="keyword1">then</span> True <span class="keyword1">else</span> <span class="main">(</span><span class="free">minPrio</span> <span class="main">&lt;</span> sint <span class="main">(</span>prio_C <span class="skolem">tmpACB</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_simple_pre<span class="main">)</span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
                         <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">smt</span> actorState.distinct<span class="main"><span class="main">(</span></span>1<span class="main"><span class="main">)</span></span>  actorState.distinct<span class="main"><span class="main">(</span></span>9<span class="main"><span class="main">)</span></span> finish_puase_apiList<span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
                         <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def guard_def actorPluginInfoVectorPushback'_def 
                         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                         <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def swarmInfoEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def pluginPtrListEqual_def 
                                            stringPtrListEqual_def int64PtrListEqual_def pluginEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                           <span class="keyword1"><span class="command">unfolding</span></span>  actorPluginInfoEqual_sche_def 
                           <span class="keyword1"><span class="command">using</span></span> min_puase_apiList finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">force</span><span class="main"><span class="keyword3">+</span></span></span>
                         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span> 
                   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                 <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def guard_def ACBVectorSize'_def   <span class="keyword1"><span class="command">by</span></span>  <span class="language"><span class="operator">auto</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
              <span class="keyword1"><span class="command">unfolding</span></span> ACBVectorSize'_def actorPluginInfoVectorPushback'_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_findToPauseActors_def swarmInfoEqual_def is_valid_findToPauseActors_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span> <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_findToPauseActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  is_valid_findToPauseActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> "</span></span></span> 
                  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
              <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_findToPauseActors_def swarmInfoEqual_def is_valid_findToPauseActors_def
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>   <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
            <span class="keyword1"><span class="command">unfolding</span></span> skip_def   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
            <span class="keyword1"><span class="command">unfolding</span></span> ACBVectorSize'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹pauseSwarmAndActors   verify›</span></span></span>

<span class="keyword1"><span class="command">definition</span></span> sche_valid_pauseSwarmAndActors<span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_pauseSwarmAndActors</span>  <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> 
            is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="main">∧</span> 
          is_valid_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
          is_valid_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
          <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span> is_valid_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
          is_valid_ActorPluginInfoVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
          <span class="main">(</span><span class="main">∀</span><span class="bound">r</span><span class="main">.</span> is_valid_ActorPluginInfo_C <span class="free"><span class="bound">s</span></span>
          <span class="main">(</span>ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">∧</span>
           <span class="main">0</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">2147483646</span> <span class="main">∧</span>
          sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">2147483646</span> "</span></span></span>


<span class="keyword1"><span class="command">definition</span></span> is_valid_pauseSwarmAndActors<span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">" SwarmInfo_C ptr  <span class="main">⇒</span> ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">is_valid_pauseSwarmAndActors</span> <span class="free"><span class="bound">swarmptr</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span>
                 is_valid_SwarmInfo_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">swarmptr</span></span> "</span></span></span>

<span class="keyword1"><span class="command">definition</span></span> swarmInfoOpEqual<span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"SwarmInfo option <span class="main">⇒</span>  SwarmInfo_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool  "</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">swarmInfoOpEqual</span> <span class="free"><span class="bound">swarmOP</span></span> <span class="free"><span class="bound">sawrmPtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> 
        <span class="main">(</span><span class="free"><span class="bound">swarmOP</span></span> <span class="main">=</span> None <span class="main">∧</span> <span class="free"><span class="bound">sawrmPtr</span></span> <span class="main">=</span> NULL<span class="main">)</span> <span class="main">∨</span> 
        <span class="main">(</span><span class="free"><span class="bound">swarmOP</span></span> <span class="main">≠</span> None <span class="main">∧</span>  <span class="free"><span class="bound">sawrmPtr</span></span> <span class="main">≠</span> NULL <span class="main">∧</span> swarmInfoEqual <span class="main">(</span>the <span class="free"><span class="bound">swarmOP</span></span><span class="main">)</span> <span class="free"><span class="bound">sawrmPtr</span></span> <span class="free"><span class="bound">s</span></span><span class="main">)</span>"</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_pauseSwarmAndActors_aux0<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"int <span class="free">r</span> <span class="main">=</span> fst <span class="free">r'</span> <span class="main">⟹</span>
       no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
            sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            fst <span class="free">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
             <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span> <span class="free">a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">∧</span>
            <span class="free">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span>  <span class="main">)</span> 
       <span class="main">(</span> condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ActorPluginInfo_C.actorID_C <span class="main">(</span>heap_ActorPluginInfo_C <span class="bound">s</span>
                           <span class="main">(</span>ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="free">r'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
                        ACB_C.actorID_C <span class="free">tmpACB</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">head</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">y</span> <span class="main">&lt;-</span> modify <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> <span class="bound">σ</span><span class="main">⦇</span>heap_ACB_C <span class="main">:=</span> <span class="main">(</span>heap_ACB_C <span class="bound">σ</span><span class="main">)</span><span class="main">(</span><span class="bound">head</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span> <span class="main">:=</span> ACB_C.state_C_update <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_PAUSE<span class="main">)</span> <span class="free">tmpACB</span><span class="main">)</span><span class="main">⦈</span><span class="main">)</span><span class="main">;</span>
              throwError <span class="main">(</span>Break<span class="main">,</span> <span class="free">a</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">a</span> <span class="main">≤</span> <span class="numeral">2147483646</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              returnOk <span class="main">(</span><span class="free">a</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span> <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_pauseSwarmAndActors_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_pauseSwarmAndActors_aux10<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">" no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">ret'a</span> <span class="main">=</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">minPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">minPtr</span> <span class="main">=</span> toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
            swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
            sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="free">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>  <span class="main">)</span> 
    <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ActorPluginInfo_C.actorID_C
                         <span class="main">(</span>heap_ActorPluginInfo_C <span class="bound">s</span>
                           <span class="main">(</span>ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
                        ACB_C.actorID_C <span class="free">tmpACB</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">head</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">y</span> <span class="main">&lt;-</span> modify <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> <span class="bound">σ</span><span class="main">⦇</span>heap_ACB_C <span class="main">:=</span> <span class="main">(</span>heap_ACB_C <span class="bound">σ</span><span class="main">)</span><span class="main">(</span><span class="bound">head</span> <span class="main">:=</span> ACB_C.state_C_update <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_PAUSE<span class="main">)</span> <span class="free">tmpACB</span><span class="main">)</span><span class="main">⦈</span><span class="main">)</span><span class="main">;</span>
              throwError <span class="main">(</span>Break<span class="main">,</span> <span class="main">0</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              returnOk <span class="main">(</span><span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_pauseSwarmAndActors_def is_valid_pauseSwarmAndActors_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_pauseSwarmAndActors_aux11<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">" no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">ret'a</span> <span class="main">=</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">minPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">minPtr</span> <span class="main">=</span> toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
            sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
             <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span> <span class="free">a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
        <span class="main">(</span> whileLoopE <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="bound">r</span> <span class="main">∧</span> fst <span class="bound">r</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
        <span class="main">(</span><span class="main">λ</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">tmpACB</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">y</span> <span class="main">&lt;-</span>
                 guard
                  <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorPluginInfo_C <span class="bound">s</span>
                         <span class="main">(</span>ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ActorPluginInfo_C.actorID_C
                                  <span class="main">(</span>heap_ActorPluginInfo_C <span class="bound">s</span>
                                    <span class="main">(</span>ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
                                 ACB_C.actorID_C <span class="bound">tmpACB</span><span class="main">)</span>
                   <span class="main">(</span><span class="keyword1">do</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                       <span class="bound">head</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                       <span class="bound">y</span> <span class="main">&lt;-</span>
                       modify
                        <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> <span class="bound">σ</span><span class="main">⦇</span>heap_ACB_C <span class="main">:=</span> <span class="main">(</span>heap_ACB_C <span class="bound">σ</span><span class="main">)</span>
                                  <span class="main">(</span><span class="bound">head</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="bound">r</span> <span class="main">:=</span> ACB_C.state_C_update <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_PAUSE<span class="main">)</span> <span class="bound">tmpACB</span><span class="main">)</span><span class="main">⦈</span><span class="main">)</span><span class="main">;</span>
                       throwError <span class="main">(</span>Break<span class="main">,</span> fst <span class="bound">r</span><span class="main">)</span>
                    <span class="keyword1">od</span><span class="main">)</span>
                   <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> fst <span class="bound">r</span> <span class="main">≤</span> <span class="numeral">2147483646</span><span class="main">)</span><span class="main">;</span>
                       <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                       <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                       <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                       returnOk <span class="main">(</span>fst <span class="bound">r</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">)</span>
                    <span class="keyword1">od</span><span class="main">)</span>
              <span class="keyword1">od</span><span class="main">)</span>
       <span class="main">(</span><span class="main">0</span><span class="main">,</span> <span class="free">ret'</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> noFail_whileLoopE<span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_pauseSwarmAndActors_aux10<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> minSwarmPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">minSwarmPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ret'a<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">ret'a</span></span></span> 
                    <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> minSwarmDes <span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">minSwarmDes</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> minPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">minPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> a<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">a</span></span></span></span>  <span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_pauseSwarmAndActors_def is_valid_pauseSwarmAndActors_def
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_pauseSwarmAndActors_aux1<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">"  no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">ret'a</span> <span class="main">=</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">minPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">minPtr</span> <span class="main">=</span> toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
            sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
             <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span> <span class="free">a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
  <span class="main">(</span> <span class="main">(</span>whileLoopE <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="bound">r</span> <span class="main">∧</span> fst <span class="bound">r</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
           <span class="main">(</span><span class="main">λ</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">tmpACB</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span>
                    guard
                     <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorPluginInfo_C <span class="bound">s</span>
                            <span class="main">(</span>ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ActorPluginInfo_C.actorID_C
                                     <span class="main">(</span>heap_ActorPluginInfo_C <span class="bound">s</span>
                                       <span class="main">(</span>ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
                                    ACB_C.actorID_C <span class="bound">tmpACB</span><span class="main">)</span>
                      <span class="main">(</span><span class="keyword1">do</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">head</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">y</span> <span class="main">&lt;-</span>
                          modify
                           <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> <span class="bound">σ</span><span class="main">⦇</span>heap_ACB_C <span class="main">:=</span> <span class="main">(</span>heap_ACB_C <span class="bound">σ</span><span class="main">)</span>
                                     <span class="main">(</span><span class="bound">head</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="bound">r</span> <span class="main">:=</span> ACB_C.state_C_update <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_PAUSE<span class="main">)</span> <span class="bound">tmpACB</span><span class="main">)</span><span class="main">⦈</span><span class="main">)</span><span class="main">;</span>
                          throwError <span class="main">(</span>Break<span class="main">,</span> fst <span class="bound">r</span><span class="main">)</span>
                       <span class="keyword1">od</span><span class="main">)</span>
                      <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> fst <span class="bound">r</span> <span class="main">≤</span> <span class="numeral">2147483646</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          returnOk <span class="main">(</span>fst <span class="bound">r</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">)</span>
                       <span class="keyword1">od</span><span class="main">)</span>
                 <span class="keyword1">od</span><span class="main">)</span>
          <span class="main">(</span><span class="main">0</span><span class="main">,</span> <span class="free">ret'</span><span class="main">)</span> <span class="keyword1">&lt;catch&gt;</span>
         <span class="main">(</span><span class="main">λ</span><span class="bound">global_exn_var</span><span class="main">.</span> return <span class="main">(</span>snd <span class="bound">global_exn_var</span><span class="main">,</span> <span class="main">-</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> catch_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_pauseSwarmAndActors_aux11<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> minSwarmPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">minSwarmPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ret'a <span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">ret'a</span></span></span>
                    <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> minSwarmDes <span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">minSwarmDes</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> minPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">minPtr</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>



<span class="keyword1"><span class="command">lemma</span></span> des_impl_pauseSwarmAndActors  <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"
  corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False 
   <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True <span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> 
              <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span><span class="main">)</span>
   <span class="main">(</span>Des_pauseSwarmAndActors <span class="free">runningSwarmDes</span> <span class="free">minSwarmDes</span>  <span class="main">)</span> <span class="main">(</span>Impl_pauseSwarmAndActors  <span class="free">schePtr</span> <span class="free">runningSwarmPtr</span> <span class="free">minSwarmPtr</span> <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_pauseSwarmAndActors_def Impl_pauseSwarmAndActors_def              
 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> 
              <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span>  toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>
              <span class="main">∧</span> sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> 
              <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> rv pauPtr
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span>  sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="skolem">pauPtr</span><span class="main">)</span><span class="main">)</span>
              <span class="main">∧</span> <span class="skolem">pauPtr</span> <span class="main">=</span>  toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>
              <span class="main">∧</span>sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> 
              <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoVectorSize'_def   <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span>
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True "</span></span></span> 
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> int <span class="bound">r</span> <span class="main">=</span> fst <span class="bound">r'</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret'
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoop<span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def  actorPluginInfoListEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r' <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> 
            <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="skolem">pauPtr</span><span class="main">)</span><span class="main">)</span> 
            <span class="main">∧</span> <span class="skolem">pauPtr</span> <span class="main">=</span>  toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>
              <span class="main">∧</span>sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> 
              <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span>  fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> 
           sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> 
              <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span>  fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> 
            sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> 
              <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span>  fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> ACBVectorSize'_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">r</span> <span class="main">&lt;</span> length <span class="main">(</span>toPauseActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
              is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
              swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
              fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                          <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> int <span class="bound">r</span> <span class="main">=</span> fst <span class="bound">r'</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret'
           <span class="keyword1"><span class="command">unfolding</span></span> catch_def
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">r</span> <span class="main">&lt;</span> length <span class="main">(</span>toPauseActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
              is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
              swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
              fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                                 <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">rdes</span> <span class="bound">rimpl</span><span class="main">.</span> int <span class="bound">rdes</span> <span class="main">=</span> snd <span class="bound">rimpl</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">λ</span><span class="bound">rdes</span> <span class="bound">rimpl</span><span class="main">.</span> int <span class="bound">rdes</span> <span class="main">=</span> fst <span class="bound">rimpl</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoopE<span class="main">)</span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ra r'a s s'   
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
               <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ra r'a
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
            swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
            fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
                 <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'a</span> <span class="main">∧</span> fst <span class="skolem">r'a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                 <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">()</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
            swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
            fst <span class="skolem">r'</span>   <span class="main">&lt;</span> sint  <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
                 <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'a</span> <span class="main">∧</span> fst <span class="skolem">r'a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                 <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'a</span><span class="main">)</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                           <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> tmpACB
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
           swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>  fst <span class="skolem">r'</span>
           <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           fst <span class="skolem">r'a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           <span class="skolem">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'a</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">ret</span><span class="main">=</span><span class="main">()</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
                       <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_condition_P<span class="main">)</span></span>
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
                   <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def int64Equal_def actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def
                   <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
                   <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def guard_def ACBVectorSize'_def returnOk_def throwError_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                   <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b  <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                      <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                    <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def guard_def ACBVectorSize'_def returnOk_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
               <span class="keyword1"><span class="command">unfolding</span></span> is_valid_pauseSwarmAndActors_def sche_valid_pauseSwarmAndActors_def swarmInfoEqual_def swarmInfoOpEqual_def
               <span class="keyword1"><span class="command">by</span></span>  <span class="language"><span class="operator">auto</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_pauseSwarmAndActors_aux0<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> minSwarmPtr <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="language"><span class="free">minSwarmPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> minSwarmDes <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="language"><span class="free">minSwarmDes</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
               <span class="keyword1"><span class="command">unfolding</span></span> is_valid_pauseSwarmAndActors_def sche_valid_pauseSwarmAndActors_def swarmInfoEqual_def 
               <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
              <span class="keyword1"><span class="command">unfolding</span></span> whileLoop_terminatesE_def throwError_def returnOk_def
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span>
                 <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span>  is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span> 
                   <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span> Inl <span class="bound">a</span> <span class="main">⇒</span> <span class="main">0</span> <span class="main">|</span>
                                     Inr <span class="bound">v</span> <span class="main">⇒</span> nat <span class="main">(</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> nat <span class="main">(</span>fst <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
               <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.lift_def throwError_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
               <span class="keyword1"><span class="command">unfolding</span></span> is_valid_pauseSwarmAndActors_def sche_valid_pauseSwarmAndActors_def swarmInfoEqual_def 
               <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span>  <span class="bound">i</span> <span class="main">≤</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> length <span class="main">(</span>toPauseActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">r</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span>  <span class="bound">i</span> <span class="main">≥</span> <span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span> <span class="main">≤</span>  sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
       <span class="main">∧</span>  is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
        fst <span class="skolem">r'</span>  <span class="main">&lt;</span> sint  <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 4  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> x xa <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="language"><span class="skolem">x</span></span></span><span class="main">)</span></span>   <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
           <span class="keyword1"><span class="command">unfolding</span></span> is_valid_pauseSwarmAndActors_def sche_valid_pauseSwarmAndActors_def swarmInfoEqual_def swarmInfoOpEqual_def 
           <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span>  <span class="bound">i</span> <span class="main">≤</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> length <span class="main">(</span>toPauseActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">r</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="bound">i</span> <span class="main">∧</span> fst <span class="bound">i</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
                  sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>   is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                 swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>  swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
                 fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> fst <span class="bound">r</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 5 
          <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def guard_def ACBVectorSize'_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> is_valid_pauseSwarmAndActors_def sche_valid_pauseSwarmAndActors_def swarmInfoEqual_def swarmInfoOpEqual_def
           <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span> <span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="bound">j</span> <span class="main">∧</span> <span class="bound">j</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                             <span class="main">∧</span>  <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="skolem">pauPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
               <span class="skolem">pauPtr</span> <span class="main">=</span> toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
               is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span> <span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def ACBVectorSize'_def case_prod_unfold
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> is_valid_pauseSwarmAndActors_def sche_valid_pauseSwarmAndActors_def swarmInfoEqual_def swarmInfoOpEqual_def
           <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a 
        <span class="keyword1"><span class="command">unfolding</span></span>  ACBVectorSize'_def case_prod_unfold  
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_pauseSwarmAndActors_aux1<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> minSwarmPtr <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="language"><span class="free">minSwarmPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> minSwarmDes <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="language"><span class="free">minSwarmDes</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> minPtr <span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">pauPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> a<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">a</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ret'a<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">ret'</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="bound">i</span> <span class="main">∧</span> fst <span class="bound">i</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
                  is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                   <span class="main">0</span> <span class="main">≤</span> <span class="skolem">a</span> <span class="main">∧</span> <span class="skolem">a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
                  <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="skolem">pauPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">pauPtr</span> <span class="main">=</span> toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> "</span></span></span> 
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> fst <span class="bound">r</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> is_valid_pauseSwarmAndActors_def sche_valid_pauseSwarmAndActors_def swarmInfoEqual_def swarmInfoOpEqual_def 
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b s 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span> <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> 
            sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> 
              <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span>"</span></span></span> 
                  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>ActorPluginInfoVector_C.length_C  <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a sa 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span> <span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="bound">j</span> <span class="main">∧</span> <span class="bound">j</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
                           sche_valid_pauseSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_pauseSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span>
                         <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoOpEqual <span class="free">runningSwarmDes</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
                  <span class="main">0</span> <span class="main">≤</span> <span class="skolem">a</span> <span class="main">∧</span>  <span class="skolem">a</span> <span class="main">&lt;</span> sint  <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
                   sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="skolem">sa</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">sa</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> 
                   sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>  "</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span> <span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def ACBVectorSize'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> is_valid_pauseSwarmAndActors_def sche_valid_pauseSwarmAndActors_def swarmInfoEqual_def swarmInfoOpEqual_def
          <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="main">(</span><span class="keyword1">if</span> <span class="main">(</span>swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">runningSwarmPtr</span><span class="main">)</span> <span class="main">≠</span> swarmID_C <span class="main">(</span>heap_SwarmInfo_C <span class="bound">s</span> <span class="free">minSwarmPtr</span><span class="main">)</span><span class="main">)</span> 
                                                          <span class="main">∧</span> <span class="main">(</span><span class="free">runningSwarmPtr</span> <span class="main">≠</span> NULL<span class="main">)</span>
                                                        <span class="keyword1">then</span> <span class="main">1</span> <span class="keyword1">else</span> <span class="main">0</span><span class="main">)</span> <span class="main">=</span> <span class="bound">ret</span>  <span class="main">)</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True <span class="main">)</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True <span class="main">)</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span> <span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def guard_def  returnOk_def when_def 
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b
          <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> acbPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
         <span class="keyword1"><span class="command">using</span></span> acbEqual_1_def acb_C_acb_equal <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">presburger</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def
         <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def stringPtrListEqual_def 
              int64PtrListEqual_def pluginPtrListEqual_def  pluginEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def
                  taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
<span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b
          <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> acbPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
         <span class="keyword1"><span class="command">using</span></span> acbEqual_1_def acb_C_acb_equal <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">presburger</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def
         <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def stringPtrListEqual_def 
              int64PtrListEqual_def pluginPtrListEqual_def  pluginEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def
                  taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b
          <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def
         <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b
          <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def
         <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹runSwarmAndActors verify›</span></span></span>

<span class="keyword1"><span class="command">definition</span></span> sche_valid_runSwarmAndActors<span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">"ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">sche_valid_runSwarmAndActors</span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span> 
          is_valid_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="main">∧</span> 
          is_valid_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
          is_valid_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
          <span class="main">(</span><span class="main">∀</span><span class="bound">a</span><span class="main">.</span> is_valid_ACB_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">a</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
          is_valid_ActorPluginInfoVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
          <span class="main">(</span><span class="main">∀</span><span class="bound">r</span><span class="main">.</span> is_valid_ActorPluginInfo_C <span class="free"><span class="bound">s</span></span>
          <span class="main">(</span>ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">∧</span>
           <span class="main">0</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
           sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">2147483646</span> <span class="main">∧</span>
          sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="free"><span class="bound">s</span></span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">schePtr</span></span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">≤</span> <span class="numeral">2147483646</span> "</span></span></span>


<span class="keyword1"><span class="command">definition</span></span> is_valid_runSwarmAndActors<span class="main">::</span> <span class="quoted"><span class="quoted"><span class="language">" SwarmInfo_C ptr  <span class="main">⇒</span> ActorScheduler_C ptr <span class="main">⇒</span> lifted_globals <span class="main">⇒</span> bool"</span></span></span>
  <span class="keyword2"><span class="keyword">where</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="free">is_valid_runSwarmAndActors</span> <span class="free"><span class="bound">swarmptr</span></span> <span class="free"><span class="bound">schePtr</span></span> <span class="free"><span class="bound">s</span></span> <span class="main">≡</span>
                 is_valid_SwarmInfo_C <span class="free"><span class="bound">s</span></span> <span class="free"><span class="bound">swarmptr</span></span> "</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_runSwarmAndActors_aux0<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"int <span class="free">r</span> <span class="main">=</span> fst <span class="free">r'</span> <span class="main">⟹</span>
       no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
            sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            fst <span class="free">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
             <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span> <span class="free">a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">∧</span>
            <span class="free">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span><span class="main">)</span>  <span class="main">)</span> 
       <span class="main">(</span> condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ActorPluginInfo_C.actorID_C
                         <span class="main">(</span>heap_ActorPluginInfo_C <span class="bound">s</span>
                           <span class="main">(</span>ActorPluginInfoVector_C.data_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="free">r'</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
                        ACB_C.actorID_C <span class="free">tmpACB</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">head</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">y</span> <span class="main">&lt;-</span>
              modify <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> <span class="bound">σ</span><span class="main">⦇</span>heap_ACB_C <span class="main">:=</span> <span class="main">(</span>heap_ACB_C <span class="bound">σ</span><span class="main">)</span><span class="main">(</span><span class="bound">head</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> <span class="free">a</span> <span class="main">:=</span> ACB_C.state_C_update <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_RUNNING<span class="main">)</span> <span class="free">tmpACB</span><span class="main">)</span><span class="main">⦈</span><span class="main">)</span><span class="main">;</span>
              throwError <span class="main">(</span>Break<span class="main">,</span> <span class="free">a</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">a</span> <span class="main">≤</span> <span class="numeral">2147483646</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              returnOk <span class="main">(</span><span class="free">a</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span> <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_runSwarmAndActors_def
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_runSwarmAndActors_aux10<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">" no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">ret'a</span> <span class="main">=</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">minPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">minPtr</span> <span class="main">=</span> minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
            swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
            sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            <span class="free">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>  <span class="main">)</span> 
    <span class="main">(</span>condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ActorPluginInfo_C.actorID_C
                         <span class="main">(</span>heap_ActorPluginInfo_C <span class="bound">s</span>
                           <span class="main">(</span>ActorPluginInfoVector_C.data_C
                             <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span>
                            <span class="free">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
                        ACB_C.actorID_C <span class="free">tmpACB</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">head</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">y</span> <span class="main">&lt;-</span>
              modify
               <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> <span class="bound">σ</span><span class="main">⦇</span>heap_ACB_C <span class="main">:=</span> <span class="main">(</span>heap_ACB_C <span class="bound">σ</span><span class="main">)</span>
                         <span class="main">(</span><span class="bound">head</span> <span class="main">:=</span> ACB_C.state_C_update <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_RUNNING<span class="main">)</span> <span class="free">tmpACB</span><span class="main">)</span><span class="main">⦈</span><span class="main">)</span><span class="main">;</span>
              throwError <span class="main">(</span>Break<span class="main">,</span> <span class="main">0</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span>
          <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
              returnOk <span class="main">(</span><span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">)</span>
           <span class="keyword1">od</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> non_fail_condition<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_runSwarmAndActors_def is_valid_runSwarmAndActors_def
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_runSwarmAndActors_aux11<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">" no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">ret'a</span> <span class="main">=</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">minPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">minPtr</span> <span class="main">=</span> minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
            sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
             <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span> <span class="free">a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
        <span class="main">(</span> <span class="main">(</span>whileLoopE <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="bound">r</span> <span class="main">∧</span> fst <span class="bound">r</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
        <span class="main">(</span><span class="main">λ</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">y</span> <span class="main">&lt;-</span>
                 guard
                  <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">tmpACB</span> <span class="main">&lt;-</span>
                 gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 <span class="bound">y</span> <span class="main">&lt;-</span>
                 guard
                  <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorPluginInfo_C <span class="bound">s</span>
                         <span class="main">(</span>ActorPluginInfoVector_C.data_C
                           <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span>
                          <span class="free">a</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                 condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ActorPluginInfo_C.actorID_C
                                  <span class="main">(</span>heap_ActorPluginInfo_C <span class="bound">s</span>
                                    <span class="main">(</span>ActorPluginInfoVector_C.data_C
                                      <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span>
                                     <span class="free">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
                                 ACB_C.actorID_C <span class="bound">tmpACB</span><span class="main">)</span>
                   <span class="main">(</span><span class="keyword1">do</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                       <span class="bound">head</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                       <span class="bound">y</span> <span class="main">&lt;-</span>
                       modify
                        <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> <span class="bound">σ</span><span class="main">⦇</span>heap_ACB_C <span class="main">:=</span> <span class="main">(</span>heap_ACB_C <span class="bound">σ</span><span class="main">)</span>
                                  <span class="main">(</span><span class="bound">head</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="bound">r</span> <span class="main">:=</span>
                                     ACB_C.state_C_update <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_RUNNING<span class="main">)</span> <span class="bound">tmpACB</span><span class="main">)</span><span class="main">⦈</span><span class="main">)</span><span class="main">;</span>
                       throwError <span class="main">(</span>Break<span class="main">,</span> fst <span class="bound">r</span><span class="main">)</span>
                    <span class="keyword1">od</span><span class="main">)</span>
                   <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> fst <span class="bound">r</span> <span class="main">≤</span> <span class="numeral">2147483646</span><span class="main">)</span><span class="main">;</span>
                       <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                       <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                       <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                       returnOk <span class="main">(</span>fst <span class="bound">r</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">)</span>
                    <span class="keyword1">od</span><span class="main">)</span>
              <span class="keyword1">od</span><span class="main">)</span>
       <span class="main">(</span><span class="main">0</span><span class="main">,</span> <span class="free">ret'</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> noFail_whileLoopE<span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_runSwarmAndActors_aux10<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> minSwarmPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">minSwarmPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ret'a<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">ret'a</span></span></span> 
                    <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> minSwarmDes <span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">minSwarmDes</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> minPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">minPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> a<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">a</span></span></span></span>  <span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_runSwarmAndActors_def is_valid_runSwarmAndActors_def
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_runSwarmAndActors_aux1<span class="main">:</span>
<span class="quoted"><span class="quoted"><span class="language">"  no_fail <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">ret'a</span> <span class="main">=</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="free">minPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="free">minPtr</span> <span class="main">=</span> minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>
            sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>
             <span class="main">0</span> <span class="main">≤</span> <span class="free">a</span> <span class="main">∧</span> <span class="free">a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
  <span class="main">(</span>whileLoopE <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="bound">r</span> <span class="main">∧</span>
                            fst <span class="bound">r</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
           <span class="main">(</span><span class="main">λ</span><span class="bound">r</span><span class="main">.</span> <span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span>
                    guard
                     <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">tmpACB</span> <span class="main">&lt;-</span>
                    gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="bound">r</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    <span class="bound">y</span> <span class="main">&lt;-</span>
                    guard
                     <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorPluginInfo_C <span class="bound">s</span>
                            <span class="main">(</span>ActorPluginInfoVector_C.data_C
                              <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span>
                             <span class="free">a</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                    condition <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ActorPluginInfo_C.actorID_C
                                     <span class="main">(</span>heap_ActorPluginInfo_C <span class="bound">s</span>
                                       <span class="main">(</span>ActorPluginInfoVector_C.data_C
                                         <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span>
                                        <span class="free">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span>
                                    ACB_C.actorID_C <span class="bound">tmpACB</span><span class="main">)</span>
                      <span class="main">(</span><span class="keyword1">do</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">head</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">y</span> <span class="main">&lt;-</span>
                          modify
                           <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> <span class="bound">σ</span><span class="main">⦇</span>heap_ACB_C <span class="main">:=</span> <span class="main">(</span>heap_ACB_C <span class="bound">σ</span><span class="main">)</span>
                                     <span class="main">(</span><span class="bound">head</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="bound">r</span> <span class="main">:=</span>
                                        ACB_C.state_C_update <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_RUNNING<span class="main">)</span> <span class="bound">tmpACB</span><span class="main">)</span><span class="main">⦈</span><span class="main">)</span><span class="main">;</span>
                          throwError <span class="main">(</span>Break<span class="main">,</span> fst <span class="bound">r</span><span class="main">)</span>
                       <span class="keyword1">od</span><span class="main">)</span>
                      <span class="main">(</span><span class="keyword1">do</span> <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> fst <span class="bound">r</span> <span class="main">≤</span> <span class="numeral">2147483646</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">y</span> <span class="main">&lt;-</span> guard <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> is_valid_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">v___ptr_to_struct_ACBVector_C'param</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          <span class="bound">ret'</span> <span class="main">&lt;-</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="bound">v___ptr_to_struct_ACBVector_C'param</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">;</span>
                          returnOk <span class="main">(</span>fst <span class="bound">r</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">ret'</span><span class="main">)</span>
                       <span class="keyword1">od</span><span class="main">)</span>
                 <span class="keyword1">od</span><span class="main">)</span>
          <span class="main">(</span><span class="main">0</span><span class="main">,</span> <span class="free">ret'</span><span class="main">)</span> <span class="keyword1">&lt;catch&gt;</span>
         <span class="main">(</span><span class="main">λ</span><span class="bound">global_exn_var</span><span class="main">.</span> return <span class="main">(</span>snd <span class="bound">global_exn_var</span><span class="main">,</span> <span class="main">-</span> <span class="main">1</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> catch_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_runSwarmAndActors_aux11<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> minSwarmPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">minSwarmPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ret'a <span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">ret'a</span></span></span>
                    <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> minSwarmDes <span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">minSwarmDes</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> minPtr<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">minPtr</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_runSwarmAndActors  <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"
  corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True <span class="main">)</span>
   <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True <span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span><span class="main">)</span> 
   <span class="main">(</span>Des_runSwarmAndActors  <span class="free">minSwarmDes</span>  <span class="main">)</span> <span class="main">(</span>Impl_runSwarmAndActors  <span class="free">schePtr</span>  <span class="free">minSwarmPtr</span> <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span>  Des_runSwarmAndActors_def  Impl_runSwarmAndActors_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span>  minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>
              <span class="main">∧</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> rv minPtr
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span>  sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="skolem">minPtr</span><span class="main">)</span><span class="main">)</span>
              <span class="main">∧</span> <span class="skolem">minPtr</span> <span class="main">=</span>  minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>
              <span class="main">∧</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoVectorSize'_def   <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span>
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True "</span></span></span> 
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> int <span class="bound">r</span> <span class="main">=</span> fst <span class="bound">r'</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret'
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoop<span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def  actorPluginInfoListEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> r r' <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> 
            <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="skolem">minPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
            <span class="skolem">minPtr</span> <span class="main">=</span> minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
            is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
            <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span>  fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> 
            is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
            <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span>  fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> 
            is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span><span class="main">∧</span> 
            <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span>  fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> ACBVectorSize'_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">r</span> <span class="main">&lt;</span> length <span class="main">(</span>minPrioActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
            <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'</span> <span class="main">∧</span>  fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                          <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> int <span class="bound">r</span> <span class="main">=</span> fst <span class="bound">r'</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ret'
           <span class="keyword1"><span class="command">unfolding</span></span> catch_def
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">r</span> <span class="main">&lt;</span> length <span class="main">(</span>minPrioActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                        <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                           fst <span class="skolem">r'</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                          <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">rdes</span> <span class="bound">rimpl</span><span class="main">.</span> int <span class="bound">rdes</span> <span class="main">=</span> snd <span class="bound">rimpl</span><span class="main">)</span> <span class="main">⊕</span> <span class="main">(</span><span class="main">λ</span><span class="bound">rdes</span> <span class="bound">rimpl</span><span class="main">.</span> int <span class="bound">rdes</span> <span class="main">=</span> fst <span class="bound">rimpl</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_whileLoopE<span class="main">)</span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ra r'a s s'   
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">ra</span>"</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
               <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ra r'a
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span><span class="main">∧</span>
                 swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>  fst <span class="skolem">r'</span>  <span class="main">&lt;</span> sint  <span class="main">(</span>ActorPluginInfoVector_C.length_C 
                 <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
                 <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'a</span> <span class="main">∧</span> fst <span class="skolem">r'a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                 <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">()</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                 swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>  fst <span class="skolem">r'</span>  <span class="main">&lt;</span> sint  <span class="main">(</span>ActorPluginInfoVector_C.length_C
                 <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
                 <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'a</span> <span class="main">∧</span> fst <span class="skolem">r'a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                 <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'a</span><span class="main">)</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                           <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> tmpACB
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                   swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>  fst <span class="skolem">r'</span>  <span class="main">&lt;</span> sint  <span class="main">(</span>ActorPluginInfoVector_C.length_C
                   <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
                   <span class="main">0</span> <span class="main">≤</span> fst <span class="skolem">r'a</span> <span class="main">∧</span> fst <span class="skolem">r'a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                   <span class="main">∧</span> <span class="skolem">tmpACB</span> <span class="main">=</span> heap_ACB_C <span class="bound">s</span> <span class="main">(</span>ACBVector_C.data_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="keyword1">+<span class="hidden">⇩</span><sub>p</sub></span> fst <span class="skolem">r'a</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">ret</span><span class="main">=</span><span class="main">()</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
                       <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_condition_P<span class="main">)</span></span>
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
                   <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbListPtrEqual_def acbPtrEqual_def int64Equal_def actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def
                   <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
                   <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def guard_def ACBVectorSize'_def returnOk_def throwError_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                   <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b  <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                      <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                    <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def guard_def ACBVectorSize'_def returnOk_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
               <span class="keyword1"><span class="command">unfolding</span></span> is_valid_runSwarmAndActors_def sche_valid_runSwarmAndActors_def swarmInfoEqual_def 
               <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_runSwarmAndActors_aux0<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> minSwarmPtr <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="language"><span class="free">minSwarmPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> minSwarmDes <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="language"><span class="free">minSwarmDes</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
               <span class="keyword1"><span class="command">unfolding</span></span> is_valid_runSwarmAndActors_def sche_valid_runSwarmAndActors_def swarmInfoEqual_def 
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
              <span class="keyword1"><span class="command">unfolding</span></span> whileLoop_terminatesE_def throwError_def returnOk_def
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span>
                 <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span>  is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span> 
                   <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> <span class="keyword1">case</span> <span class="bound">r</span> <span class="keyword1">of</span> Inl <span class="bound">a</span> <span class="main">⇒</span> <span class="main">0</span> <span class="main">|</span>
                                     Inr <span class="bound">v</span> <span class="main">⇒</span> nat <span class="main">(</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> nat <span class="main">(</span>fst <span class="bound">v</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
               <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.lift_def throwError_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
               <span class="keyword1"><span class="command">unfolding</span></span> is_valid_runSwarmAndActors_def sche_valid_runSwarmAndActors_def swarmInfoEqual_def 
               <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span>  <span class="bound">i</span> <span class="main">≤</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> length <span class="main">(</span>minPrioActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">r</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span>  <span class="bound">i</span> <span class="main">≥</span> <span class="main">0</span> <span class="main">∧</span> <span class="bound">i</span> <span class="main">≤</span>  sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
       <span class="main">∧</span>  is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
        fst <span class="skolem">r'</span>  <span class="main">&lt;</span> sint  <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 4  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> x xa <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="language"><span class="skolem">x</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
           <span class="keyword1"><span class="command">unfolding</span></span> is_valid_runSwarmAndActors_def sche_valid_runSwarmAndActors_def swarmInfoEqual_def 
           <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span>  <span class="bound">i</span> <span class="main">≤</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">r</span> <span class="main">&lt;</span> length <span class="main">(</span>minPrioActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> length <span class="main">(</span>acbList <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">r</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="bound">i</span> <span class="main">∧</span> fst <span class="bound">i</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
                  is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span>  sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
               fst <span class="skolem">r'</span>  <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span> 
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> fst <span class="bound">r</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 5 
          <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def guard_def ACBVectorSize'_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> is_valid_runSwarmAndActors_def sche_valid_runSwarmAndActors_def swarmInfoEqual_def 
           <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span> <span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="bound">j</span> <span class="main">∧</span> <span class="bound">j</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>
                             <span class="main">∧</span> <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="skolem">minPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
                          <span class="skolem">minPtr</span> <span class="main">=</span> minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                          is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span>"</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span> <span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def ACBVectorSize'_def case_prod_unfold
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> is_valid_runSwarmAndActors_def sche_valid_runSwarmAndActors_def swarmInfoEqual_def 
           <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a 
        <span class="keyword1"><span class="command">unfolding</span></span>  ACBVectorSize'_def case_prod_unfold  
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">wpsimp</span> <span class="quasi_keyword">wp</span><span class="main"><span class="main">:</span></span>des_impl_runSwarmAndActors_aux1<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> minSwarmPtr <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="language"><span class="free">minSwarmPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> minSwarmDes <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="language"><span class="free">minSwarmDes</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> minPtr <span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">minPtr</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> a<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">a</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> ret'a<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="skolem">ret'</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">i</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> fst <span class="bound">i</span> <span class="main">∧</span> fst <span class="bound">i</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
                  is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoEqual <span class="free">minSwarmDes</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                   <span class="main">0</span> <span class="main">≤</span> <span class="skolem">a</span> <span class="main">∧</span> <span class="skolem">a</span> <span class="main">&lt;</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
                  <span class="skolem">ret'</span> <span class="main">=</span> sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="skolem">minPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> <span class="skolem">minPtr</span> <span class="main">=</span> minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> "</span></span></span> 
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">r</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> fst <span class="bound">r</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> is_valid_runSwarmAndActors_def sche_valid_runSwarmAndActors_def swarmInfoEqual_def 
        <span class="keyword1"><span class="command">by</span></span>  <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b s 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> whileLoop_terminates_inv<span class="main"><span class="main">[</span></span> <span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> 
            sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span> 
                  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> R <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"measure' <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">ret</span><span class="main">)</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>ActorPluginInfoVector_C.length_C  <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">i</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a sa 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoopE_add_inv
            <span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span> <span class="bound">ret</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="main">0</span> <span class="main">≤</span> <span class="bound">j</span> <span class="main">∧</span> <span class="bound">j</span> <span class="main">≤</span> sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
                          sche_valid_runSwarmAndActors <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> is_valid_runSwarmAndActors <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
                  <span class="main">0</span> <span class="main">≤</span> <span class="skolem">a</span> <span class="main">∧</span>  <span class="skolem">a</span> <span class="main">&lt;</span> sint  <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
                   sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="skolem">sa</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="skolem">sa</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> 
                   sint <span class="main">(</span>ActorPluginInfoVector_C.length_C <span class="main">(</span>heap_ActorPluginInfoVector_C <span class="bound">s</span> <span class="main">(</span>minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>  "</span></span></span> 
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">j</span><span class="main">,</span> <span class="bound">ret</span><span class="main">)</span><span class="main">,</span> <span class="bound">s</span><span class="main">)</span><span class="main">.</span> nat <span class="main">(</span>sint <span class="main">(</span>ACBVector_C.length_C <span class="main">(</span>heap_ACBVector_C <span class="bound">s</span> <span class="main">(</span>acbList_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span> <span class="bound">j</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> validE_def throwError_def returnOk_def ACBVectorSize'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> 
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
          <span class="keyword1"><span class="command">unfolding</span></span> is_valid_runSwarmAndActors_def sche_valid_runSwarmAndActors_def swarmInfoEqual_def 
           <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
                          put_def gets_def get_def guard_def  returnOk_def
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b
          <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
         <span class="keyword1"><span class="command">unfolding</span></span> acbPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
         <span class="keyword1"><span class="command">using</span></span> acbEqual_1_def acb_C_acb_equal <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">presburger</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def
         <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def stringPtrListEqual_def 
              int64PtrListEqual_def pluginPtrListEqual_def  pluginEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def
                         taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def
                         taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def
                         taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>



<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹schedule_1 verify›</span></span></span>


<span class="keyword1"><span class="command">lemma</span></span> des_impl_schedule_1 <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"ScheduleMsgEqual <span class="free">a</span> <span class="free">b</span> <span class="main">⟹</span>
    corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span> True <span class="main">∧</span> <span class="bound">r'</span> <span class="main">=</span> <span class="main">1</span> <span class="main">∨</span> <span class="bound">r</span> <span class="main">=</span> False <span class="main">∧</span> <span class="bound">r'</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span>
     <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span>sche_valid <span class="free">schePtr</span><span class="main">)</span> Des_schedule_1 <span class="main">(</span>Impl_schedule_1 <span class="free">schePtr</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_schedule_1_def Impl_schedule_1_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_modify_ret<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>   <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">smt</span> ScheduleMsgEqual_def compare'_def compare_string<span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
            corres_underlying_def return_def gets_def ACBVectorEmpty'_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def
  <span class="keyword1"><span class="command">using</span></span> ScheduleMsgEqual_def compare'_def compare_string
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">fastforce</span><span class="main"><span class="keyword3">+</span></span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹schedule_2 verify›</span></span></span>
<span class="keyword1"><span class="command">lemma</span></span> des_impl_schedule_2 <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"ScheduleMsgEqual <span class="free">a</span> <span class="free">b</span> <span class="main">⟹</span>
    corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False 
        <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span>sche_valid <span class="free">schePtr</span><span class="main">)</span>
           Des_schedule_2 <span class="main">(</span>Impl_schedule_2 <span class="free">schePtr</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_schedule_2_def Impl_schedule_2_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
          <span class="bound">ret</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> actPluInfoVecPtr
    <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def actorPluginInfoVectorClear'_def
              corres_underlying_def return_def gets_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">smt</span> ScheduleMsgEqual_def compare'_def compare_string<span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> actPluInfoVecPtr <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoVectorClear'_def sche_valid_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
    <span class="keyword1"><span class="command">using</span></span> des_impl_findFinishActors <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">" sche_valid <span class="free">schePtr</span> <span class="improper">baa</span> <span class="main">⟶</span>  sche_valid_findFinishActors <span class="free">schePtr</span> <span class="improper">baa</span>"</span></span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">force</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_def  sche_valid_findFinishActors_def 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> finish_puase_apiList<span class="main">)</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> Impl_findFinishActors_def Impl_ACBVectorSize_def ACBVectorSize'_def sche_valid_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
            <span class="bound">ret</span> <span class="main">=</span> finishingActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> True <span class="main">∧</span> <span class="bound">r'</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> False <span class="main">∧</span> <span class="bound">r'</span> <span class="main">=</span> <span class="main">1</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> actPluInfoVecPtr
     <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def
                actorPluginInfoVectorEmpty'_def condition_def
              corres_underlying_def return_def gets_def  schePtrEqual_def
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">smt</span> ScheduleMsgEqual_def compare'_def compare_string<span class="main">)</span></span>  
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoVectorEmpty'_def sche_valid_def 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
    <span class="keyword1"><span class="command">using</span></span> des_impl_delFinishActors <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">" sche_valid <span class="free">schePtr</span> <span class="improper">baa</span> <span class="main">⟶</span>  sche_valid_delFinishActors <span class="free">schePtr</span> <span class="improper">baa</span>"</span></span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">force</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_def sche_valid_delFinishActors_def 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> finish_puase_apiList<span class="main">)</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹schedule_3 verify›</span></span></span>

<span class="keyword1"><span class="command">axiomatization</span></span> 
  <span class="keyword2"><span class="keyword">where</span></span> runSwarmAndActors_refinement <span class="main">:</span> 
     <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">P</span> <span class="bound">P'</span><span class="main">.</span>
     <span class="main">(</span><span class="main">∀</span><span class="bound">s</span><span class="main">.</span> <span class="bound">P'</span> <span class="bound">s</span> <span class="main">⟶</span> swarmInfoOpEqual <span class="free">mSPtr</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span><span class="main">)</span> <span class="main">⟹</span>
     corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True<span class="main">)</span> <span class="bound">P</span> <span class="bound">P'</span>
     <span class="main">(</span>Des_runSwarmAndActors <span class="main">(</span>the <span class="free">mSPtr</span><span class="main">)</span><span class="main">)</span>
     <span class="main">(</span>Impl_runSwarmAndActors <span class="free">scheduler</span> <span class="free">minSwarmPtr</span><span class="main">)</span>"</span></span></span>
  <span class="keyword2"><span class="keyword">and</span></span> pauseSwarmAndActors_refinement <span class="main">:</span> 
     <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">P</span> <span class="bound">P'</span><span class="main">.</span>
     <span class="main">(</span><span class="main">∀</span><span class="bound">s</span><span class="main">.</span> <span class="bound">P'</span> <span class="bound">s</span> <span class="main">⟶</span> swarmInfoOpEqual <span class="free">mSPtr</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span><span class="main">)</span> <span class="main">⟹</span>
     corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True<span class="main">)</span> <span class="bound">P</span> <span class="bound">P'</span>
     <span class="main">(</span>Des_pauseSwarmAndActors <span class="free">runSPtr</span> <span class="main">(</span>the <span class="free">mSPtr</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span>Impl_pauseSwarmAndActors <span class="free">scheduler</span> <span class="free">runningSwarmPtr</span> <span class="free">minSwarmPtr</span><span class="main">)</span>"</span></span></span>
  <span class="keyword2"><span class="keyword">and</span></span> ifMinPrioSwarmHaveActor_refinement <span class="main">:</span> 
  <span class="quoted"><span class="quoted"><span class="language">" sche_valid <span class="free">schePtr</span> <span class="free">s</span> <span class="main">⟶</span> sche_valid_ifMinPrioSwarmHaveActor <span class="free">schePtr</span> <span class="free">s</span> <span class="main">∧</span>
         is_valid_minPrioPtr <span class="free">minPrioPtr</span> <span class="free">schePtr</span> <span class="free">s</span> <span class="main">∧</span> is_valid_SwarmInfo_C <span class="free">s</span> <span class="free">minSwarmPtr</span>"</span></span></span>
  <span class="keyword2"><span class="keyword">and</span></span> updateActorPluginState_sche_refinement <span class="main">:</span> 
     <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">P</span> <span class="bound">P'</span> <span class="bound">R</span> <span class="bound">sta1</span> <span class="bound">sta2</span><span class="main">.</span> 
     <span class="main">(</span><span class="main">∀</span><span class="bound">s</span><span class="main">.</span> <span class="bound">P'</span> <span class="bound">s</span> <span class="main">⟶</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> <span class="main">⟹</span>
     stateACBEqual <span class="bound">sta1</span> <span class="main">(</span>scast <span class="bound">sta2</span><span class="main">)</span> <span class="main">⟹</span>
      corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False <span class="bound">R</span> <span class="bound">P</span> <span class="bound">P'</span>
     <span class="main">(</span>Des_updateActorPluginState_sche <span class="free">pActs</span> <span class="bound">sta1</span><span class="main">)</span>
     <span class="main">(</span>Impl_updateActorPluginState_sche <span class="free">scheduler</span> <span class="free">anActorsPtr</span> <span class="bound">sta2</span><span class="main">)</span>"</span></span></span>
  <span class="keyword2"><span class="keyword">and</span></span> findMinPrioSwarm_refinement<span class="main">:</span>
    <span class="quoted"><span class="quoted"><span class="language">" sche_valid <span class="free">schePtr</span> <span class="free">s</span> <span class="main">⟶</span> sche_valid_findMinPrioSwarm <span class="free">schePtr</span> <span class="free">s</span> <span class="main">∧</span> is_valid_minSwarmPtr <span class="free">minSwarmPtr</span> <span class="free">schePtr</span> <span class="free">s</span>"</span></span></span>
  <span class="keyword2"><span class="keyword">and</span></span> Impl_updateActorPluginState_sche_hoare<span class="main">:</span> 
    <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">P</span> <span class="bound">Q</span> <span class="bound">sta</span><span class="main">.</span>
    <span class="main">(</span><span class="main">∀</span><span class="bound">s</span><span class="main">.</span> <span class="bound">P</span> <span class="bound">s</span> <span class="main">⟶</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">Q</span> <span class="bound">r</span> <span class="bound">s</span> <span class="main">⟶</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> <span class="main">⟹</span>
    <span class="main">⦃</span><span class="bound">P</span><span class="main">⦄</span> Impl_updateActorPluginState_sche <span class="free">scheduler</span> <span class="free">anActorsPtr</span> <span class="bound">sta</span> <span class="main">⦃</span><span class="bound">Q</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword2"><span class="keyword">and</span></span> Impl_ifMinPrioSwarmHaveActor_hoare<span class="main">:</span>
    <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">P</span> <span class="bound">Q</span> <span class="bound">sta</span><span class="main">.</span>
    <span class="main">(</span><span class="main">∀</span><span class="bound">s</span><span class="main">.</span> <span class="bound">P</span> <span class="bound">s</span> <span class="main">⟶</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">Q</span> <span class="bound">r</span> <span class="bound">s</span> <span class="main">⟶</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> <span class="main">⟹</span>
    <span class="main">⦃</span><span class="bound">P</span><span class="main">⦄</span> Impl_ifMinPrioSwarmHaveActor <span class="free">schePtr</span> <span class="free">minSwarmPtr</span> <span class="free">minPrio</span> <span class="main">⦃</span><span class="bound">Q</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword2"><span class="keyword">and</span></span> Impl_findMinPrioSwarm_hoare<span class="main">:</span>
    <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">P</span> <span class="bound">Q</span> <span class="bound">sta</span><span class="main">.</span>
    <span class="main">(</span><span class="main">∀</span><span class="bound">s</span><span class="main">.</span> <span class="bound">P</span> <span class="bound">s</span> <span class="main">⟶</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span><span class="main">∀</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">Q</span> <span class="bound">r</span> <span class="bound">s</span> <span class="main">⟶</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> <span class="main">⟹</span>
    <span class="main">⦃</span><span class="bound">P</span><span class="main">⦄</span> Impl_findMinPrioSwarm <span class="free">schePtr</span> <span class="free">minSwarmPtr</span> <span class="free">minSwarmPrio___int'param</span> <span class="main">⦃</span><span class="bound">Q</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword2"><span class="keyword">and</span></span> ucast32_int  <span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"  <span class="main">(</span><span class="keyword1">UCAST</span><span class="main">(</span><span class="numeral">32</span> <span class="main">→</span> <span class="numeral">32</span> signed<span class="main">)</span> <span class="main">(</span><span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">32</span><span class="main">)</span> <span class="free">a</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="free">a</span>"</span></span></span>        

<span class="keyword1"><span class="command">lemma</span></span> des_impl_schedule_3 <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">" <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minSwarmPrio</span> <span class="main">≠</span> <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minPrio</span> <span class="main">⟹</span>
    <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">condition3</span> <span class="main">≠</span> <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minPrio</span> <span class="main">⟹</span>
  <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minSwarmPrio</span> <span class="main">≠</span> <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">condition3</span>  <span class="main">⟹</span>
  <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">condition3</span> <span class="main">≠</span> <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">condition4</span> <span class="main">⟹</span>
  <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minSwarmPrio</span> <span class="main">≠</span> <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">condition4</span> <span class="main">⟹</span>
    corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False 
        <span class="main">(</span><span class="main">λ</span><span class="main">(</span><span class="bound">mSPtr</span><span class="main">,</span><span class="bound">mSPrio</span><span class="main">,</span><span class="bound">mPrio</span><span class="main">,</span><span class="bound">c3</span><span class="main">,</span><span class="bound">c4</span><span class="main">)</span> <span class="bound">r'</span><span class="main">.</span>  <span class="main">(</span><span class="main">(</span>sint <span class="main">(</span>heap_w32 <span class="bound">r'</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span><span class="free">condition3</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">1</span> <span class="main">∧</span> <span class="bound">c3</span> <span class="main">=</span> True<span class="main">)</span> <span class="main">∨</span>
                 <span class="main">(</span>sint <span class="main">(</span>heap_w32 <span class="bound">r'</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span><span class="free">condition3</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> <span class="bound">c3</span> <span class="main">=</span> False<span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="main">(</span><span class="main">(</span>sint <span class="main">(</span>heap_w32 <span class="bound">r'</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span><span class="free">condition4</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">1</span> <span class="main">∧</span> <span class="bound">c4</span> <span class="main">=</span> True<span class="main">)</span> <span class="main">∨</span> 
                <span class="main">(</span>sint <span class="main">(</span>heap_w32 <span class="bound">r'</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span><span class="free">condition4</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> <span class="bound">c4</span> <span class="main">=</span> False<span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
              <span class="main">(</span>sint <span class="main">(</span>heap_w32 <span class="bound">r'</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span><span class="free">minPrio</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="bound">mPrio</span><span class="main">)</span> <span class="main">∧</span> 
              <span class="main">(</span>sint <span class="main">(</span>heap_w32 <span class="bound">r'</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span><span class="free">minSwarmPrio</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="bound">mSPrio</span><span class="main">)</span><span class="main">)</span> 
          <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span>sche_valid <span class="free">schePtr</span><span class="main">)</span>
           Des_schedule_3 <span class="main">(</span>Impl_schedule_3 <span class="free">schePtr</span> <span class="free">minSwarmPtr</span> <span class="free">minSwarmPrio</span> <span class="free">minPrio</span> <span class="free">condition3</span> <span class="free">condition4</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_schedule_3_def Impl_schedule_3_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 9
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span> MAX_PRIORITY <span class="main">+</span> <span class="main">1</span>"</span></span></span> 
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="main">(</span>heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span><span class="free">minSwarmPrio</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">32</span><span class="main">)</span> impl_MAX_PRIORITY <span class="main">+</span> <span class="main">1</span> "</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
             <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 4 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> rv y ya minSwarmPrioa yb
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">minSwarmPrioa</span> <span class="main">=</span> MAX_PRIORITY <span class="main">+</span> <span class="main">1</span> <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> None"</span></span></span> 
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="main">(</span>heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span><span class="free">minSwarmPrio</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">32</span><span class="main">)</span> impl_MAX_PRIORITY <span class="main">+</span> <span class="main">1</span> 
                          <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span>  sint <span class="main">(</span><span class="keyword1">UCAST</span><span class="main">(</span><span class="numeral">32</span> <span class="main">→</span> <span class="numeral">32</span> signed<span class="main">)</span> <span class="main">(</span>heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minSwarmPrio</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 4 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> minSwarmPtra minSwarmPrio___int'param
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span> 
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minSwarmPrio</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">32</span><span class="main">)</span> impl_MAX_PRIORITY <span class="main">+</span> <span class="main">1</span> <span class="main">∧</span>
                  <span class="skolem">minSwarmPrio___int'param</span> <span class="main">=</span> sint <span class="main">(</span><span class="keyword1">UCAST</span><span class="main">(</span><span class="numeral">32</span> <span class="main">→</span> <span class="numeral">32</span> signed<span class="main">)</span> <span class="main">(</span>heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minSwarmPrio</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> "</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  snd <span class="bound">r</span> <span class="main">=</span> <span class="bound">r'</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>  
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 4 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> rv ret' <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>  sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minSwarmPrio</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">32</span><span class="main">)</span> impl_MAX_PRIORITY <span class="main">+</span> <span class="main">1</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>  sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minSwarmPrio</span><span class="main">)</span> <span class="main">=</span> of_int <span class="skolem">ret'</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>  sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minSwarmPrio</span><span class="main">)</span> <span class="main">=</span> of_int <span class="skolem">ret'</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>  sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minSwarmPrio</span><span class="main">)</span> <span class="main">=</span> of_int <span class="skolem">ret'</span> <span class="main">∧</span> 
                        <span class="main">(</span>heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">condition3</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">if</span> <span class="free">minSwarmPtr</span> <span class="main">=</span> NULL <span class="keyword1">then</span> <span class="main">1</span> <span class="keyword1">else</span> <span class="main">0</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>  sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minSwarmPrio</span><span class="main">)</span> <span class="main">=</span> of_int <span class="skolem">ret'</span> <span class="main">∧</span> 
                        <span class="main">(</span>heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">condition3</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">if</span> <span class="free">minSwarmPtr</span> <span class="main">=</span> NULL <span class="keyword1">then</span> <span class="main">1</span> <span class="keyword1">else</span> <span class="main">0</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>  sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minSwarmPrio</span><span class="main">)</span> <span class="main">=</span> of_int <span class="skolem">ret'</span> <span class="main">∧</span> 
                        <span class="main">(</span>heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">condition3</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">if</span> <span class="free">minSwarmPtr</span> <span class="main">=</span> NULL <span class="keyword1">then</span> <span class="main">1</span> <span class="keyword1">else</span> <span class="main">0</span><span class="main">)</span> <span class="main">∧</span> 
                         <span class="main">(</span>heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minPrio</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">32</span><span class="main">)</span> impl_MAX_PRIORITY <span class="main">+</span> <span class="main">1</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span>  <span class="bound">r</span> <span class="main">=</span> <span class="main">(</span>fst <span class="skolem">rv</span> <span class="main">=</span> None<span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> condition3a
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span>  <span class="skolem">condition3a</span> <span class="main">=</span> <span class="main">(</span>fst <span class="skolem">rv</span> <span class="main">=</span> None<span class="main">)</span> <span class="main">∧</span> 
                                                              <span class="bound">r</span> <span class="main">=</span> <span class="main">(</span>MAX_PRIORITY <span class="main">+</span> <span class="main">1</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> minPrioa
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span>  <span class="skolem">condition3a</span> <span class="main">=</span> <span class="main">(</span>fst <span class="skolem">rv</span> <span class="main">=</span> None<span class="main">)</span> <span class="main">∧</span> 
                                                              <span class="skolem">minPrioa</span> <span class="main">=</span> <span class="main">(</span>MAX_PRIORITY <span class="main">+</span> <span class="main">1</span><span class="main">)</span> <span class="main">∧</span>  <span class="bound">r</span> <span class="main">=</span> <span class="main">(</span><span class="main">-</span><span class="main">1</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> minIdx
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">condition3a</span> <span class="main">=</span> <span class="main">(</span>fst <span class="skolem">rv</span> <span class="main">=</span> None<span class="main">)</span>"</span></span></span> 
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minSwarmPrio</span><span class="main">)</span> <span class="main">=</span> of_int <span class="skolem">ret'</span> <span class="main">∧</span> 
                        <span class="main">(</span>heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">condition3</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">if</span> <span class="free">minSwarmPtr</span> <span class="main">=</span> NULL <span class="keyword1">then</span> <span class="main">1</span> <span class="keyword1">else</span> <span class="main">0</span><span class="main">)</span>   "</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  fst <span class="bound">r</span> <span class="main">=</span> <span class="bound">r'</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>  
                   <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 4 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> p ret'a
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">s</span><span class="main">.</span>  <span class="skolem">condition3a</span> <span class="main">=</span> <span class="main">(</span>fst <span class="skolem">rv</span> <span class="main">=</span> None<span class="main">)</span> <span class="main">∧</span> 
                                <span class="bound">r</span> <span class="main">=</span> <span class="main">(</span>fst <span class="skolem">p</span> <span class="main">=</span> <span class="main">-</span> <span class="main">1</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>   heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minSwarmPrio</span><span class="main">)</span> <span class="main">=</span> of_int <span class="skolem">ret'</span> <span class="main">∧</span> 
                        <span class="main">(</span>heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">condition3</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">if</span> <span class="free">minSwarmPtr</span> <span class="main">=</span> NULL <span class="keyword1">then</span> <span class="main">1</span> <span class="keyword1">else</span> <span class="main">0</span><span class="main">)</span> <span class="main">∧</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>   heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">minSwarmPrio</span><span class="main">)</span> <span class="main">=</span> of_int <span class="skolem">ret'</span> <span class="main">∧</span> 
                        <span class="main">(</span>heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">condition3</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span><span class="keyword1">if</span> <span class="free">minSwarmPtr</span> <span class="main">=</span> NULL <span class="keyword1">then</span> <span class="main">1</span> <span class="keyword1">else</span> <span class="main">0</span><span class="main">)</span> <span class="main">∧</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                              <span class="main">(</span>heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="free">condition4</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">(</span> <span class="keyword1">if</span> <span class="skolem">ret'a</span> <span class="main">=</span> <span class="main">-</span> <span class="main">1</span> <span class="keyword1">then</span> <span class="main">1</span> <span class="keyword1">else</span> <span class="main">0</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def  condition_def
                            corres_underlying_def return_def gets_def 
                    <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_def
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> finish_puase_apiList<span class="main">)</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">using</span></span> des_impl_ifMinPrioSwarmHaveActor<span class="main">[</span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> minIdx <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="language"><span class="skolem">minIdx</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> schePtr<span class="main"><span class="main">=</span></span><span class="quoted"><span class="language"><span class="free">schePtr</span></span></span> 
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> minPrioPtr<span class="main"><span class="main">=</span></span><span class="quoted"><span class="language"><span class="free">minPrio</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> minSwarmPtr<span class="main"><span class="main">=</span></span><span class="quoted"><span class="language"><span class="free">minSwarmPtr</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> minPrio<span class="main"><span class="main">=</span></span><span class="quoted"><span class="language"><span class="skolem">minPrioa</span></span></span></span>   <span class="main">]</span> 
                  <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def  condition_def
                            corres_underlying_def return_def gets_def case_prod_unfold <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                    <span class="keyword1"><span class="command">using</span></span> ifMinPrioSwarmHaveActor_refinement<span class="main">[</span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> schePtr<span class="main"><span class="main">=</span></span><span class="quoted"><span class="language"><span class="free">schePtr</span></span></span>
                              <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> minPrioPtr<span class="main"><span class="main">=</span></span><span class="quoted"><span class="language"><span class="free">minPrio</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> minSwarmPtr<span class="main"><span class="main">=</span></span><span class="quoted"><span class="language"><span class="free">minSwarmPtr</span></span></span></span><span class="main">]</span>   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">force</span><span class="main"><span class="keyword3">+</span></span></span> 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">using</span></span> Impl_ifMinPrioSwarmHaveActor_hoare
                  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">presburger</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
              <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
        <span class="keyword1"><span class="command">using</span></span> des_impl_findMinPrioSwarm  findMinPrioSwarm_refinement
          <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def  condition_def
                     corres_underlying_def return_def gets_def case_prod_unfold <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span>  <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">minSwarmPrioa</span> <span class="main">=</span> <span class="skolem">minSwarmPrio___int'param</span>"</span></span></span><span class="main">)</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> prod_injects<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span> sche_valid_def<span class="main">)</span></span> <span class="keyword1"><span class="command">unfolding</span></span> impl_MAX_PRIORITY_def MAX_PRIORITY_def 
          <span class="keyword1"><span class="command">using</span></span> ucast32_int finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">force</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
      <span class="keyword1"><span class="command">using</span></span> Impl_findMinPrioSwarm_hoare
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">presburger</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
              corres_underlying_def return_def gets_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def NonDetMonad.bind_def return_def modify_def 
              put_def gets_def get_def guard_def  returnOk_def schePtrEqual_def  
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def swarmInfoEqual_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> busListEqual_def busPtrEqual_def pluginPtrListEqual_def pluginEqual_def int64PtrListEqual_def stringPtrListEqual_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def 
             taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def 
             taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def 
             taskInfoPtrEqual_def pluginInfoListEqual_def pluginInfoEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_def
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹schedule_4 verify›</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_schedule_4_aux<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">setResult</span> <span class="bound">bl</span> <span class="bound">r</span> <span class="bound">x</span> <span class="bound">y</span> <span class="bound">xa</span> <span class="bound">ya</span><span class="main">.</span>
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span>  <span class="free">pActs</span> <span class="main">=</span> toPauseActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">⦄</span>
           NonDetMonad_call.call <span class="main">(</span>Des_updateActorPluginStates <span class="free">pActs</span> actorState.ACTOR_STATE_PAUSE<span class="main">)</span>
        <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span> <span class="main">!</span> <span class="bound">x</span><span class="main">,</span> snd <span class="bound">σ</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span> <span class="bound">b</span><span class="main">.</span> <span class="main">(</span>fst <span class="bound">σ</span><span class="main">⦇</span>registeredBus <span class="main">:=</span> <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span><span class="main">)</span><span class="main">[</span><span class="bound">x</span> <span class="main">:=</span> fst <span class="bound">b</span><span class="main">]</span><span class="main">⦈</span><span class="main">,</span> snd <span class="bound">b</span><span class="main">)</span><span class="main">)</span> 
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">xb</span><span class="main">.</span> <span class="keyword1">case</span> <span class="main">(</span><span class="bound">x</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">xa</span> <span class="main">∧</span> <span class="bound">xb</span><span class="main">,</span> <span class="bound">ya</span><span class="main">)</span> <span class="keyword1">of</span> <span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">a</span><span class="main">)</span> <span class="main">⇒</span> <span class="keyword1">case</span> <span class="bound">a</span> <span class="keyword1">of</span> <span class="main">(</span><span class="bound">res</span><span class="main">,</span> <span class="bound">rb</span><span class="main">)</span> <span class="main">⇒</span> <span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">pActs</span> <span class="main">=</span> toPauseActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad_call.call_def NonDetMonad.valid_def case_prod_unfold
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
<span class="keyword1"><span class="command">lemma</span></span> des_impl_schedule_4_aux2<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">setResult</span> <span class="bound">bl</span> <span class="bound">r</span> <span class="bound">x</span> <span class="bound">y</span> <span class="bound">xa</span> <span class="bound">ya</span><span class="main">.</span>
        <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span>  <span class="free">pActs</span> <span class="main">=</span> toPauseActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">⦄</span> return False 
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">xb</span><span class="main">.</span> <span class="keyword1">case</span> <span class="main">(</span><span class="bound">x</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">xb</span><span class="main">,</span> <span class="bound">ya</span><span class="main">)</span> <span class="keyword1">of</span> <span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">a</span><span class="main">)</span> <span class="main">⇒</span> <span class="keyword1">case</span> <span class="bound">a</span> <span class="keyword1">of</span> <span class="main">(</span><span class="bound">res</span><span class="main">,</span> <span class="bound">rb</span><span class="main">)</span> <span class="main">⇒</span> <span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">pActs</span> <span class="main">=</span> toPauseActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>
<span class="keyword1"><span class="command">lemma</span></span> des_impl_schedule_4_aux3<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">setResult</span><span class="main">.</span>  
  <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span>  <span class="free">pActs</span> <span class="main">=</span> toPauseActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">⦄</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> registeredBus <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span><span class="main">)</span> <span class="main">⦃</span><span class="main">λ</span><span class="bound">a</span> <span class="bound">s</span><span class="main">.</span> <span class="free">pActs</span> <span class="main">=</span> toPauseActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
<span class="keyword1"><span class="command">lemma</span></span> des_impl_schedule_4 <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"
    corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False 
        <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> 
        <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="main">(</span><span class="main">(</span><span class="free">condition6</span> <span class="main">=</span> <span class="main">1</span> <span class="main">∧</span> <span class="free">c6</span> <span class="main">=</span> True<span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="free">condition6</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> <span class="free">c6</span> <span class="main">=</span> False<span class="main">)</span><span class="main">)</span>  <span class="main">∧</span> 
              <span class="main">(</span>swarmInfoOpEqual <span class="free">mSPtr</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>swarmInfoOpEqual <span class="free">runSPtr</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span><span class="main">)</span> <span class="main">)</span>
       <span class="main">(</span>Des_schedule_4 <span class="free">c6</span> <span class="free">mSPtr</span> <span class="free">runSPtr</span><span class="main">)</span> <span class="main">(</span>Impl_schedule_4  <span class="free">scheduler</span> <span class="free">condition6</span> <span class="free">minSwarmPtr</span> <span class="free">runningSwarmPtr</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_schedule_4_def Impl_schedule_4_def when_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_simple_pre<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>  sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="main">(</span><span class="free">condition6</span> <span class="main">=</span> <span class="main">1</span> <span class="main">∧</span> <span class="free">c6</span> <span class="main">=</span> True <span class="main">∨</span> <span class="free">condition6</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> <span class="free">c6</span> <span class="main">=</span> False<span class="main">)</span> <span class="main">∧</span>
           swarmInfoOpEqual <span class="free">mSPtr</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoOpEqual <span class="free">runSPtr</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span>  toPauseActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span>"</span></span></span> 
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           swarmInfoOpEqual <span class="free">mSPtr</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoOpEqual <span class="free">runSPtr</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> 
            <span class="bound">ret</span> <span class="main">=</span> toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">scheduler</span><span class="main">)</span> "</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>  
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 4 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> rv pActs anActorsPtr
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">pActs</span> <span class="main">=</span>  toPauseActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           swarmInfoOpEqual <span class="free">mSPtr</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> swarmInfoOpEqual <span class="free">runSPtr</span> <span class="free">runningSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> 
            <span class="skolem">anActorsPtr</span> <span class="main">=</span> toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">scheduler</span><span class="main">)</span> "</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  <span class="main">(</span><span class="bound">r'</span> <span class="main">=</span> <span class="main">1</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span> True <span class="main">∨</span> <span class="bound">r'</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span> False<span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>   
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 4 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_simple_pre<span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
      <span class="keyword1"><span class="command">using</span></span> pauseSwarmAndActors_refinement 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">presburger</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
              corres_underlying_def return_def gets_def   <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
              corres_underlying_def return_def gets_def     <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">using</span></span> updateActorPluginState_sche_refinement
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"stateACBEqual actorState.ACTOR_STATE_PAUSE <span class="main">(</span><span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_PAUSE<span class="main">)</span>"</span></span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> stateACBEqual_def impl_ACTOR_STATE_PAUSE_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> Des_updateActorPluginState_sche_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoop_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">res</span><span class="main">,</span><span class="bound">rb</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">pActs</span> <span class="main">=</span> toPauseActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span>"</span></span></span>
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">res</span><span class="main">,</span><span class="bound">rb</span><span class="main">)</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> length <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span>  <span class="bound">i</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_schedule_4_aux<span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_schedule_4_aux3<span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">using</span></span> Impl_updateActorPluginState_sche_hoare
      <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.valid_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_def<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
     corres_underlying_def return_def gets_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
     <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹schedule_5 verify›</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_schedule_5_aux<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">setResult</span> <span class="bound">bl</span> <span class="bound">r</span> <span class="bound">x</span> <span class="bound">y</span> <span class="bound">xa</span> <span class="bound">ya</span><span class="main">.</span>
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span>  <span class="free">pActs</span> <span class="main">=</span> minPrioActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">⦄</span>
              NonDetMonad_call.call <span class="main">(</span>Des_updateActorPluginStates <span class="free">pActs</span> actorState.ACTOR_STATE_RUNNING<span class="main">)</span>
        <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span> <span class="main">!</span> <span class="bound">x</span><span class="main">,</span> snd <span class="bound">σ</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span> <span class="bound">b</span><span class="main">.</span> <span class="main">(</span>fst <span class="bound">σ</span><span class="main">⦇</span>registeredBus <span class="main">:=</span> <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span><span class="main">)</span><span class="main">[</span><span class="bound">x</span> <span class="main">:=</span> fst <span class="bound">b</span><span class="main">]</span><span class="main">⦈</span><span class="main">,</span> snd <span class="bound">b</span><span class="main">)</span><span class="main">)</span> 
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">xb</span><span class="main">.</span> <span class="keyword1">case</span> <span class="main">(</span><span class="bound">x</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">xa</span> <span class="main">∧</span> <span class="bound">xb</span><span class="main">,</span> <span class="bound">ya</span><span class="main">)</span> <span class="keyword1">of</span> <span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">a</span><span class="main">)</span> <span class="main">⇒</span> <span class="keyword1">case</span> <span class="bound">a</span> <span class="keyword1">of</span> <span class="main">(</span><span class="bound">res</span><span class="main">,</span> <span class="bound">rb</span><span class="main">)</span> <span class="main">⇒</span> <span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">pActs</span> <span class="main">=</span> minPrioActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad_call.call_def NonDetMonad.valid_def case_prod_unfold
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
<span class="keyword1"><span class="command">lemma</span></span> des_impl_schedule_5_aux2<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">setResult</span> <span class="bound">bl</span> <span class="bound">r</span> <span class="bound">x</span> <span class="bound">y</span> <span class="bound">xa</span> <span class="bound">ya</span><span class="main">.</span>
        <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span>  <span class="free">pActs</span> <span class="main">=</span> minPrioActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">⦄</span> return False 
       <span class="main">⦃</span><span class="main">λ</span><span class="bound">xb</span><span class="main">.</span> <span class="keyword1">case</span> <span class="main">(</span><span class="bound">x</span> <span class="main">+</span> <span class="main">1</span><span class="main">,</span> <span class="bound">xb</span><span class="main">,</span> <span class="bound">ya</span><span class="main">)</span> <span class="keyword1">of</span> <span class="main">(</span><span class="bound">i</span><span class="main">,</span> <span class="bound">a</span><span class="main">)</span> <span class="main">⇒</span> <span class="keyword1">case</span> <span class="bound">a</span> <span class="keyword1">of</span> <span class="main">(</span><span class="bound">res</span><span class="main">,</span> <span class="bound">rb</span><span class="main">)</span> <span class="main">⇒</span> <span class="main">λ</span><span class="bound">s</span><span class="main">.</span> <span class="free">pActs</span> <span class="main">=</span> minPrioActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>
<span class="keyword1"><span class="command">lemma</span></span> des_impl_schedule_5_aux3<span class="main">:</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⋀</span><span class="bound">setResult</span><span class="main">.</span>  
  <span class="main">⦃</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span>  <span class="free">pActs</span> <span class="main">=</span> minPrioActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">⦄</span> gets <span class="main">(</span><span class="main">λ</span><span class="bound">σ</span><span class="main">.</span> registeredBus <span class="main">(</span>fst <span class="bound">σ</span><span class="main">)</span><span class="main">)</span> <span class="main">⦃</span><span class="main">λ</span><span class="bound">bl</span> <span class="bound">a</span><span class="main">.</span> <span class="free">pActs</span> <span class="main">=</span> minPrioActors <span class="main">(</span>fst <span class="bound">a</span><span class="main">)</span><span class="main">⦄</span>"</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
<span class="keyword1"><span class="command">lemma</span></span> des_impl_schedule_5 <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"
    corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False 
        <span class="main">(</span><span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> 
        <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="main">(</span><span class="main">(</span><span class="free">condition7</span> <span class="main">=</span> <span class="main">1</span> <span class="main">∧</span> <span class="free">c7</span> <span class="main">=</span> True<span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="free">condition7</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> <span class="free">c7</span> <span class="main">=</span> False<span class="main">)</span><span class="main">)</span>  <span class="main">∧</span> 
              <span class="main">(</span>swarmInfoOpEqual <span class="free">mSPtr</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span><span class="main">)</span> <span class="main">)</span>
       <span class="main">(</span>Des_schedule_5 <span class="free">c7</span> <span class="free">mSPtr</span> <span class="main">)</span> <span class="main">(</span>Impl_schedule_5  <span class="free">scheduler</span> <span class="free">condition7</span> <span class="free">minSwarmPtr</span> <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_schedule_5_def Impl_schedule_5_def when_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_simple_pre<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span>  sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
           <span class="main">(</span><span class="free">condition7</span> <span class="main">=</span> <span class="main">1</span> <span class="main">∧</span> <span class="free">c7</span> <span class="main">=</span> True <span class="main">∨</span> <span class="free">condition7</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> <span class="free">c7</span> <span class="main">=</span> False<span class="main">)</span> <span class="main">∧</span>
           swarmInfoOpEqual <span class="free">mSPtr</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def
   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span>  minPrioActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span>"</span></span></span> 
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  swarmInfoOpEqual <span class="free">mSPtr</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> 
            <span class="bound">ret</span> <span class="main">=</span> minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">scheduler</span><span class="main">)</span> "</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>  
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 4 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> rv pActs anActorsPtr
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">pActs</span> <span class="main">=</span>  minPrioActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>  swarmInfoOpEqual <span class="free">mSPtr</span> <span class="free">minSwarmPtr</span> <span class="bound">s</span> <span class="main">∧</span> 
            <span class="skolem">anActorsPtr</span> <span class="main">=</span> minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">scheduler</span><span class="main">)</span> "</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  <span class="main">(</span><span class="bound">r'</span> <span class="main">=</span> <span class="main">1</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span> True <span class="main">∨</span> <span class="bound">r'</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> <span class="bound">r</span> <span class="main">=</span> False<span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>   
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 4 <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_simple_pre<span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
        <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def modify_def corres_underlying_def return_def get_def put_def NonDetMonad.bind_def
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
      <span class="keyword1"><span class="command">using</span></span> runSwarmAndActors_refinement 
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">presburger</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  
      <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
           corres_underlying_def return_def gets_def  
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  
      <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
              corres_underlying_def return_def gets_def  
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
      <span class="keyword1"><span class="command">using</span></span> updateActorPluginState_sche_refinement
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"stateACBEqual actorState.ACTOR_STATE_RUNNING <span class="main">(</span><span class="keyword1">SCAST</span><span class="main">(</span><span class="numeral">32</span> signed <span class="main">→</span> <span class="numeral">16</span> signed<span class="main">)</span> impl_ACTOR_STATE_RUNNING<span class="main">)</span>"</span></span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> stateACBEqual_def impl_ACTOR_STATE_RUNNING_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> Des_updateActorPluginState_sche_def

      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subst</span> whileLoop_add_inv<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> I<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">res</span><span class="main">,</span><span class="bound">rb</span><span class="main">)</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">pActs</span> <span class="main">=</span> minPrioActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span>"</span></span></span>
              <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> M<span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="main">(</span><span class="bound">i</span><span class="main">,</span><span class="bound">res</span><span class="main">,</span><span class="bound">rb</span><span class="main">)</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> length <span class="main">(</span>registeredBus <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">-</span>  <span class="bound">i</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wp</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_schedule_5_aux<span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_schedule_5_aux3<span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
      <span class="keyword1"><span class="command">using</span></span> Impl_updateActorPluginState_sche_hoare
      <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.valid_def
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">simp</span> <span class="quasi_keyword">add</span><span class="main"><span class="main">:</span></span> sche_valid_def<span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  
      <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
              corres_underlying_def return_def gets_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>




<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹schedule verify›</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> corres_if_P_rev<span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⟦</span> <span class="main">∀</span><span class="main">(</span><span class="bound">s</span><span class="main">,</span><span class="bound">t</span><span class="main">)</span><span class="main">∈</span><span class="free">sr</span><span class="main">.</span> <span class="free">P</span> <span class="bound">s</span> <span class="main">∧</span> <span class="free">P'</span> <span class="bound">t</span> <span class="main">⟶</span>  <span class="main">(</span><span class="main">¬</span> <span class="free">G</span> <span class="main">)</span> <span class="main">=</span> <span class="free">G'</span><span class="main">;</span>
     corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">r</span> <span class="free">P</span> <span class="free">P'</span> <span class="free">a</span> <span class="free">d</span><span class="main">;</span> 
     corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">r</span> <span class="free">P</span> <span class="free">P'</span> <span class="free">b</span> <span class="free">c</span> <span class="main">⟧</span> <span class="main">⟹</span>
    corres_underlying <span class="free">sr</span> <span class="free">nf</span> <span class="free">nf'</span> <span class="free">r</span>
      <span class="free">P</span>  <span class="free">P'</span> <span class="main">(</span><span class="keyword1">if</span> <span class="free">G</span> <span class="keyword1">then</span> <span class="free">a</span> <span class="keyword1">else</span> <span class="free">b</span><span class="main">)</span> <span class="main">(</span><span class="keyword1">if</span> <span class="free">G'</span> <span class="keyword1">then</span> <span class="free">c</span> <span class="keyword1">else</span> <span class="free">d</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> condition_def corres_underlying_def 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span> 
  <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>

<span class="keyword1"><span class="command">lemma</span></span>  ActorPluginInfoVector_C_update1 <span class="main">:</span> 
<span class="quoted"><span class="quoted"><span class="language">" ActorPluginInfoVector_C.length_C <span class="main">(</span>ActorPluginInfoVector_C.length_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">len</span><span class="main">.</span> <span class="free">A</span><span class="main">)</span> <span class="free">s</span><span class="main">)</span> <span class="main">=</span> <span class="free">A</span>"</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="free">s</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">simp</span></span>


<span class="keyword1"><span class="command">lemma</span></span> des_impl_schedule <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"ScheduleMsgEqual <span class="free">a</span> <span class="free">b</span> <span class="main">⟹</span>
     corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False
         <span class="main">(</span><span class="main">λ</span><span class="bound">retDes</span> <span class="bound">retImpl</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span>sche_valid <span class="free">schePtr</span><span class="main">)</span>
         Des_schedule <span class="main">(</span>Impl_schedule <span class="free">schePtr</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_schedule_def Impl_schedule_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span> 
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> True <span class="main">∧</span> <span class="bound">r'</span> <span class="main">=</span> <span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">r</span> <span class="main">=</span> False <span class="main">∧</span> <span class="bound">r'</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_schedule_1<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> Impl_schedule_1_def ACBVectorEmpty'_def sche_valid_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> unless_def when_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_P_rev<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>  
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def
              corres_underlying_def return_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span> 
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span>
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_schedule_2<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> Impl_schedule_2_def actorPluginInfoVectorClear'_def sche_valid_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>   
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command">unfolding</span></span> K_bind_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> condition1 ret' rv rv' minSwarmPtr minSwarmPrio minPrio condition3 condition4
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span> 
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span>
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">mSPtr</span><span class="main">,</span><span class="bound">mSPrio</span><span class="main">,</span><span class="bound">mPrio</span><span class="main">,</span><span class="bound">c3</span><span class="main">,</span><span class="bound">c4</span><span class="main">)</span> <span class="bound">r'</span><span class="main">.</span>  <span class="main">(</span><span class="main">(</span>sint <span class="main">(</span>heap_w32 <span class="bound">r'</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span><span class="skolem">condition3</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">1</span> <span class="main">∧</span> <span class="bound">c3</span> <span class="main">=</span> True<span class="main">)</span> <span class="main">∨</span>
                 <span class="main">(</span>sint <span class="main">(</span>heap_w32 <span class="bound">r'</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span><span class="skolem">condition3</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> <span class="bound">c3</span> <span class="main">=</span> False<span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
              <span class="main">(</span><span class="main">(</span>sint <span class="main">(</span>heap_w32 <span class="bound">r'</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span><span class="skolem">condition4</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">1</span> <span class="main">∧</span> <span class="bound">c4</span> <span class="main">=</span> True<span class="main">)</span> <span class="main">∨</span> 
                <span class="main">(</span>sint <span class="main">(</span>heap_w32 <span class="bound">r'</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span><span class="skolem">condition4</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> <span class="bound">c4</span> <span class="main">=</span> False<span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
              <span class="main">(</span>sint <span class="main">(</span>heap_w32 <span class="bound">r'</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span><span class="skolem">minPrio</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="bound">mPrio</span><span class="main">)</span> <span class="main">∧</span> 
              <span class="main">(</span>sint <span class="main">(</span>heap_w32 <span class="bound">r'</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span><span class="skolem">minSwarmPrio</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="bound">mSPrio</span><span class="main">)</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">prefer</span></span></span></span> 4  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold skip_def
       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre<span class="main">)</span></span> <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
              corres_underlying_def return_def gets_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> rv y ya
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre<span class="main">)</span></span> 
      <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
              corres_underlying_def return_def gets_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ya yaa ActorPluginInfoVector_CPtr
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span> 
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> "</span></span></span>
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> 
           <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
              corres_underlying_def return_def gets_def actorPluginInfoVectorClear'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> aa ba  <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span>  busListEqual_def busPtrEqual_def stringPtrListEqual_def int64PtrListEqual_def pluginPtrListEqual_def pluginEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> min_puase_apiList<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> b <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">ba</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> schePtr <span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">schePtr</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
                        <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                                  pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                                  pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                  <span class="keyword1"><span class="command">using</span></span> ActorPluginInfoVector_C_update1 finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span><span class="main"><span class="keyword3">+</span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> min_finish_apiList<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> b <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="skolem">ba</span>"</span></span></span> <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> schePtr <span class="main"><span class="main"><span class="main">=</span></span></span><span class="quoted"><span class="language"><span class="free">schePtr</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>         
                   <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                             pluginInfoListEqual_def pluginInfoEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>   <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> finish_puase_apiList<span class="main">)</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">force</span><span class="main"><span class="keyword3">+</span></span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoVectorClear'_def sche_valid_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
           <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                  <span class="bound">ret</span> <span class="main">=</span> sint <span class="main">(</span><span class="keyword1">UCAST</span><span class="main">(</span><span class="numeral">32</span> <span class="main">→</span> <span class="numeral">32</span> signed<span class="main">)</span> <span class="main">(</span>heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="skolem">minPrio</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ya yaa yb minPrioParam
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span> 
             <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> "</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="main">{</span><span class="bound">t</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">t</span><span class="main">)</span><span class="main">)</span><span class="main">}</span><span class="main">.</span>  <span class="main">(</span>sche_valid <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span> <span class="main">⟶</span> sche_valid_findActorUnderMinSwarm <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
                                               swarmInfoEqual <span class="main">(</span>the <span class="main">(</span>fst <span class="skolem">rv</span><span class="main">)</span><span class="main">)</span> <span class="skolem">minSwarmPtr</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span> <span class="main">∧</span> is_valid_SwarmInfo_C <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span> <span class="skolem">minSwarmPtr</span> <span class="main">∧</span>  <span class="main">(</span>fst <span class="main">(</span>snd <span class="main">(</span>snd <span class="skolem">rv</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">minPrioParam</span>"</span></span></span><span class="main">)</span></span>
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span>
            <span class="keyword1"><span class="command">using</span></span> des_impl_findActorUnderMinSwarm <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def case_prod_unfold sche_valid_def
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> prod_injects<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>  
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> Impl_findActorUnderMinSwarm_def ACBVectorSize'_def sche_valid_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span></span> 
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> 
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">0</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ya yaa nRunningSwarm
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span> None <span class="main">∧</span> <span class="skolem">nRunningSwarm</span> <span class="main">=</span> <span class="main">0</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>    <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> runningSwarmPtr runningSwarmPtr_C
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">runningSwarmPtr</span> <span class="main">=</span> None <span class="main">∧</span> <span class="skolem">nRunningSwarm</span> <span class="main">=</span> <span class="main">0</span>"</span></span></span> 
                      <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span>  <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  snd <span class="bound">r</span> <span class="main">=</span><span class="bound">r'</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
                   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="main">{</span><span class="bound">t</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">t</span><span class="main">)</span><span class="main">)</span><span class="main">}</span><span class="main">.</span>  <span class="main">(</span>sche_valid <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span> <span class="main">⟶</span> sche_valid_findRunningSwarm <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
                                               is_valid_runningSwarmPtr <span class="skolem">runningSwarmPtr_C</span> <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span>"</span></span></span><span class="main">)</span></span>
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span>
                <span class="keyword1"><span class="command">using</span></span> des_impl_findRunningSwarm <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def case_prod_unfold sche_valid_def
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
                       <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> prod_injects<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>  
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> Impl_findRunningSwarm_def sche_valid_def  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>  
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> 
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> p ret'a
               <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_l<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="skolem">runningSwarmPtr</span> <span class="main">=</span> None <span class="main">∧</span> <span class="skolem">nRunningSwarm</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">(</span><span class="main">1</span> <span class="main">&lt;</span> snd <span class="skolem">p</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> condition5
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_P_rev<span class="main">)</span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span><span class="main"><span class="keyword3">[</span></span>1<span class="main"><span class="keyword3">]</span></span></span>
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
                         corres_underlying_def return_def gets_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                     <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ya ActorPluginInfoVector_C_pause
                   <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  <span class="skolem">runningSwarmPtr</span> <span class="main">=</span> None <span class="main">∧</span> <span class="skolem">nRunningSwarm</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> <span class="skolem">condition5</span> <span class="main">=</span> <span class="main">(</span><span class="main">1</span> <span class="main">&lt;</span> snd <span class="skolem">p</span><span class="main">)</span>"</span></span></span> 
                      <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>   <span class="skolem">ActorPluginInfoVector_C_pause</span>   <span class="main">=</span> toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> "</span></span></span>
                      <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
                         corres_underlying_def return_def gets_def actorPluginInfoVectorClear'_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span>  busListEqual_def busPtrEqual_def stringPtrListEqual_def int64PtrListEqual_def pluginPtrListEqual_def pluginEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                                        pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
                                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> ActorPluginInfoVector_C_update1<span class="main"><span class="keyword3">,</span></span><span class="operator">insert</span> finish_puase_apiList<span class="main">)</span></span> 
                                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">force</span><span class="main"><span class="keyword3">+</span></span></span>
                              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> min_puase_apiList<span class="main">)</span></span>
                                <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                                        pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
                              <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>           
                                <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> fin_puase_apiList<span class="main">)</span></span>
                                <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                                        pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
                              <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> finish_puase_apiList<span class="main">)</span></span> <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">force</span><span class="main"><span class="keyword3">+</span></span></span>
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoVectorClear'_def sche_valid_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> 
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> 
                            <span class="bound">ret</span> <span class="main">=</span>  sint <span class="main">(</span><span class="keyword1">UCAST</span><span class="main">(</span><span class="numeral">32</span> <span class="main">→</span> <span class="numeral">32</span> signed<span class="main">)</span> <span class="main">(</span>heap_w32 <span class="bound">s</span> <span class="main">(</span><span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="skolem">minPrio</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ya yaa yb minPrioparam
                       <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  <span class="skolem">runningSwarmPtr</span> <span class="main">=</span> None <span class="main">∧</span> <span class="skolem">nRunningSwarm</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> <span class="skolem">condition5</span> <span class="main">=</span> <span class="main">(</span><span class="main">1</span> <span class="main">&lt;</span> snd <span class="skolem">p</span><span class="main">)</span>"</span></span></span> 
                          <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  sche_valid <span class="free">schePtr</span> <span class="bound">s</span> "</span></span></span>
                          <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>  
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="main">{</span><span class="bound">t</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">t</span><span class="main">)</span><span class="main">)</span><span class="main">}</span><span class="main">.</span>  <span class="main">(</span>sche_valid <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span> <span class="main">⟶</span> sche_valid_findToPauseActors <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span>
                                                    swarmInfoEqual <span class="main">(</span>the <span class="main">(</span>fst <span class="skolem">rv</span><span class="main">)</span><span class="main">)</span> <span class="skolem">minSwarmPtr</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span> <span class="main">∧</span>  is_valid_findToPauseActors <span class="skolem">minSwarmPtr</span> <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span> <span class="main">∧</span> <span class="main">(</span>fst <span class="main">(</span>snd <span class="main">(</span>snd <span class="skolem">rv</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">=</span> <span class="skolem">minPrioparam</span>"</span></span></span><span class="main">)</span></span>
                         <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">using</span></span> des_impl_findToPauseActors <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def case_prod_unfold sche_valid_def
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">smt</span> snd_conv<span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">smt</span> snd_conv<span class="main">)</span></span> 
                        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> prod_injects<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span> <span class="main"><span class="keyword3">+</span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> Impl_findToPauseActors_def sche_valid_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span></span> 
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> 
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> 
                              <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ya yaa yb ActorPluginInfoVector_C_puase
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  <span class="skolem">runningSwarmPtr</span> <span class="main">=</span> None <span class="main">∧</span> <span class="skolem">nRunningSwarm</span> <span class="main">=</span> <span class="main">0</span> 
                                    <span class="main">∧</span> <span class="skolem">condition5</span> <span class="main">=</span> <span class="main">(</span><span class="main">1</span> <span class="main">&lt;</span> snd <span class="skolem">p</span><span class="main">)</span> <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">(</span>length <span class="main">(</span>toPauseActors <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span><span class="main">)</span> <span class="main">≠</span> <span class="main">0</span><span class="main">)</span>"</span></span></span> 
                          <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  sche_valid <span class="free">schePtr</span> <span class="bound">s</span><span class="main">∧</span> <span class="skolem">ActorPluginInfoVector_C_puase</span> <span class="main">=</span> toPauseActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>"</span></span></span>
                          <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span> True <span class="main">∧</span> <span class="bound">r'</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∨</span> <span class="bound">r</span> <span class="main">=</span>False <span class="main">∧</span> <span class="bound">r'</span> <span class="main">=</span> <span class="main">1</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
                         corres_underlying_def return_def gets_def actorPluginInfoVectorEmpty'_def 
                          schePtrEqual_def actorPluginInfoListEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoVectorEmpty'_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>  
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  True"</span></span></span> 
                          <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  sche_valid <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span>
                          <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span>
                          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">∀</span><span class="bound">t</span><span class="main">∈</span><span class="main">{</span><span class="bound">t</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">t</span><span class="main">)</span><span class="main">)</span><span class="main">}</span><span class="main">.</span> swarmInfoOpEqual <span class="main">(</span>fst <span class="skolem">rv</span><span class="main">)</span> <span class="skolem">minSwarmPtr</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span> <span class="main">∧</span> 
                                                    swarmInfoOpEqual <span class="main">(</span>fst <span class="skolem">p</span><span class="main">)</span> <span class="skolem">runningSwarmPtr_C</span> <span class="main">(</span>snd <span class="bound">t</span><span class="main">)</span> "</span></span></span><span class="main">)</span></span>
                         <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span>
                          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">using</span></span> des_impl_schedule_4 <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def case_prod_unfold sche_valid_def
                                         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
                          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">smt</span> snd_conv<span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">smt</span> snd_conv<span class="main">)</span></span> 
                            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> prod_injects<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span> <span class="main"><span class="keyword3">+</span></span></span>
                          <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> 
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_def Impl_schedule_4_def when_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span></span>  
                          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span>  
                          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> 
                              <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> condition6 ret'b ya yaa yb ActorPluginInfoVector_C'_min
                            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span> 
                                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span>  sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">ActorPluginInfoVector_C'_min</span> <span class="main">=</span> minPrioActors_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>"</span></span></span>
                                 <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span> <span class="bound">r</span> <span class="main">=</span> True <span class="main">∧</span> <span class="bound">r'</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∨</span> <span class="bound">r</span> <span class="main">=</span>False <span class="main">∧</span> <span class="bound">r'</span> <span class="main">=</span> <span class="main">1</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def condition_def
                                  corres_underlying_def return_def gets_def actorPluginInfoVectorEmpty'_def 
                                  schePtrEqual_def actorPluginInfoListEqual_def  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoVectorEmpty'_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span></span> 
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">∀</span><span class="bound">p</span><span class="main">∈</span><span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span><span class="main">.</span> swarmInfoOpEqual <span class="main">(</span>fst <span class="skolem">rv</span><span class="main">)</span> <span class="skolem">minSwarmPtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span>"</span></span></span><span class="main">)</span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command">using</span></span> finish_puase_apiList <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">blast</span></span>
                         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command">using</span></span> des_impl_schedule_5 <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def case_prod_unfold sche_valid_def
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>full_types<span class="main"><span class="main">)</span></span> prod_injects<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> prod_injects<span class="main"><span class="main">(</span></span>2<span class="main"><span class="main">)</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
                        <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
                  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
              <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
                 <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
            <span class="keyword1"><span class="command">unfolding</span></span> unknown_def UNIV_def select_def NonDetMonad.valid_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
        <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
         <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> sche_valid_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">insert</span> finish_puase_apiList<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subgoal_tac</span> <span class="quoted"><span class="quoted"><span class="language">" <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="skolem">minSwarmPrio</span> <span class="main">≠</span> <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="skolem">minPrio</span> <span class="main">∧</span>
        <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="skolem">condition3</span> <span class="main">≠</span> <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="skolem">minPrio</span> <span class="main">∧</span> 
        <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="skolem">minSwarmPrio</span> <span class="main">≠</span> <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="skolem">condition3</span> <span class="main">∧</span>
        <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="skolem">condition3</span> <span class="main">≠</span> <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="skolem">condition4</span> <span class="main">∧</span> 
        <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="skolem">minSwarmPrio</span> <span class="main">≠</span> <span class="keyword1">PTR_COERCE</span><span class="main">(</span><span class="numeral">32</span> signed word <span class="main">→</span> <span class="numeral">32</span> word<span class="main">)</span> <span class="skolem">condition4</span> "</span></span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command">using</span></span> des_impl_schedule_3 <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def case_prod_unfold sche_valid_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> unknown_def UNIV_def select_def NonDetMonad.valid_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>





<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹scheLoopOnce1 verify›</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_scheLoopOnce1 <span class="main">:</span> 
 <span class="quoted"><span class="quoted"><span class="language">"corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False
     <span class="main">(</span><span class="main">λ</span><span class="bound">p</span> <span class="bound">pa</span><span class="main">.</span> <span class="main">(</span>snd <span class="bound">p</span> <span class="main">=</span> True <span class="main">∧</span> fst <span class="bound">pa</span> <span class="main">=</span> <span class="main">1</span> <span class="main">∨</span> snd <span class="bound">p</span> <span class="main">=</span> False <span class="main">∧</span> fst <span class="bound">pa</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span> <span class="main">∧</span> ScheduleMsgEqual <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>snd <span class="bound">pa</span><span class="main">)</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span>sche_valid <span class="free">schePtr</span><span class="main">)</span>
     Des_scheLoopOnce1 <span class="main">(</span>Impl_scheLoopOnce1 <span class="free">schePtr</span> <span class="free">scheMsgPtr</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_scheLoopOnce1_def Impl_scheLoopOnce1_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> <span class="bound">ret</span> <span class="main">=</span> scheMsgQueue <span class="main">(</span>fst <span class="bound">s</span><span class="main">)</span>"</span></span></span> 
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">r</span> <span class="bound">r'</span><span class="main">.</span>  True"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">rule</span> <span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_if_condition_pre2<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> msgQue quePtr
    <span class="keyword1"><span class="command">unfolding</span></span> Impl_scheMsgQueue_Empty_def queue_empty_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> schePtrEqual_def acbEqual_def acbListPtrEqual_def scheMsgQueueEqual_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">simp</span></span>
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">metis</span> <span class="main"><span class="main">(</span></span>no_types<span class="main"><span class="main">)</span></span> Word_Lemmas.sint_0 list.size<span class="main"><span class="main">(</span></span>3<span class="main"><span class="main">)</span></span> semiring_1_class.of_nat_0<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> msgQue quePtr
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">quePtr</span> <span class="main">=</span> scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  Impl_scheMsgQueue_Empty <span class="skolem">quePtr</span> <span class="bound">s</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span> <span class="skolem">quePtr</span> <span class="main">=</span> scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  Impl_scheMsgQueue_Empty <span class="skolem">quePtr</span> <span class="bound">s</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> 
       <span class="bound">ret</span> <span class="main">=</span>  heap_ScheduleMsgQueue_C <span class="bound">s</span> <span class="main">(</span>scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span>  <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span> <span class="skolem">quePtr</span> <span class="main">=</span> scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  Impl_scheMsgQueue_Empty <span class="skolem">quePtr</span> <span class="bound">s</span> <span class="main">=</span> <span class="main">0</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span> <span class="skolem">quePtr</span> <span class="main">=</span> scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  Impl_scheMsgQueue_Empty <span class="skolem">quePtr</span> <span class="bound">s</span> <span class="main">=</span> <span class="main">0</span> <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">()</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> Impl_scheMsgQueue_front_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span> <span class="skolem">quePtr</span> <span class="main">=</span> scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  Impl_scheMsgQueue_Empty <span class="skolem">quePtr</span> <span class="bound">s</span> <span class="main">=</span> <span class="main">0</span><span class="main">∧</span>
         <span class="bound">ret</span> <span class="main">=</span> scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> ScheMsgQuePtr
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>  <span class="main">∧</span> <span class="skolem">quePtr</span> <span class="main">=</span> scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">∧</span>  Impl_scheMsgQueue_Empty <span class="skolem">quePtr</span> <span class="bound">s</span> <span class="main">=</span> <span class="main">0</span><span class="main">∧</span>
                 <span class="bound">ret</span> <span class="main">=</span> Impl_scheMsgQueue_pop <span class="skolem">ScheMsgQuePtr</span> <span class="bound">s</span> <span class="main">∧</span> <span class="skolem">ScheMsgQuePtr</span> <span class="main">=</span> scheMsgQueue_C <span class="main">(</span>heap_ActorScheduler_C <span class="bound">s</span> <span class="free">schePtr</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def
                corres_underlying_def return_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> a b aa ba
        <span class="keyword1"><span class="command">unfolding</span></span> Impl_scheMsgQueue_pop_def Impl_scheMsgQueue_Empty_def queue_empty_def Let_def schePtrEqual_def 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> acbListPtrEqual_def acbPtrEqual_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> swarmListEqual_def swarmInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span>  busListEqual_def busPtrEqual_def stringPtrListEqual_def int64PtrListEqual_def pluginPtrListEqual_def pluginEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> scheMsgQueueEqual_def ScheduleMsgPtrEqual_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
            <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">subst</span> ScheduleMsgQueue_C_length_update1<span class="main"><span class="keyword3">,</span></span><span class="operator">insert</span> finish_puase_apiList<span class="main">)</span></span>
          <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">force</span><span class="main"><span class="keyword3">+</span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
        <span class="keyword1"><span class="command">unfolding</span></span> actorPluginInfoListEqual_def actorPluginInfoEqual_sche_def taskInfoPtrEqual_def
                  pluginInfoListEqual_def pluginInfoEqual_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
      <span class="keyword1"><span class="command">unfolding</span></span> ScheduleMsgEqual_def
      <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="main">(</span><span class="operator">smt</span> case_prodE compare'_def strcpy_compare<span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">corres</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> ScheduleMsgEqual_def nullScheduleMsg_def stateMsgEqual_def int64Equal_def stringEqual_def 
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>



<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹scheLoopOnce2 verify›</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_scheLoopOnce2 <span class="main">:</span>
  <span class="quoted"><span class="quoted"><span class="language">"ScheduleMsgEqual <span class="free">msg</span> <span class="free">scheMsg</span> <span class="main">⟹</span>
    corres_underlying <span class="main">{</span><span class="bound">p</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="main">(</span>snd <span class="bound">p</span><span class="main">)</span> <span class="main">(</span>fst <span class="main">(</span>fst <span class="bound">p</span><span class="main">)</span><span class="main">)</span><span class="main">}</span> False False
     <span class="main">(</span><span class="main">λ</span><span class="bound">queueFlag</span> <span class="bound">ret</span><span class="main">.</span> <span class="bound">queueFlag</span> <span class="main">=</span> True <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">1</span> <span class="main">∨</span> <span class="bound">queueFlag</span> <span class="main">=</span> False <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> <span class="main">(</span>sche_valid <span class="free">schePtr</span><span class="main">)</span>
     <span class="main">(</span>Des_scheLoopOnce2 <span class="free">msg</span><span class="main">)</span> <span class="main">(</span>Impl_scheLoopOnce2 <span class="free">schePtr</span> <span class="free">scheMsg</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_scheLoopOnce2_def Impl_scheLoopOnce2_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_condition_case_scheMsg<span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">case_tac</span> <span class="quoted"><span class="quoted"><span class="language">"ScheduleMsg.type <span class="free">msg</span>"</span></span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">using</span></span> ScheduleMsgEqual_def compare'_def compare_string <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">fastforce</span><span class="main"><span class="keyword3">+</span></span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹scheLoopOnce verify›</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_scheLoopOnce <span class="main">:</span> 
 <span class="quoted"><span class="quoted"><span class="language">"corres_underlying <span class="main">(</span><span class="main">{</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">(</span>fst <span class="bound">t</span><span class="main">)</span><span class="main">}</span><span class="main">)</span> False False
      <span class="main">(</span><span class="main">λ</span><span class="bound">retDes</span> <span class="bound">retImpl</span><span class="main">.</span> True<span class="main">)</span>  <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> True<span class="main">)</span>  <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> 
      <span class="main">(</span>Des_scheLoopOnce <span class="main">)</span> <span class="main">(</span>Impl_scheLoopOnce <span class="free">schePtr</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_scheLoopOnce_def Impl_scheLoopOnce_def when_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> unknown_def select_def UNIV_def NonDetMonad.valid_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>  
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> scheMsgPtr
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span> 
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="main">(</span><span class="bound">scheMsg</span><span class="main">,</span> <span class="bound">queueFlag</span><span class="main">)</span> <span class="main">(</span><span class="bound">ret</span><span class="main">,</span> <span class="bound">scheMsgC</span><span class="main">)</span><span class="main">.</span> <span class="main">(</span><span class="main">(</span><span class="bound">queueFlag</span> <span class="main">=</span> True <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">queueFlag</span> <span class="main">=</span> False <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span><span class="main">)</span> <span class="main">∧</span> 
                              <span class="main">(</span>ScheduleMsgEqual <span class="bound">scheMsg</span> <span class="bound">scheMsgC</span><span class="main">)</span> "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">using</span></span> des_impl_scheLoopOnce1 <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> Impl_scheLoopOnce1_def Impl_scheMsgQueue_Empty_def Impl_scheMsgQueue_front_def
                    Impl_scheMsgQueue_pop_def sche_valid_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>  
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
        <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">rule</span> corres_underlying_split<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> P <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> True"</span></span></span> 
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> P' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span>"</span></span></span>
                <span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword">and</span></span></span></span> r' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">λ</span> <span class="bound">queueFlag</span> <span class="bound">ret</span><span class="main">.</span> <span class="main">(</span><span class="main">(</span><span class="bound">queueFlag</span> <span class="main">=</span> True <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">1</span><span class="main">)</span> <span class="main">∨</span> <span class="main">(</span><span class="bound">queueFlag</span> <span class="main">=</span> False <span class="main">∧</span> <span class="bound">ret</span> <span class="main">=</span> <span class="main">0</span><span class="main">)</span><span class="main">)</span>  "</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">by</span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> des_impl_scheLoopOnce2<span class="main"><span class="keyword3">,</span></span><span class="operator">auto</span><span class="main">)</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> Impl_scheLoopOnce2_def sche_valid_def <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command">using</span></span> des_impl_schedule 
  <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹api_switchToActor verify ›</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_switchToActor_api <span class="main">:</span> 
 <span class="quoted"><span class="quoted"><span class="language">"stringEqual <span class="free">anActorName</span> <span class="free">anActorNameC</span> <span class="main">⟹</span>
  corres_underlying <span class="main">(</span><span class="main">{</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">(</span>fst <span class="bound">t</span><span class="main">)</span><span class="main">}</span><span class="main">)</span> False False
      <span class="main">(</span><span class="main">λ</span><span class="bound">retDes</span> <span class="bound">retImpl</span><span class="main">.</span> True<span class="main">)</span>  <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> True<span class="main">)</span>  <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> 
      <span class="main">(</span>Des_api_switchToActor <span class="free">anActorID</span> <span class="free">anActorName</span> <span class="main">)</span> <span class="main">(</span>Impl_switchToActor_api <span class="free">schePtr</span> <span class="free">anActorID</span> <span class="free">anActorNameC</span> <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_api_switchToActor_def  Impl_switchToActor_api_def unknown_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> True <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> select_def UNIV_def NonDetMonad.valid_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> msg
    <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">insert</span> des_impl_appendScheduleMsg<span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold schePtrEqual_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command">using</span></span> compare'_def compare_string <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">fastforce</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>

<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹api_activateActor verify ›</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_activateActor_api <span class="main">:</span> 
 <span class="quoted"><span class="quoted"><span class="language">"stringEqual <span class="free">anActorName</span> <span class="free">anActorNameC</span> <span class="main">⟹</span>
  corres_underlying <span class="main">(</span><span class="main">{</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">(</span>fst <span class="bound">t</span><span class="main">)</span><span class="main">}</span><span class="main">)</span> False False
      <span class="main">(</span><span class="main">λ</span><span class="bound">retDes</span> <span class="bound">retImpl</span><span class="main">.</span> True<span class="main">)</span>  <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> True<span class="main">)</span>  <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> True<span class="main">)</span> 
      <span class="main">(</span>Des_api_activateActor <span class="free">anActorID</span> <span class="free">anActorName</span><span class="main">)</span> <span class="main">(</span>Impl_activateActor_api <span class="free">schePtr</span> <span class="free">anActorID</span> <span class="free">anActorNameC</span> <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_api_activateActor_def  Impl_activateActor_api_def unknown_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span> <span class="bound">s</span><span class="main">.</span> True <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
     <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span>  <span class="keyword1"><span class="command">unfolding</span></span> select_def UNIV_def NonDetMonad.valid_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> msg
    <span class="keyword1"><span class="command">unfolding</span></span> NonDetMonad.bind_def modify_def get_def put_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">insert</span> des_impl_appendScheduleMsg<span class="main">)</span></span>
    <span class="keyword1"><span class="command">unfolding</span></span> corres_underlying_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> case_prod_unfold schePtrEqual_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command">using</span></span> compare'_def compare_string <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">fastforce</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>



<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹api_yieldActor verify ›</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_yieldActor_api <span class="main">:</span> 
 <span class="quoted"><span class="quoted"><span class="language">"corres_underlying <span class="main">(</span><span class="main">{</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">(</span>fst <span class="bound">t</span><span class="main">)</span><span class="main">}</span><span class="main">)</span> False False
      <span class="main">(</span><span class="main">λ</span><span class="bound">retDes</span> <span class="bound">retImpl</span><span class="main">.</span> True<span class="main">)</span>  <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> True<span class="main">)</span>  <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> 
      <span class="main">(</span>Des_api_yieldActor <span class="free">anActorID</span> <span class="main">)</span> <span class="main">(</span>Impl_yieldActorAPI_api <span class="free">schePtr</span> <span class="free">anActorID</span><span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_api_yieldActor_def  Impl_yieldActorAPI_api_def unknown_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
     ScheduleMsgEqual <span class="main">⦇</span>ScheduleMsg.type <span class="main">=</span> ScheduleMsgType.SCHEDULE_CMD_YIELD_ACTOR<span class="main">,</span> param1 <span class="main">=</span> <span class="free">anActorID</span><span class="main">,</span> param2 <span class="main">=</span> <span class="main">0</span><span class="main">,</span> param3 <span class="main">=</span> <span class="main">[]</span><span class="main">⦈</span> 
        <span class="main">(</span>param3_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> NULL<span class="main">)</span><span class="main">(</span>param2_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span>param1_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> of_int <span class="free">anActorID</span><span class="main">)</span>
             <span class="main">(</span>type_C_update <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> impl_SCHEDULE_CMD_YIELD_ACTOR<span class="main">)</span> <span class="bound">ret</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> aMsgC
    <span class="keyword1"><span class="command">using</span></span> des_impl_appendScheduleMsg<span class="main">[</span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> schePtr <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="language"><span class="free">schePtr</span></span></span> 
           <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> aMsg <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⦇</span>ScheduleMsg.type <span class="main">=</span> ScheduleMsgType.SCHEDULE_CMD_YIELD_ACTOR<span class="main">,</span> param1 <span class="main">=</span> <span class="free">anActorID</span><span class="main">,</span> param2 <span class="main">=</span> <span class="main">0</span><span class="main">,</span> param3 <span class="main">=</span> <span class="main">[]</span><span class="main">⦈</span>"</span></span></span>
           <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> aMsgC <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span>param3_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> NULL<span class="main">)</span> <span class="main">(</span>param2_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span>
           <span class="main">(</span>param1_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> of_int <span class="free">anActorID</span><span class="main">)</span> <span class="main">(</span>type_C_update <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> impl_SCHEDULE_CMD_YIELD_ACTOR<span class="main">)</span> <span class="skolem">aMsgC</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> select_def UNIV_def NonDetMonad.valid_def ScheduleMsgEqual_def 
          stateMsgEqual_def int64Equal_def stringEqual_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> s x
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="skolem">x</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> impl_SCHEDULE_CMD_YIELD_ACTOR_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command">using</span></span> sint_of_int
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>


<span class="keyword1"><span class="command">subsection</span></span> <span class="quoted"><span class="document"><span class="plain_text">‹api_appendScheduleRequest verify ›</span></span></span>

<span class="keyword1"><span class="command">lemma</span></span> des_impl_appendScheduleRequest <span class="main">:</span> 
 <span class="quoted"><span class="quoted"><span class="language">"corres_underlying <span class="main">(</span><span class="main">{</span><span class="main">(</span><span class="bound">t</span><span class="main">,</span><span class="bound">s</span><span class="main">)</span><span class="main">.</span> schePtrEqual <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">(</span>fst <span class="bound">t</span><span class="main">)</span><span class="main">}</span><span class="main">)</span> False False
      <span class="main">(</span><span class="main">λ</span><span class="bound">retDes</span> <span class="bound">retImpl</span><span class="main">.</span> True<span class="main">)</span>  <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> True<span class="main">)</span>  <span class="main">(</span><span class="main">λ</span><span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span><span class="main">)</span> 
      <span class="main">(</span>Des_api_appendScheduleRequest <span class="free">anActorID</span><span class="main">)</span> <span class="main">(</span>Impl_appendScheduleRequest <span class="free">schePtr</span> <span class="free">anActorID</span> <span class="main">)</span>"</span></span></span>
  <span class="keyword1"><span class="command">unfolding</span></span> Des_api_appendScheduleRequest_def  Impl_appendScheduleRequest_def unknown_def
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="language"><span class="main">(</span><span class="operator">rule</span> corres_symb_exec_r<span class="main"><span class="main">[</span></span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> Q' <span class="main"><span class="main"><span class="main">=</span></span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span><span class="main">λ</span><span class="bound">ret</span> <span class="bound">s</span><span class="main">.</span> sche_valid <span class="free">schePtr</span> <span class="bound">s</span> <span class="main">∧</span>
     ScheduleMsgEqual <span class="main">⦇</span>ScheduleMsg.type <span class="main">=</span> ScheduleMsgType.SCHEDULE_CMD_RAW<span class="main">,</span> param1 <span class="main">=</span> <span class="free">anActorID</span><span class="main">,</span> param2 <span class="main">=</span> <span class="main">0</span><span class="main">,</span> param3 <span class="main">=</span> <span class="main">[]</span><span class="main">⦈</span> 
        <span class="main">(</span>param3_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> NULL<span class="main">)</span><span class="main">(</span>param2_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span> <span class="main">(</span>param1_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> of_int <span class="free">anActorID</span><span class="main">)</span>
             <span class="main">(</span>type_C_update <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> impl_SCHEDULE_CMD_RAW<span class="main">)</span> <span class="bound">ret</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span> <span class="main">)</span>"</span></span></span></span><span class="main"><span class="main">]</span></span><span class="main">)</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> aMsgC
    <span class="keyword1"><span class="command">using</span></span> des_impl_appendScheduleMsg<span class="main">[</span><span class="language"><span class="keyword2"><span class="keyword"><span class="operator">where</span></span></span> schePtr <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="language"><span class="free">schePtr</span></span></span> 
           <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> aMsg <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">⦇</span>ScheduleMsg.type <span class="main">=</span> ScheduleMsgType.SCHEDULE_CMD_RAW<span class="main">,</span> param1 <span class="main">=</span> <span class="free">anActorID</span><span class="main">,</span> param2 <span class="main">=</span> <span class="main">0</span><span class="main">,</span> param3 <span class="main">=</span> <span class="main">[]</span><span class="main">⦈</span>"</span></span></span>
           <span class="keyword2"><span class="keyword"><span class="quasi_keyword">and</span></span></span> aMsgC <span class="main"><span class="main">=</span></span> <span class="quoted"><span class="quoted"><span class="language">"<span class="main">(</span>param3_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> NULL<span class="main">)</span> <span class="main">(</span>param2_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> <span class="main">0</span><span class="main">)</span>
           <span class="main">(</span>param1_C_update <span class="main">(</span><span class="main">λ</span><span class="bound">a</span><span class="main">.</span> of_int <span class="free">anActorID</span><span class="main">)</span> <span class="main">(</span>type_C_update <span class="main">(</span><span class="main">λ</span><span class="main"><span class="bound">_</span></span><span class="main">.</span> impl_SCHEDULE_CMD_RAW<span class="main">)</span> <span class="skolem">aMsgC</span><span class="main">)</span><span class="main">)</span><span class="main">)</span><span class="main">)</span>"</span></span></span></span><span class="main">]</span>
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">blast</span></span>
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">defer</span></span></span></span> <span class="keyword1"><span class="command">unfolding</span></span> select_def UNIV_def NonDetMonad.valid_def ScheduleMsgEqual_def 
          stateMsgEqual_def int64Equal_def stringEqual_def
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">wpsimp</span><span class="main"><span class="keyword3">+</span></span></span> 
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">subgoal</span></span></span></span> <span class="keyword2"><span class="keyword">for</span></span> s x
    <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="main">(</span><span class="operator">induct</span> <span class="quoted"><span class="language"><span class="skolem">x</span></span></span><span class="main">)</span></span> <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span> 
    <span class="keyword1"><span class="command">unfolding</span></span> impl_SCHEDULE_CMD_RAW_def <span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span> <span class="language"><span class="operator">auto</span></span>
    <span class="keyword1"><span class="command">using</span></span> sint_of_int
    <span class="keyword1"><span class="command">by</span></span> <span class="language"><span class="operator">auto</span></span>
  <span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span>


<span class="keyword2"><span class="keyword">end</span></span></pre></body>